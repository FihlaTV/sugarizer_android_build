/*! Sugarizer 2017-09-04 */
enyo.kind({name:"Sugar.FirstScreen",kind:enyo.Control,components:[{name:"namebox",classes:"first-namebox",onresize:"resize",components:[{name:"nameline",classes:"first-nameline",components:[{name:"text",content:"xxx",classes:"first-nametext"},{classes:"first-input",components:[{name:"name",kind:"Input",classes:"first-namevalue",onfocus:"scrollToField",onkeydown:"enterclick"}]}]}]},{name:"previous",kind:"Sugar.IconButton",icon:{directory:"icons",icon:"go-left.svg"},classes:"first-leftbutton",ontap:"previous",showing:!1},{name:"next",kind:"Sugar.IconButton",icon:{directory:"icons",icon:"go-right.svg"},classes:"first-rightbutton",ontap:"next"},{name:"colortext",content:"xxx",classes:"first-colortext",showing:!1},{name:"owner",kind:"Sugar.Icon",size:constant.sizeOwner,colorized:!0,classes:"first-owner-icon",showing:!1,onresize:"resize",ontap:"nextcolor"}],create:function(){this.inherited(arguments),this.$.text.setContent(l10n.get("Name")),this.$.previous.setText(l10n.get("Back")),this.$.next.setText(l10n.get("Next")),this.$.owner.setIcon({directory:"icons",icon:"owner-icon.svg"}),this.$.colortext.setContent(l10n.get("ClickToColor"));var a=util.getCanvasCenter();this.$.owner.applyStyle("margin-left",a.x-constant.sizeOwner/2+"px");var b=a.y-constant.sizeOwner/2;this.$.nameline.applyStyle("margin-top",b+"px"),this.$.owner.applyStyle("margin-top",b+"px"),this.$.colortext.applyStyle("margin-top",b-15+"px"),this.ownerColor=Math.floor(Math.random()*xoPalette.colors.length),this.$.owner.setColorizedColor(xoPalette.colors[this.ownerColor]),"rtl"==l10n.language.direction&&this.$.name.addClass("rtl-10"),this.step=0;var c=document.getElementById("toolbar");this.backgroundColor=c.style.backgroundColor,c.style.backgroundColor="white",document.getElementById("canvas").style.overflowY="hidden",util.hideNativeToolbar()},next:function(){var a=this.$.name.getValue();if(this.step++)preferences.setColor(this.ownerColor),preferences.setName(a),document.getElementById("toolbar").style.backgroundColor=this.backgroundColor,document.getElementById("canvas").style.overflowY="auto",app=new Sugar.Desktop,app.renderInto(document.getElementById("canvas")),preferences.save();else{if(0==a.length)return;this.$.namebox.setShowing(!1),this.$.colortext.setShowing(!0),this.$.owner.setShowing(!0),this.$.previous.setShowing(!0),this.$.next.setText(l10n.get("Done"))}},previous:function(){this.$.namebox.setShowing(!0),this.$.colortext.setShowing(!1),this.$.owner.setShowing(!1),this.$.previous.setShowing(!1),this.$.next.setText(l10n.get("Next")),this.step--},enterclick:function(a,b){if(13===b.keyCode)return this.next(),!0},scrollToField:function(){var a=this.$.name.hasNode();a&&(enyo.platform.android||enyo.platform.androidChrome)&&setTimeout(function(){a.scrollIntoView()},100)},nextcolor:function(){this.ownerColor=this.ownerColor+1,this.ownerColor>=xoPalette.colors.length&&(this.ownerColor=0),this.$.owner.setColorizedColor(xoPalette.colors[this.ownerColor]),this.$.owner.render()},resize:function(){var a=util.getCanvasCenter();this.$.owner.applyStyle("margin-left",a.x-constant.sizeOwner/2+"px");var b=a.y-constant.sizeOwner/2;this.$.nameline.applyStyle("margin-top",b+"px"),this.$.owner.applyStyle("margin-top",b+"px"),this.$.colortext.applyStyle("margin-top",b-15+"px")}});