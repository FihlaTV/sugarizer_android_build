/*! Sugarizer 2017-08-25 */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.cytoscape=a()}}(function(){var define,module,exports;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("./util"),e=a("./is"),f=a("./promise"),g=function(a,b,c){if(!(this instanceof g))return new g(a,b,c);var f=this._private=d.extend({duration:1e3},b,c);f.target=a,f.style=f.style||f.css,f.started=!1,f.playing=!1,f.hooked=!1,f.applying=!1,f.progress=0,f.completes=[],f.frames=[],f.complete&&e.fn(f.complete)&&f.completes.push(f.complete),this.length=1,this[0]=this},h=g.prototype;d.extend(h,{instanceString:function(){return"animation"},hook:function(){var a=this._private;if(!a.hooked){var b,c=a.target._private.animation;b=a.queue?c.queue:c.current,b.push(this),e.elementOrCollection(a.target)&&a.target.cy().addToAnimationPool(a.target),a.hooked=!0}return this},play:function(){var a=this._private;return 1===a.progress&&(a.progress=0),a.playing=!0,a.started=!1,a.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var a=this._private;return a.applying=!0,a.started=!1,a.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var a=this._private;return a.playing=!1,a.started=!1,this},stop:function(){var a=this._private;return a.playing=!1,a.started=!1,a.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(a){var b=this._private;return void 0===a?b.progress*b.duration:this.progress(a/b.duration)},progress:function(a){var b=this._private,c=b.playing;return void 0===a?b.progress:(c&&this.pause(),b.progress=a,b.started=!1,c&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var a=this._private,b=a.playing;b&&this.pause(),a.progress=1-a.progress,a.started=!1;var c=function(b,c){var d=a[b];a[b]=a[c],a[c]=d};c("zoom","startZoom"),c("pan","startPan"),c("position","startPosition");for(var e=0;e<a.style.length;e++){var f=a.style[e],g=f.name,h=a.startStyle[g];a.startStyle[g]=a.startStyle[d.dash2camel(g)]=f,a.style[e]=h}return b&&this.play(),this},promise:function(a){var b,c=this._private;switch(a){case"frame":b=c.frames;break;default:case"complete":case"completed":b=c.completes}return new f(function(a,c){b.push(function(){a()})})}}),h.complete=h.completed,b.exports=g},{"./is":77,"./promise":80,"./util":94}],2:[function(a,b,c){"use strict";var d=a("../../is"),e={aStar:function(a){var b=this;a=a||{};var c=function(a,b,d,e){if(a==b)return e.push(f.getElementById(b)),e;if(b in d){var g=d[b],h=o[b];return e.push(f.getElementById(b)),e.push(f.getElementById(h)),c(a,g,d,e)}},e=function(a,b){if(0!==a.length){for(var c=0,d=b[a[0]],e=1;e<a.length;e++){var f=b[a[e]];d>f&&(d=f,c=e)}return c}},f=this._private.cy;if(null!=a&&null!=a.root){var g=d.string(a.root)?this.filter(a.root)[0]:a.root[0];if(null!=a.goal){var h=d.string(a.goal)?this.filter(a.goal)[0]:a.goal[0];if(null!=a.heuristic&&d.fn(a.heuristic))var i=a.heuristic;else var i=function(){return 0};if(null!=a.weight&&d.fn(a.weight))var j=a.weight;else var j=function(a){return 1};if(null!=a.directed)var k=a.directed;else var k=!1;var l=[],m=[g.id()],n={},o={},p={},q={};p[g.id()]=0,q[g.id()]=i(g);for(var r=this.edges().stdFilter(function(a){return!a.isLoop()}),s=this.nodes(),t=0;m.length>0;){var u=e(m,q),v=f.getElementById(m[u]);if(t++,v.id()==h.id()){var w=c(g.id(),h.id(),n,[]);return w.reverse(),{found:!0,distance:p[v.id()],path:b.spawn(w),steps:t}}l.push(v.id()),m.splice(u,1);var x=v.connectedEdges();k&&(x=x.stdFilter(function(a){return a.data("source")===v.id()})),x=x.intersect(r);for(var y=0;y<x.length;y++){var z=x[y],A=z.connectedNodes().stdFilter(function(a){return a.id()!==v.id()}).intersect(s);if(-1==l.indexOf(A.id())){var B=p[v.id()]+j.apply(z,[z]);-1!=m.indexOf(A.id())?B<p[A.id()]&&(p[A.id()]=B,q[A.id()]=B+i(A),n[A.id()]=v.id()):(p[A.id()]=B,q[A.id()]=B+i(A),m.push(A.id()),n[A.id()]=v.id(),o[A.id()]=z.id())}}}return{found:!1,distance:void 0,path:void 0,steps:t}}}}};b.exports=e},{"../../is":77}],3:[function(a,b,c){"use strict";var d=a("../../is"),e=a("../../util"),f={bellmanFord:function(a){var b=this;if(a=a||{},null!=a.weight&&d.fn(a.weight))var c=a.weight;else var c=function(a){return 1};if(null!=a.directed)var f=a.directed;else var f=!1;if(null!=a.root){if(d.string(a.root))var g=this.filter(a.root)[0];else var g=a.root[0];for(var h=this._private.cy,i=this.edges().stdFilter(function(a){return!a.isLoop()}),j=this.nodes(),k=j.length,l={},m=0;k>m;m++)l[j[m].id()]=m;for(var n=[],o=[],p=[],m=0;k>m;m++)j[m].id()===g.id()?n[m]=0:n[m]=1/0,o[m]=void 0;for(var q=!1,m=1;k>m;m++){q=!1;for(var r=0;r<i.length;r++){var s=l[i[r].source().id()],t=l[i[r].target().id()],u=c.apply(i[r],[i[r]]),v=n[s]+u;if(v<n[t]&&(n[t]=v,o[t]=s,p[t]=i[r],q=!0),!f){var v=n[t]+u;v<n[s]&&(n[s]=v,o[s]=t,p[s]=i[r],q=!0)}}if(!q)break}if(q)for(var r=0;r<i.length;r++){var s=l[i[r].source().id()],t=l[i[r].target().id()],u=c.apply(i[r],[i[r]]);if(n[s]+u<n[t])return e.error("Graph contains a negative weight cycle for Bellman-Ford"),{pathTo:void 0,distanceTo:void 0,hasNegativeWeightCycle:!0}}for(var w=[],m=0;k>m;m++)w.push(j[m].id());var x={distanceTo:function(a){if(d.string(a))var b=h.filter(a)[0].id();else var b=a.id();return n[l[b]]},pathTo:function(a){var c=function(a,b,c,d,e,f){for(;;){if(e.push(h.getElementById(d[c])),e.push(f[c]),b===c)return e;var g=a[c];if("undefined"==typeof g)return;c=g}};if(d.string(a))var e=h.filter(a)[0].id();else var e=a.id();var f=[],i=c(o,l[g.id()],l[e],w,f,p);return null!=i&&i.reverse(),b.spawn(i)},hasNegativeWeightCycle:!1};return x}}};b.exports=f},{"../../is":77,"../../util":94}],4:[function(a,b,c){"use strict";var d=a("../../is"),e={betweennessCentrality:function(a){if(a=a||{},null!=a.weight&&d.fn(a.weight))var b=a.weight,c=!0;else var c=!1;if(null!=a.directed&&d.bool(a.directed))var e=a.directed;else var e=!1;for(var f=function(a,b){a.unshift(b);for(var c=0;p[a[c]]<p[a[c+1]]&&c<a.length-1;c++){var d=a[c];a[c]=a[c+1],a[c+1]=d}},g=this._private.cy,h=this.nodes(),i={},j={},k=0;k<h.length;k++)e?i[h[k].id()]=h[k].outgoers("node"):i[h[k].id()]=h[k].openNeighborhood("node");for(var k=0;k<h.length;k++)j[h[k].id()]=0;for(var l=0;l<h.length;l++){for(var m=[],n={},o={},p={},q=[],k=0;k<h.length;k++)n[h[k].id()]=[],o[h[k].id()]=0,p[h[k].id()]=Number.POSITIVE_INFINITY;for(o[h[l].id()]=1,p[h[l].id()]=0,q.unshift(h[l].id());q.length>0;){var r=q.pop();m.push(r),c?i[r].forEach(function(a){if(g.$("#"+r).edgesTo(a).length>0)var c=g.$("#"+r).edgesTo(a)[0];else var c=a.edgesTo("#"+r)[0];var d=b.apply(c,[c]);p[a.id()]>p[r]+d&&(p[a.id()]=p[r]+d,q.indexOf(a.id())<0?f(q,a.id()):(q.splice(q.indexOf(a.id()),1),f(q,a.id())),o[a.id()]=0,n[a.id()]=[]),p[a.id()]==p[r]+d&&(o[a.id()]=o[a.id()]+o[r],n[a.id()].push(r))}):i[r].forEach(function(a){p[a.id()]==Number.POSITIVE_INFINITY&&(q.unshift(a.id()),p[a.id()]=p[r]+1),p[a.id()]==p[r]+1&&(o[a.id()]=o[a.id()]+o[r],n[a.id()].push(r))})}for(var s={},k=0;k<h.length;k++)s[h[k].id()]=0;for(;m.length>0;){var t=m.pop();n[t].forEach(function(a){s[a]=s[a]+o[a]/o[t]*(1+s[t]),t!=h[l].id()&&(j[t]=j[t]+s[t])})}}var u=0;for(var v in j)u<j[v]&&(u=j[v]);var w={betweenness:function(a){if(d.string(a))var a=g.filter(a)[0].id();else var a=a.id();return j[a]},betweennessNormalized:function(a){if(d.string(a))var a=g.filter(a)[0].id();else var a=a.id();return j[a]/u}};return w.betweennessNormalised=w.betweennessNormalized,w}};e.bc=e.betweennessCentrality,b.exports=e},{"../../is":77}],5:[function(a,b,c){"use strict";var d=a("../../is"),e=a("../../heap"),f=function(a){return a={bfs:a.bfs||!a.dfs,dfs:a.dfs||!a.bfs},function(b,c,e){var f,g,h;d.plainObject(b)&&!d.elementOrCollection(b)&&(f=b,b=f.roots||f.root,c=f.visit,e=f.directed,g=f.std,h=f.thisArg),e=2!==arguments.length||d.fn(c)?e:c,c=d.fn(c)?c:function(){};for(var i,j=this._private.cy,k=b=d.string(b)?this.filter(b):b,l=[],m=[],n={},o={},p={},q=0,r=this.nodes(),s=this.edges(),t=0;t<k.length;t++)k[t].isNode()&&(l.unshift(k[t]),a.bfs&&(p[k[t].id()]=!0,m.push(k[t])),o[k[t].id()]=0);for(;0!==l.length;){var k=a.bfs?l.shift():l.pop();if(a.dfs){if(p[k.id()])continue;p[k.id()]=!0,m.push(k)}var u,v=o[k.id()],w=n[k.id()],x=null==w?void 0:w.connectedNodes().not(k)[0];if(u=g?c.call(h,k,w,x,q++,v):c.call(k,q++,v,k,w,x),u===!0){i=k;break}if(u===!1)break;for(var y=k.connectedEdges(e?function(){return this.data("source")===k.id()}:void 0).intersect(s),t=0;t<y.length;t++){var z=y[t],A=z.connectedNodes(function(){return this.id()!==k.id()}).intersect(r);0===A.length||p[A.id()]||(A=A[0],l.push(A),a.bfs&&(p[A.id()]=!0,m.push(A)),n[A.id()]=z,o[A.id()]=o[k.id()]+1)}}for(var B=[],t=0;t<m.length;t++){var C=m[t],D=n[C.id()];D&&B.push(D),B.push(C)}return{path:j.collection(B,{unique:!0}),found:j.collection(i)}}},g={breadthFirstSearch:f({bfs:!0}),depthFirstSearch:f({dfs:!0}),kruskal:function(a){function b(a){for(var b=0;b<f.length;b++){var c=f[b];if(c.anySame(a))return{eles:c,index:b}}}var c=this.cy();a=d.fn(a)?a:function(){return 1};for(var e=c.collection(c,[]),f=[],g=this.nodes(),h=0;h<g.length;h++)f.push(g[h].collection());for(var i=this.edges(),j=i.toArray().sort(function(b,c){var d=a.call(b,b),e=a.call(c,c);return d-e}),h=0;h<j.length;h++){var k=j[h],l=k.source()[0],m=k.target()[0],n=b(l),o=b(m);n.index!==o.index&&(e=e.add(k),f[n.index]=n.eles.add(o.eles),f.splice(o.index,1))}return g.add(e)},dijkstra:function(a,b,c){var f;d.plainObject(a)&&!d.elementOrCollection(a)&&(f=a,a=f.root,b=f.weight,c=f.directed);var g=this._private.cy;b=d.fn(b)?b:function(){return 1};for(var h=d.string(a)?this.filter(a)[0]:a[0],i={},j={},k={},l=this.edges().filter(function(){return!this.isLoop()}),m=this.nodes(),n=function(a){return i[a.id()]},o=function(a,b){i[a.id()]=b,p.updateItem(a)},p=new e(function(a,b){return n(a)-n(b)}),q=0;q<m.length;q++){var r=m[q];i[r.id()]=r.same(h)?0:1/0,p.push(r)}for(var s=function(a,d){for(var e,f=(c?a.edgesTo(d):a.edgesWith(d)).intersect(l),g=1/0,h=0;h<f.length;h++){var i=f[h],j=b.apply(i,[i]);(g>j||!e)&&(g=j,e=i)}return{edge:e,dist:g}};p.size()>0;){var t=p.pop(),u=n(t),v=t.id();if(k[v]=u,u===Math.Infinite)break;for(var w=t.neighborhood().intersect(m),q=0;q<w.length;q++){var x=w[q],y=x.id(),z=s(t,x),A=u+z.dist;A<n(x)&&(o(x,A),j[y]={node:t,edge:z.edge})}}return{distanceTo:function(a){var b=d.string(a)?m.filter(a)[0]:a[0];return k[b.id()]},pathTo:function(a){var b=d.string(a)?m.filter(a)[0]:a[0],c=[],e=b;if(b.length>0)for(c.unshift(b);j[e.id()];){var f=j[e.id()];c.unshift(f.edge),c.unshift(f.node),e=f.node}return g.collection(c)}}}};g.bfs=g.breadthFirstSearch,g.dfs=g.depthFirstSearch,b.exports=g},{"../../heap":75,"../../is":77}],6:[function(a,b,c){"use strict";var d=a("../../is"),e={closenessCentralityNormalized:function(a){a=a||{};var b=this.cy(),c=a.harmonic;void 0===c&&(c=!0);for(var e={},f=0,g=this.nodes(),h=this.floydWarshall({weight:a.weight,directed:a.directed}),i=0;i<g.length;i++){for(var j=0,k=0;k<g.length;k++)if(i!=k){var l=h.distance(g[i],g[k]);j+=c?1/l:l}c||(j=1/j),j>f&&(f=j),e[g[i].id()]=j}return{closeness:function(a){if(d.string(a))var a=b.filter(a)[0].id();else var a=a.id();return e[a]/f}}},closenessCentrality:function(a){if(a=a||{},null!=a.root){if(d.string(a.root))var b=this.filter(a.root)[0];else var b=a.root[0];if(null!=a.weight&&d.fn(a.weight))var c=a.weight;else var c=function(){return 1};if(null!=a.directed&&d.bool(a.directed))var e=a.directed;else var e=!1;var f=a.harmonic;void 0===f&&(f=!0);for(var g=this.dijkstra({root:b,weight:c,directed:e}),h=0,i=this.nodes(),j=0;j<i.length;j++)if(i[j].id()!=b.id()){var k=g.distanceTo(i[j]);h+=f?1/k:k}return f?h:1/h}}};e.cc=e.closenessCentrality,e.ccn=e.closenessCentralityNormalised=e.closenessCentralityNormalized,b.exports=e},{"../../is":77}],7:[function(a,b,c){"use strict";var d=a("../../is"),e=a("../../util"),f={degreeCentralityNormalized:function(a){a=a||{};var b=this.cy();if(null!=a.directed)var c=a.directed;else var c=!1;var f=this.nodes(),g=f.length;if(c){for(var h={},i={},j=0,k=0,l=0;g>l;l++){var m=f[l],n=this.degreeCentrality(e.extend({},a,{root:m}));j<n.indegree&&(j=n.indegree),k<n.outdegree&&(k=n.outdegree),h[m.id()]=n.indegree,i[m.id()]=n.outdegree}return{indegree:function(a){if(d.string(a))var a=b.filter(a)[0].id();else var a=a.id();return h[a]/j},outdegree:function(a){if(d.string(a))var a=b.filter(a)[0].id();else var a=a.id();return i[a]/k}}}for(var o={},p=0,l=0;g>l;l++){var m=f[l],n=this.degreeCentrality(e.extend({},a,{root:m}));p<n.degree&&(p=n.degree),o[m.id()]=n.degree}return{degree:function(a){if(d.string(a))var a=b.filter(a)[0].id();else var a=a.id();return o[a]/p}}},degreeCentrality:function(a){a=a||{};var b=this;if(null!=a&&null!=a.root){var c=d.string(a.root)?this.filter(a.root)[0]:a.root[0];if(null!=a.weight&&d.fn(a.weight))var e=a.weight;else var e=function(a){return 1};if(null!=a.directed)var f=a.directed;else var f=!1;if(null!=a.alpha&&d.number(a.alpha))var g=a.alpha;else g=0;if(f){for(var h=c.connectedEdges('edge[target = "'+c.id()+'"]').intersection(b),i=c.connectedEdges('edge[source = "'+c.id()+'"]').intersection(b),j=h.length,k=i.length,l=0,m=0,n=0;n<h.length;n++){var o=h[n];l+=e.apply(o,[o])}for(var n=0;n<i.length;n++){var o=i[n];m+=e.apply(o,[o])}return{indegree:Math.pow(j,1-g)*Math.pow(l,g),outdegree:Math.pow(k,1-g)*Math.pow(m,g)}}for(var p=c.connectedEdges().intersection(b),q=p.length,r=0,n=0;n<p.length;n++){var o=p[n];r+=e.apply(o,[o])}return{degree:Math.pow(q,1-g)*Math.pow(r,g)}}}};f.dc=f.degreeCentrality,f.dcn=f.degreeCentralityNormalised=f.degreeCentralityNormalized,b.exports=f},{"../../is":77,"../../util":94}],8:[function(a,b,c){"use strict";var d=a("../../is"),e={floydWarshall:function(a){a=a||{};var b=this.cy();if(null!=a.weight&&d.fn(a.weight))var c=a.weight;else var c=function(a){return 1};if(null!=a.directed)var e=a.directed;else var e=!1;for(var f=this.edges().stdFilter(function(a){return!a.isLoop()}),g=this.nodes(),h=g.length,i={},j=0;h>j;j++)i[g[j].id()]=j;for(var k=[],j=0;h>j;j++){for(var l=new Array(h),m=0;h>m;m++)j==m?l[m]=0:l[m]=1/0;k.push(l)}var n=[],o=[],p=function(a){for(var b=0;h>b;b++){for(var c=new Array(h),d=0;h>d;d++)c[d]=void 0;a.push(c)}};p(n),p(o);for(var j=0;j<f.length;j++){var q=i[f[j].source().id()],r=i[f[j].target().id()],s=c.apply(f[j],[f[j]]);k[q][r]>s&&(k[q][r]=s,n[q][r]=r,o[q][r]=f[j])}if(!e)for(var j=0;j<f.length;j++){var q=i[f[j].target().id()],r=i[f[j].source().id()],s=c.apply(f[j],[f[j]]);k[q][r]>s&&(k[q][r]=s,n[q][r]=r,o[q][r]=f[j])}for(var t=0;h>t;t++)for(var j=0;h>j;j++)for(var m=0;h>m;m++)k[j][t]+k[t][m]<k[j][m]&&(k[j][m]=k[j][t]+k[t][m],n[j][m]=n[j][t]);for(var u=[],j=0;h>j;j++)u.push(g[j].id());var v={distance:function(a,c){if(d.string(a))var e=b.filter(a)[0].id();else var e=a.id();if(d.string(c))var f=b.filter(c)[0].id();else var f=c.id();return k[i[e]][i[f]]},path:function(a,c){var e=function(a,c,d,e,f){if(a===c)return b.getElementById(e[a]);if(void 0!==d[a][c]){for(var g=[b.getElementById(e[a])],h=a;a!==c;){h=a,a=d[a][c];var i=f[h][a];g.push(i),g.push(b.getElementById(e[a]))}return g}};if(d.string(a))var f=b.filter(a)[0].id();else var f=a.id();if(d.string(c))var g=b.filter(c)[0].id();else var g=c.id();var h=e(i[f],i[g],n,u,o);return b.collection(h)}};return v}};b.exports=e},{"../../is":77}],9:[function(a,b,c){"use strict";var d=a("../../util"),e={};[a("./bfs-dfs"),a("./a-star"),a("./floyd-warshall"),a("./bellman-ford"),a("./kerger-stein"),a("./page-rank"),a("./degree-centrality"),a("./closeness-centrality"),a("./betweenness-centrality")].forEach(function(a){d.extend(e,a)}),b.exports=e},{"../../util":94,"./a-star":2,"./bellman-ford":3,"./betweenness-centrality":4,"./bfs-dfs":5,"./closeness-centrality":6,"./degree-centrality":7,"./floyd-warshall":8,"./kerger-stein":10,"./page-rank":11}],10:[function(a,b,c){"use strict";var d=a("../../util"),e={kargerStein:function(a){var b=this;a=a||{};var c=function(a,b,c){for(var d=c[a],e=d[1],f=d[2],g=b[e],h=b[f],i=c.filter(function(a){return(b[a[1]]!==g||b[a[2]]!==h)&&(b[a[1]]!==h||b[a[2]]!==g)}),j=0;j<i.length;j++){var k=i[j];k[1]===h?(i[j]=k.slice(0),i[j][1]=g):k[2]===h&&(i[j]=k.slice(0),i[j][2]=g)}for(var j=0;j<b.length;j++)b[j]===h&&(b[j]=g);return i},e=function(a,b,d,f){if(f>=d)return b;var g=Math.floor(Math.random()*b.length),h=c(g,a,b);return e(a,h,d-1,f)},f=this._private.cy,g=this.edges().stdFilter(function(a){return!a.isLoop()}),h=this.nodes(),i=h.length,j=g.length,k=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),l=Math.floor(i/Math.sqrt(2));if(2>i)return void d.error("At least 2 nodes are required for Karger-Stein algorithm");for(var m={},n=0;i>n;n++)m[h[n].id()]=n;for(var o=[],n=0;j>n;n++){var p=g[n];o.push([n,m[p.source().id()],m[p.target().id()]])}for(var q,r=1/0,s=[],n=0;i>n;n++)s.push(n);for(var t=0;k>=t;t++){var u=s.slice(0),v=e(u,o,i,l),w=u.slice(0),x=e(u,v,l,2),y=e(w,v,l,2);x.length<=y.length&&x.length<r?(r=x.length,q=[x,u]):y.length<=x.length&&y.length<r&&(r=y.length,q=[y,w])}for(var z=q[0].map(function(a){return g[a[0]]}),A=[],B=[],C=q[1][0],n=0;n<q[1].length;n++){var D=q[1][n];D===C?A.push(h[n]):B.push(h[n])}var E={cut:b.spawn(f,z),partition1:b.spawn(A),partition2:b.spawn(B)};return E}};b.exports=e},{"../../util":94}],11:[function(a,b,c){"use strict";var d=a("../../is"),e={pageRank:function(a){a=a||{};var b=function(a){for(var b=a.length,c=0,d=0;b>d;d++)c+=a[d];for(var d=0;b>d;d++)a[d]=a[d]/c};if(null!=a&&null!=a.dampingFactor)var c=a.dampingFactor;else var c=.8;if(null!=a&&null!=a.precision)var e=a.precision;else var e=1e-6;if(null!=a&&null!=a.iterations)var f=a.iterations;else var f=200;if(null!=a&&null!=a.weight&&d.fn(a.weight))var g=a.weight;else var g=function(a){return 1};for(var h=this._private.cy,i=this.edges().stdFilter(function(a){return!a.isLoop()}),j=this.nodes(),k=j.length,l=i.length,m={},n=0;k>n;n++)m[j[n].id()]=n;for(var o=[],p=[],q=(1-c)/k,n=0;k>n;n++){for(var r=[],s=0;k>s;s++)r.push(0);o.push(r),p.push(0)}for(var n=0;l>n;n++){var t=i[n],u=m[t.source().id()],v=m[t.target().id()],w=g.apply(t,[t]);o[v][u]+=w,p[u]+=w}for(var x=1/k+q,s=0;k>s;s++)if(0===p[s])for(var n=0;k>n;n++)o[n][s]=x;else for(var n=0;k>n;n++)o[n][s]=o[n][s]/p[s]+q;for(var y,z=[],A=[],n=0;k>n;n++)z.push(1),A.push(0);for(var B=0;f>B;B++){for(var C=A.slice(0),n=0;k>n;n++)for(var s=0;k>s;s++)C[n]+=o[n][s]*z[s];b(C),y=z,z=C;for(var D=0,n=0;k>n;n++)D+=Math.pow(y[n]-z[n],2);if(e>D)break}var E={rank:function(a){if(d.string(a))var b=h.filter(a)[0].id();else var b=a.id();return z[m[b]]}};return E}};b.exports=e},{"../../is":77}],12:[function(a,b,c){"use strict";var d=a("../define"),e={animate:d.animate(),animation:d.animation(),animated:d.animated(),clearQueue:d.clearQueue(),delay:d.delay(),delayAnimation:d.delayAnimation(),stop:d.stop()};b.exports=e},{"../define":41}],13:[function(a,b,c){"use strict";var d=a("../util"),e={classes:function(a){a=a.match(/\S+/g)||[];for(var b=this,c=[],e={},f=0;f<a.length;f++){var g=a[f];e[g]=!0}for(var h=0;h<b.length;h++){for(var i=b[h],j=i._private,k=j.classes,l=!1,f=0;f<a.length;f++){var g=a[f],m=k[g];if(!m){l=!0;break}}if(!l)for(var n in k){var m=k[n],o=e[n];if(m&&!o){l=!0;break}}l&&(j.classes=d.copy(e),c.push(i))}return c.length>0&&this.spawn(c).updateStyle().trigger("class"),b},addClass:function(a){return this.toggleClass(a,!0)},hasClass:function(a){var b=this[0];return!(null==b||!b._private.classes[a])},toggleClass:function(a,b){for(var c=a.match(/\S+/g)||[],d=this,e=[],f=0,g=d.length;g>f;f++)for(var h=d[f],i=!1,j=0;j<c.length;j++){var k=c[j],l=h._private.classes,m=l[k],n=b||void 0===b&&!m;n?(l[k]=!0,m||i||(e.push(h),i=!0)):(l[k]=!1,m&&!i&&(e.push(h),i=!0))}return e.length>0&&this.spawn(e).updateStyle().trigger("class"),d},removeClass:function(a){return this.toggleClass(a,!1)},flashClass:function(a,b){var c=this;if(null==b)b=250;else if(0===b)return c;return c.addClass(a),setTimeout(function(){c.removeClass(a)},b),c}};b.exports=e},{"../util":94}],14:[function(a,b,c){"use strict";var d={allAre:function(a){return this.filter(a).length===this.length},is:function(a){return this.filter(a).length>0},some:function(a,b){for(var c=0;c<this.length;c++){var d=b?a.apply(b,[this[c],c,this]):a(this[c],c,this);if(d)return!0}return!1},every:function(a,b){for(var c=0;c<this.length;c++){var d=b?a.apply(b,[this[c],c,this]):a(this[c],c,this);if(!d)return!1}return!0},same:function(a){return a=this.cy().collection(a),this.length===a.length&&this.intersect(a).length===this.length},anySame:function(a){return a=this.cy().collection(a),this.intersect(a).length>0},allAreNeighbors:function(a){return a=this.cy().collection(a),this.neighborhood().intersect(a).length===a.length}};d.allAreNeighbours=d.allAreNeighbors,b.exports=d},{}],15:[function(a,b,c){"use strict";var d={parent:function(a){for(var b=[],c=this._private.cy,d=0;d<this.length;d++){var e=this[d],f=c.getElementById(e._private.data.parent);f.size()>0&&b.push(f)}return this.spawn(b,{unique:!0}).filter(a)},parents:function(a){for(var b=[],c=this.parent();c.nonempty();){for(var d=0;d<c.length;d++){var e=c[d];b.push(e)}c=c.parent()}return this.spawn(b,{unique:!0}).filter(a)},commonAncestors:function(a){for(var b,c=0;c<this.length;c++){var d=this[c],e=d.parents();b=b||e,b=b.intersect(e)}return b.filter(a)},orphans:function(a){return this.stdFilter(function(a){return a.isNode()&&a.parent().empty()}).filter(a)},nonorphans:function(a){return this.stdFilter(function(a){return a.isNode()&&a.parent().nonempty()}).filter(a)},children:function(a){for(var b=[],c=0;c<this.length;c++){var d=this[c];b=b.concat(d._private.children)}return this.spawn(b,{unique:!0}).filter(a)},siblings:function(a){return this.parent().children().not(this).filter(a)},isParent:function(){var a=this[0];return a?0!==a._private.children.length:void 0},isChild:function(){var a=this[0];return a?void 0!==a._private.data.parent&&0!==a.parent().length:void 0},descendants:function(a){function b(a){for(var d=0;d<a.length;d++){var e=a[d];c.push(e),e.children().nonempty()&&b(e.children())}}var c=[];return b(this.children()),this.spawn(c,{unique:!0}).filter(a)}};d.ancestors=d.parents,b.exports=d},{}],16:[function(a,b,c){"use strict";var d,e,f=a("../define");d=e={data:f.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:f.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:f.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:f.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:f.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:f.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var a=this[0];return a?a._private.data.id:void 0}},d.attr=d.data,d.removeAttr=d.removeData,b.exports=e},{"../define":41}],17:[function(a,b,c){"use strict";function d(a){return function(b){var c=this;if(void 0===b&&(b=!0),0!==c.length&&c.isNode()&&!c.removed()){for(var d=0,e=c[0],f=e._private.edges,g=0;g<f.length;g++){var h=f[g];!b&&h.isLoop()||(d+=a(e,h))}return d}}}function e(a,b){return function(c){for(var d,e=this.nodes(),f=0;f<e.length;f++){var g=e[f],h=g[a](c);void 0===h||void 0!==d&&!b(h,d)||(d=h)}return d}}var f=a("../util"),g={};f.extend(g,{degree:d(function(a,b){return b.source().same(b.target())?2:1}),indegree:d(function(a,b){return b.target().same(a)?1:0}),outdegree:d(function(a,b){return b.source().same(a)?1:0})}),f.extend(g,{minDegree:e("degree",function(a,b){return b>a}),maxDegree:e("degree",function(a,b){return a>b}),minIndegree:e("indegree",function(a,b){return b>a}),maxIndegree:e("indegree",function(a,b){return a>b}),minOutdegree:e("outdegree",function(a,b){return b>a}),maxOutdegree:e("outdegree",function(a,b){return a>b})}),f.extend(g,{totalDegree:function(a){for(var b=0,c=this.nodes(),d=0;d<c.length;d++)b+=c[d].degree(a);return b}}),b.exports=g},{"../util":94}],18:[function(a,b,c){"use strict";var d,e,f=a("../define"),g=a("../is"),h=a("../util");d=e={position:f.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"],onSet:function(a){var b=a.updateCompoundBounds();b.rtrigger("position")},canSet:function(a){return!a.locked()&&!a.isParent()}}),silentPosition:f.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!0,validKeys:["x","y"],onSet:function(a){a.updateCompoundBounds()},canSet:function(a){return!a.locked()&&!a.isParent()}}),positions:function(a,b){if(g.plainObject(a))this.position(a);else if(g.fn(a)){for(var c=a,d=0;d<this.length;d++){var e=this[d],a=c.apply(e,[d,e]);if(a&&!e.locked()&&!e.isParent()){var f=e._private.position;f.x=a.x,f.y=a.y}}var h=this.updateCompoundBounds(),i=h.length>0?this.add(h):this;b?i.trigger("position"):i.rtrigger("position")}return this},silentPositions:function(a){return this.positions(a,!0)},renderedPosition:function(a,b){var c=this[0],d=this.cy(),e=d.zoom(),f=d.pan(),h=g.plainObject(a)?a:void 0,i=void 0!==h||void 0!==b&&g.string(a);if(c&&c.isNode()){if(!i){var j=c._private.position;return h={x:j.x*e+f.x,y:j.y*e+f.y},void 0===a?h:h[a]}for(var k=0;k<this.length;k++){var c=this[k];void 0!==b?c._private.position[a]=(b-f[a])/e:void 0!==h&&(c._private.position={x:(h.x-f.x)/e,y:(h.y-f.y)/e})}this.rtrigger("position")}else if(!i)return;return this},relativePosition:function(a,b){var c=this[0],d=this.cy(),e=g.plainObject(a)?a:void 0,f=void 0!==e||void 0!==b&&g.string(a),h=d.hasCompoundNodes();if(c&&c.isNode()){if(!f){var i=c._private.position,j=h?c.parent():null,k=j&&j.length>0,l=k;k&&(j=j[0]);var m=l?j._private.position:{x:0,y:0};return e={x:i.x-m.x,y:i.y-m.y},void 0===a?e:e[a]}for(var n=0;n<this.length;n++){var c=this[n],j=h?c.parent():null,k=j&&j.length>0,l=k;k&&(j=j[0]);var m=l?j._private.position:{x:0,y:0};void 0!==b?c._private.position[a]=b+m[a]:void 0!==e&&(c._private.position={x:e.x+m.x,y:e.y+m.y})}this.rtrigger("position")}else if(!f)return;return this},renderedBoundingBox:function(a){var b=this.boundingBox(a),c=this.cy(),d=c.zoom(),e=c.pan(),f=b.x1*d+e.x,g=b.x2*d+e.x,h=b.y1*d+e.y,i=b.y2*d+e.y;return{x1:f,x2:g,y1:h,y2:i,w:g-f,h:i-h}},updateCompoundBounds:function(){function a(a){var b=a.children(),d=a._private.style,e="include"===d["compound-sizing-wrt-labels"].value,f=b.boundingBox({includeLabels:e,includeEdges:!0}),g={top:d["padding-top"].pfValue,bottom:d["padding-bottom"].pfValue,left:d["padding-left"].pfValue,right:d["padding-right"].pfValue},h=a._private.position,i=!1;"auto"===d.width.value&&(a._private.autoWidth=f.w,h.x=(f.x1+f.x2-g.left+g.right)/2,i=!0),"auto"===d.height.value&&(a._private.autoHeight=f.h,h.y=(f.y1+f.y2-g.top+g.bottom)/2,i=!0),i&&c.push(a)}var b=this.cy();if(!b.styleEnabled()||!b.hasCompoundNodes())return b.collection();for(var c=[],d=this.parent();d.nonempty();){for(var e=0;e<d.length;e++){var f=d[e];a(f)}d=d.parent()}return this.spawn(c)},boundingBox:function(a){var b=this,c=b._private.cy,d=c._private,e=d.styleEnabled;a=a||h.staticEmptyObject();var f=void 0===a.includeNodes||a.includeNodes,g=void 0===a.includeEdges||a.includeEdges,i=void 0===a.includeLabels||a.includeLabels;e&&d.renderer.recalculateRenderedStyle(this);for(var j=1/0,k=-(1/0),l=1/0,m=-(1/0),n=0;n<b.length;n++){var o,p,q,r,s,t,u=b[n],v=u._private,w=v.style,x=e?v.style.display.value:"element",y="nodes"===v.group,z=!1;if("none"!==x){if(y&&f){z=!0;var A=v.position;s=A.x,t=A.y;var B=u.outerWidth(),C=B/2,D=u.outerHeight(),E=D/2;o=s-C,p=s+C,q=t-E,r=t+E,j=j>o?o:j,k=p>k?p:k,l=l>q?q:l,m=r>m?r:m}else if(u.isEdge()&&g){z=!0;var F=v.source,G=F._private,H=G.position,I=v.target,J=I._private,K=J.position,L=v.rstyle||{},B=0,M=0;if(e&&(B=w.width.pfValue,M=B/2),o=H.x,p=K.x,q=H.y,r=K.y,o>p){var N=o;o=p,p=N}if(q>r){var N=q;q=r,r=N}if(o-=M,p+=M,q-=M,r+=M,j=j>o?o:j,k=p>k?p:k,l=l>q?q:l,m=r>m?r:m,e)for(var O=L.bezierPts||L.linePts||[],P=0;P<O.length;P++){var Q=O[P];o=Q.x-M,p=Q.x+M,q=Q.y-M,r=Q.y+M,j=j>o?o:j,k=p>k?p:k,l=l>q?q:l,m=r>m?r:m}if(e&&"haystack"===w["curve-style"].strValue){var R=L.haystackPts;if(o=R[0].x,q=R[0].y,p=R[1].x,r=R[1].y,o>p){var N=o;o=p,p=N}if(q>r){var N=q;q=r,r=N}j=j>o?o:j,k=p>k?p:k,l=l>q?q:l,m=r>m?r:m}}if(e){var v=u._private,w=v.style,L=v.rstyle,S=w.label.strValue,T=w["font-size"],U=w["text-halign"],V=w["text-valign"],W=L.labelWidth,X=L.labelHeight,Y=L.labelX,Z=L.labelY,$=u.isEdge(),_="autorotate"===w["edge-text-rotation"].strValue;if(i&&S&&T&&null!=X&&null!=W&&null!=Y&&null!=Z&&U&&V){var aa,ba,ca,da,ea=X,fa=W;if($){if(aa=Y-fa/2,ba=Y+fa/2,ca=Z-ea/2,da=Z+ea/2,_){var ga=v.rscratch.labelAngle,ha=Math.cos(ga),ia=Math.sin(ga),ja=function(a,b){return a-=Y,b-=Z,{x:a*ha-b*ia+Y,y:a*ia+b*ha+Z}},ka=ja(aa,ca),la=ja(aa,da),ma=ja(ba,ca),na=ja(ba,da);aa=Math.min(ka.x,la.x,ma.x,na.x),ba=Math.max(ka.x,la.x,ma.x,na.x),ca=Math.min(ka.y,la.y,ma.y,na.y),da=Math.max(ka.y,la.y,ma.y,na.y)}}else{switch(U.value){case"left":aa=Y-fa,ba=Y;break;case"center":aa=Y-fa/2,ba=Y+fa/2;break;case"right":aa=Y,ba=Y+fa}switch(V.value){case"top":ca=Z-ea,da=Z;break;case"center":ca=Z-ea/2,da=Z+ea/2;break;case"bottom":ca=Z,da=Z+ea}}j=j>aa?aa:j,k=ba>k?ba:k,l=l>ca?ca:l,m=da>m?da:m}}}}var oa=function(a){return a===1/0||a===-(1/0)?0:a};return j=oa(j),k=oa(k),l=oa(l),m=oa(m),{x1:j,x2:k,y1:l,y2:m,w:k-j,h:m-l}}};var i=function(a){a.uppercaseName=h.capitalize(a.name),a.autoName="auto"+a.uppercaseName,a.labelName="label"+a.uppercaseName,a.outerName="outer"+a.uppercaseName,a.uppercaseOuterName=h.capitalize(a.outerName),d[a.name]=function(){var b=this[0],c=b._private,d=c.cy,e=d._private.styleEnabled;if(b){if(!e)return 1;var f=c.style[a.name];switch(f.strValue){case"auto":return c[a.autoName]||0;case"label":return c.rstyle[a.labelName]||0;default:return f.pfValue}}},d["outer"+a.uppercaseName]=function(){var b=this[0],c=b._private,d=c.cy,e=d._private.styleEnabled;if(b){if(e){var f=c.style,g=b[a.name](),h=f["border-width"].pfValue,i=f[a.paddings[0]].pfValue+f[a.paddings[1]].pfValue;return g+h+i}return 1}},d["rendered"+a.uppercaseName]=function(){var b=this[0];if(b){var c=b[a.name]();return c*this.cy().zoom()}},d["rendered"+a.uppercaseOuterName]=function(){var b=this[0];if(b){var c=b[a.outerName]();return c*this.cy().zoom()}}};i({name:"width",paddings:["padding-left","padding-right"]}),i({name:"height",paddings:["padding-top","padding-bottom"]}),d.modelPosition=d.point=d.position,d.modelPositions=d.points=d.positions,d.renderedPoint=d.renderedPosition,d.relativePoint=d.relativePosition,d.boundingbox=d.boundingBox,d.renderedBoundingbox=d.renderedBoundingBox,b.exports=e},{"../define":41,"../is":77,"../util":94}],19:[function(a,b,c){"use strict";var d=a("../util"),e=a("../is"),f=function(a,b,c){if(!(this instanceof f))return new f(a,b,c);var g=this;if(c=!(void 0!==c&&!c),void 0===a||void 0===b||!e.core(a))return void d.error("An element must have a core reference and parameters set");var h=b.group;if(null==h&&(h=null!=b.data.source&&null!=b.data.target?"edges":"nodes"),"nodes"!==h&&"edges"!==h)return void d.error("An element must be of type `nodes` or `edges`; you specified `"+h+"`");
if(this.length=1,this[0]=this,this._private={cy:a,single:!0,data:b.data||{},position:b.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:h,style:{},rstyle:{},styleCxts:[],removed:!0,selected:!!b.selected,selectable:void 0===b.selectable||!!b.selectable,locked:!!b.locked,grabbed:!1,grabbable:void 0===b.grabbable||!!b.grabbable,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:b.scratch||{},edges:[],children:[]},b.renderedPosition){var i=b.renderedPosition,j=a.pan(),k=a.zoom();this._private.position={x:(i.x-j.x)/k,y:(i.y-j.y)/k}}if(e.string(b.classes))for(var l=b.classes.split(/\s+/),m=0,n=l.length;n>m;m++){var o=l[m];o&&""!==o&&(g._private.classes[o]=!0)}(b.style||b.css)&&a.style().applyBypass(this,b.style||b.css),(void 0===c||c)&&this.restore()};b.exports=f},{"../is":77,"../util":94}],20:[function(a,b,c){"use strict";var d=a("../define"),e={on:d.on(),one:d.on({unbindSelfOnTrigger:!0}),once:d.on({unbindAllBindersOnTrigger:!0}),off:d.off(),trigger:d.trigger(),rtrigger:function(a,b){return 0!==this.length?(this.cy().notify({type:a,collection:this}),this.trigger(a,b),this):void 0}};d.eventAliasesOn(e),b.exports=e},{"../define":41}],21:[function(a,b,c){"use strict";var d=a("../is"),e=a("../selector"),f={nodes:function(a){return this.filter(function(a,b){return b.isNode()}).filter(a)},edges:function(a){return this.filter(function(a,b){return b.isEdge()}).filter(a)},filter:function(a){if(d.fn(a)){for(var b=[],c=0;c<this.length;c++){var f=this[c];a.apply(f,[c,f])&&b.push(f)}return this.spawn(b)}return d.string(a)||d.elementOrCollection(a)?e(a).filter(this):void 0===a?this:this.spawn()},not:function(a){if(a){d.string(a)&&(a=this.filter(a));for(var b=[],c=0;c<this.length;c++){var e=this[c],f=a._private.ids[e.id()];f||b.push(e)}return this.spawn(b)}return this},absoluteComplement:function(){var a=this._private.cy;return a.elements().not(this)},intersect:function(a){if(d.string(a)){var b=a;return this.filter(b)}for(var c=[],e=this,f=a,g=this.length<a.length,h=g?f._private.ids:e._private.ids,i=g?e:f,j=0;j<i.length;j++){var k=i[j]._private.data.id,l=h[k];l&&c.push(l)}return this.spawn(c)},xor:function(a){var b=this._private.cy;d.string(a)&&(a=b.$(a));var c=[],e=this,f=a,g=function(a,b){for(var d=0;d<a.length;d++){var e=a[d],f=e._private.data.id,g=b._private.ids[f];g||c.push(e)}};return g(e,f),g(f,e),this.spawn(c)},diff:function(a){var b=this._private.cy;d.string(a)&&(a=b.$(a));var c=[],e=[],f=[],g=this,h=a,i=function(a,b,c){for(var d=0;d<a.length;d++){var e=a[d],g=e._private.data.id,h=b._private.ids[g];h?f.push(e):c.push(e)}};return i(g,h,c),i(h,g,e),{left:this.spawn(c,{unique:!0}),right:this.spawn(e,{unique:!0}),both:this.spawn(f,{unique:!0})}},add:function(a){var b=this._private.cy;if(!a)return this;if(d.string(a)){var c=a;a=b.elements(c)}for(var e=[],f=0;f<this.length;f++)e.push(this[f]);for(var f=0;f<a.length;f++){var g=!this._private.ids[a[f].id()];g&&e.push(a[f])}return this.spawn(e)},merge:function(a){var b=this._private,c=b.cy;if(!a)return this;if(d.string(a)){var e=a;a=c.elements(e)}for(var f=0;f<a.length;f++){var g=a[f],h=g.id(),i=!b.ids[h];if(i){var j=this.length++;this[j]=g,b.ids[h]=g,b.indexes[h]=j}}return this},unmergeOne:function(a){a=a[0];var b=this._private,c=a.id(),d=b.indexes[c];if(null==d)return this;this[d]=void 0,b.ids[c]=void 0,b.indexes[c]=void 0;var e=d===this.length-1;if(this.length>1&&!e){var f=this.length-1,g=this[f];this[f]=void 0,this[d]=g,b.indexes[g.id()]=d}return this.length--,this},unmerge:function(a){var b=this._private.cy;if(!a)return this;if(d.string(a)){var c=a;a=b.elements(c)}for(var e=0;e<a.length;e++)this.unmergeOne(a[e]);return this},map:function(a,b){for(var c=[],d=this,e=0;e<d.length;e++){var f=d[e],g=b?a.apply(b,[f,e,d]):a(f,e,d);c.push(g)}return c},stdFilter:function(a,b){for(var c=[],d=this,e=0;e<d.length;e++){var f=d[e],g=b?a.apply(b,[f,e,d]):a(f,e,d);g&&c.push(f)}return this.spawn(c)},max:function(a,b){for(var c,d=-(1/0),e=this,f=0;f<e.length;f++){var g=e[f],h=b?a.apply(b,[g,f,e]):a(g,f,e);h>d&&(d=h,c=g)}return{value:d,ele:c}},min:function(a,b){for(var c,d=1/0,e=this,f=0;f<e.length;f++){var g=e[f],h=b?a.apply(b,[g,f,e]):a(g,f,e);d>h&&(d=h,c=g)}return{value:d,ele:c}}},g=f;g.u=g["|"]=g["+"]=g.union=g.or=g.add,g["\\"]=g["!"]=g["-"]=g.difference=g.relativeComplement=g.subtract=g.not,g.n=g["&"]=g["."]=g.and=g.intersection=g.intersect,g["^"]=g["(+)"]=g["(-)"]=g.symmetricDifference=g.symdiff=g.xor,g.fnFilter=g.filterFn=g.stdFilter,g.complement=g.abscomp=g.absoluteComplement,b.exports=f},{"../is":77,"../selector":81}],22:[function(a,b,c){"use strict";var d={isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},isSimple:function(){return this.isEdge()&&this.source().id()!==this.target().id()},group:function(){var a=this[0];return a?a._private.group:void 0}};b.exports=d},{}],23:[function(a,b,c){"use strict";var d=a("../util"),e=a("../is"),f=a("./element"),g={prefix:"ele",id:0,generate:function(a,b,c){var d=(e.element(b)?b._private:b,null!=c?c:this.prefix+this.id);if(a.getElementById(d).empty())this.id++;else for(;!a.getElementById(d).empty();)d=this.prefix+ ++this.id;return d}},h=function(a,b,c){if(!(this instanceof h))return new h(a,b,c);if(void 0===a||!e.core(a))return void d.error("A collection must have a reference to the core");var i={},j={},k=!1;if(b){if(b.length>0&&e.plainObject(b[0])&&!e.element(b[0])){k=!0;for(var l=[],m={},n=0,o=b.length;o>n;n++){var p=b[n];null==p.data&&(p.data={});var q=p.data;if(null==q.id)q.id=g.generate(a,p);else if(0!==a.getElementById(q.id).length||m[q.id])continue;var r=new f(a,p,!1);l.push(r),m[q.id]=!0}b=l}}else b=[];this.length=0;for(var n=0,o=b.length;o>n;n++){var s=b[n];if(s){var t=s._private.data.id;(!c||c.unique&&!i[t])&&(i[t]=s,j[t]=this.length,this[this.length]=s,this.length++)}}this._private={cy:a,ids:i,indexes:j},k&&this.restore()},i=f.prototype=h.prototype;i.instanceString=function(){return"collection"},i.spawn=function(a,b,c){return e.core(a)||(c=b,b=a,a=this.cy()),new h(a,b,c)},i.cy=function(){return this._private.cy},i.element=function(){return this[0]},i.collection=function(){return e.collection(this)?this:new h(this._private.cy,[this])},i.unique=function(){return new h(this._private.cy,this,{unique:!0})},i.getElementById=function(a){var b=this._private.cy,c=this._private.ids[a];return c?c:new h(b)},i.json=function(a){var b=this.element(),c=this.cy();if(null==b&&a)return this;if(null!=b){var f=b._private;if(e.plainObject(a)){c.startBatch(),a.data&&b.data(a.data),a.position&&b.position(a.position);var g=function(c,d,e){var g=a[c];null!=g&&g!==f[c]&&(g?b[d]():b[e]())};return g("removed","remove","restore"),g("selected","select","unselect"),g("selectable","selectify","unselectify"),g("locked","lock","unlock"),g("grabbable","grabify","ungrabify"),null!=a.classes&&b.classes(a.classes),c.endBatch(),this}if(void 0===a){var h={data:d.copy(f.data),position:d.copy(f.position),group:f.group,removed:f.removed,selected:f.selected,selectable:f.selectable,locked:f.locked,grabbable:f.grabbable,classes:null},i=[];for(var j in f.classes)f.classes[j]&&i.push(j);return h.classes=i.join(" "),h}}},i.jsons=function(){for(var a=[],b=0;b<this.length;b++){var c=this[b],d=c.json();a.push(d)}return a},i.clone=function(){for(var a=this.cy(),b=[],c=0;c<this.length;c++){var d=this[c],e=d.json(),g=new f(a,e,!1);b.push(g)}return new h(a,b)},i.copy=i.clone,i.restore=function(a){var b=this,c=[],f=b.cy();void 0===a&&(a=!0);for(var i=[],j=[],k=[],l=0,m=0,n=0,o=b.length;o>n;n++){var p=b[n];p.isNode()?(j.push(p),l++):(k.push(p),m++)}i=j.concat(k);for(var n=0,o=i.length;o>n;n++){var p=i[n];if(p.removed()){var q=p._private,r=q.data;if(void 0===r.id)r.id=g.generate(f,p);else if(e.number(r.id))r.id=""+r.id;else{if(e.emptyString(r.id)||!e.string(r.id)){d.error("Can not create element with invalid string ID `"+r.id+"`");continue}if(0!==f.getElementById(r.id).length){d.error("Can not create second element with ID `"+r.id+"`");continue}}var s=r.id;if(p.isNode()){var t=p,u=q.position;null==u.x&&(u.x=0),null==u.y&&(u.y=0)}if(p.isEdge()){for(var v=p,w=["source","target"],x=w.length,y=!1,z=0;x>z;z++){var A=w[z],B=r[A];e.number(B)&&(B=r[A]=""+r[A]),null==B||""===B?(d.error("Can not create edge `"+s+"` with unspecified "+A),y=!0):f.getElementById(B).empty()&&(d.error("Can not create edge `"+s+"` with nonexistant "+A+" `"+B+"`"),y=!0)}if(y)continue;var C=f.getElementById(r.source),D=f.getElementById(r.target);C._private.edges.push(v),D._private.edges.push(v),v._private.source=C,v._private.target=D}q.ids={},q.ids[s]=p,q.removed=!1,f.addToPool(p),c.push(p)}}for(var n=0;l>n;n++){var t=i[n],r=t._private.data;e.number(r.parent)&&(r.parent=""+r.parent);var E=r.parent,F=null!=E;if(F){var G=f.getElementById(E);if(G.empty())r.parent=void 0;else{for(var H=!1,I=G;!I.empty();){if(t.same(I)){H=!0,r.parent=void 0;break}I=I.parent()}H||(G[0]._private.children.push(t),t._private.parent=G[0],f._private.hasCompoundNodes=!0)}}}if(c=new h(f,c),c.length>0){var J=c.add(c.connectedNodes()).add(c.parent());J.updateStyle(a),a?c.rtrigger("add"):c.trigger("add")}return b},i.removed=function(){var a=this[0];return a&&a._private.removed},i.inside=function(){var a=this[0];return a&&!a._private.removed},i.remove=function(a){function b(a){for(var b=a._private.edges,c=0;c<b.length;c++)d(b[c])}function c(a){for(var b=a._private.children,c=0;c<b.length;c++)d(b[c])}function d(a){var d=k[a.id()];d||(k[a.id()]=!0,a.isNode()?(j.push(a),b(a),c(a)):j.unshift(a))}function e(a,b){for(var c=a._private.edges,d=0;d<c.length;d++){var e=c[d];if(b===e){c.splice(d,1);break}}}function f(a,b){b=b[0],a=a[0];for(var c=a._private.children,d=0;d<c.length;d++)if(c[d][0]===b[0]){c.splice(d,1);break}}var g=this,i=[],j=[],k={},l=g._private.cy;void 0===a&&(a=!0);for(var m=0,n=g.length;n>m;m++){var o=g[m];d(o)}for(var m=0;m<j.length;m++){var o=j[m];if(o._private.removed=!0,l.removeFromPool(o),i.push(o),o.isEdge()){var p=o.source()[0],q=o.target()[0];e(p,o),e(q,o)}else{var r=o.parent();0!==r.length&&f(r,o)}}var s=l._private.elements;l._private.hasCompoundNodes=!1;for(var m=0;m<s.length;m++){var o=s[m];if(o.isParent()){l._private.hasCompoundNodes=!0;break}}var t=new h(this.cy(),i);t.size()>0&&(a&&this.cy().notify({type:"remove",collection:t}),t.trigger("remove"));for(var u={},m=0;m<j.length;m++){var o=j[m],v="nodes"===o._private.group,w=o._private.data.parent;if(v&&void 0!==w&&!u[w]){u[w]=!0;var r=l.getElementById(w);r&&0!==r.length&&!r._private.removed&&0===r.children().length&&r.updateStyle()}}return new h(l,i)},i.move=function(a){var b=this._private.cy;if(void 0!==a.source||void 0!==a.target){var c=a.source,d=a.target,e=b.getElementById(c).length>0,f=b.getElementById(d).length>0;if(e||f){var g=this.jsons();this.remove();for(var h=0;h<g.length;h++){var i=g[h];"edges"===i.group&&(e&&(i.data.source=c),f&&(i.data.target=d))}return b.add(g)}}else if(void 0!==a.parent){var j=a.parent,k=null===j||b.getElementById(j).length>0;if(k){var g=this.jsons(),l=this.descendants(),m=l.merge(l.add(this).connectedEdges());this.remove();for(var h=0;h<this.length;h++){var i=g[h];"nodes"===i.group&&(i.data.parent=null===j?void 0:j)}}return b.add(g).merge(m.restore())}return this},[a("./algorithms"),a("./animation"),a("./class"),a("./comparators"),a("./compounds"),a("./data"),a("./degree"),a("./dimensions"),a("./events"),a("./filter"),a("./group"),a("./index"),a("./iteration"),a("./layout"),a("./style"),a("./switch-functions"),a("./traversing")].forEach(function(a){d.extend(i,a)}),b.exports=h},{"../is":77,"../util":94,"./algorithms":9,"./animation":12,"./class":13,"./comparators":14,"./compounds":15,"./data":16,"./degree":17,"./dimensions":18,"./element":19,"./events":20,"./filter":21,"./group":22,"./index":23,"./iteration":24,"./layout":25,"./style":26,"./switch-functions":27,"./traversing":28}],24:[function(a,b,c){"use strict";var d=a("../is"),e=a("./zsort"),f={each:function(a){if(d.fn(a))for(var b=0;b<this.length;b++){var c=this[b],e=a.apply(c,[b,c]);if(e===!1)break}return this},forEach:function(a,b){if(d.fn(a))for(var c=0;c<this.length;c++){var e=this[c],f=b?a.apply(b,[e,c,this]):a(e,c,this);if(f===!1)break}return this},toArray:function(){for(var a=[],b=0;b<this.length;b++)a.push(this[b]);return a},slice:function(a,b){var c=[],d=this.length;null==b&&(b=d),null==a&&(a=0),0>a&&(a=d+a),0>b&&(b=d+b);for(var e=a;e>=0&&b>e&&d>e;e++)c.push(this[e]);return this.spawn(c)},size:function(){return this.length},eq:function(a){return this[a]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(a){if(!d.fn(a))return this;var b=this.toArray().sort(a);return this.spawn(b)},sortByZIndex:function(){return this.sort(e)},zDepth:function(){var a=this[0];if(a){var b=a._private,c=b.group;if("nodes"===c){var d=b.data.parent?a.parents().size():0;return a.isParent()?d:Number.MAX_VALUE}var e=b.source,f=b.target,g=e.zDepth(),h=f.zDepth();return Math.max(g,h,0)}}};b.exports=f},{"../is":77,"./zsort":29}],25:[function(a,b,c){"use strict";var d=a("../is"),e=a("../util"),f={layoutPositions:function(a,b,c){var e=this.nodes(),f=this.cy();if(a.trigger({type:"layoutstart",layout:a}),a.animations=[],b.animate){for(var g=0;g<e.length;g++){var h=e[g],i=g===e.length-1,j=c.call(h,g,h),k=h.position();d.number(k.x)&&d.number(k.y)||h.silentPosition({x:0,y:0});var l=h.animation({position:j,duration:b.animationDuration,easing:b.animationEasing,step:i?function(){b.fit&&f.fit(b.eles,b.padding)}:void 0,complete:i?function(){null!=b.zoom&&f.zoom(b.zoom),b.pan&&f.pan(b.pan),b.fit&&f.fit(b.eles,b.padding),a.one("layoutstop",b.stop),a.trigger({type:"layoutstop",layout:a})}:void 0});a.animations.push(l),l.play()}a.one("layoutready",b.ready),a.trigger({type:"layoutready",layout:a})}else e.positions(c),b.fit&&f.fit(b.eles,b.padding),null!=b.zoom&&f.zoom(b.zoom),b.pan&&f.pan(b.pan),a.one("layoutready",b.ready),a.trigger({type:"layoutready",layout:a}),a.one("layoutstop",b.stop),a.trigger({type:"layoutstop",layout:a});return this},layout:function(a){var b=this.cy();return b.layout(e.extend({},a,{eles:this})),this},makeLayout:function(a){var b=this.cy();return b.makeLayout(e.extend({},a,{eles:this}))}};f.createLayout=f.makeLayout,b.exports=f},{"../is":77,"../util":94}],26:[function(a,b,c){"use strict";var d=a("../is"),e={updateStyle:function(a){var b=this._private.cy;if(!b.styleEnabled())return this;if(b._private.batchingStyle){var c=b._private.batchStyleEles;return c.merge(this),this}var d=b.style();a=!(!a&&void 0!==a),d.apply(this);var e=this.updateCompoundBounds(),f=e.length>0?this.add(e):this;return a?f.rtrigger("style"):f.trigger("style"),this},updateMappers:function(a){var b=this._private.cy,c=b.style();if(a=!(!a&&void 0!==a),!b.styleEnabled())return this;c.updateMappers(this);var d=this.updateCompoundBounds(),e=d.length>0?this.add(d):this;return a?e.rtrigger("style"):e.trigger("style"),this},renderedCss:function(a){var b=this.cy();if(!b.styleEnabled())return this;var c=this[0];if(c){var d=c.cy().style().getRenderedStyle(c);return void 0===a?d:d[a]}},css:function(a,b){var c=this.cy();if(!c.styleEnabled())return this;var e=!1,f=c.style();if(d.plainObject(a)){var g=a;f.applyBypass(this,g,e);var h=this.updateCompoundBounds(),i=h.length>0?this.add(h):this;i.rtrigger("style")}else if(d.string(a)){if(void 0===b){var j=this[0];return j?f.getStylePropertyValue(j,a):void 0}f.applyBypass(this,a,b,e);var h=this.updateCompoundBounds(),i=h.length>0?this.add(h):this;i.rtrigger("style")}else if(void 0===a){var j=this[0];return j?f.getRawStyle(j):void 0}return this},removeCss:function(a){var b=this.cy();if(!b.styleEnabled())return this;var c=!1,d=b.style(),e=this;if(void 0===a)for(var f=0;f<e.length;f++){var g=e[f];d.removeAllBypasses(g,c)}else{a=a.split(/\s+/);for(var f=0;f<e.length;f++){var g=e[f];d.removeBypasses(g,a,c)}}var h=this.updateCompoundBounds(),i=h.length>0?this.add(h):this;return i.rtrigger("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},visible:function(){var a=this.cy();if(!a.styleEnabled())return!0;var b=this[0],c=a.hasCompoundNodes();if(b){var d=b._private.style;if("visible"!==d.visibility.value||"element"!==d.display.value)return!1;if("nodes"===b._private.group){if(!c)return!0;var e=b._private.data.parent?b.parents():null;if(e)for(var f=0;f<e.length;f++){var g=e[f],h=g._private.style,i=h.visibility.value,j=h.display.value;if("visible"!==i||"element"!==j)return!1}return!0}var k=b._private.source,l=b._private.target;return k.visible()&&l.visible()}},hidden:function(){var a=this[0];return a?!a.visible():void 0},effectiveOpacity:function(){var a=this.cy();if(!a.styleEnabled())return 1;var b=a.hasCompoundNodes(),c=this[0];if(c){var d=c._private,e=d.style.opacity.value;if(!b)return e;var f=d.data.parent?c.parents():null;if(f)for(var g=0;g<f.length;g++){var h=f[g],i=h._private.style.opacity.value;e=i*e}return e}},transparent:function(){var a=this.cy();if(!a.styleEnabled())return!1;var b=this[0],c=b.cy().hasCompoundNodes();return b?c?0===b.effectiveOpacity():0===b._private.style.opacity.value:void 0},isFullAutoParent:function(){var a=this.cy();if(!a.styleEnabled())return!1;var b=this[0];if(b){var c="auto"===b._private.style.width.value,d="auto"===b._private.style.height.value;return b.isParent()&&c&&d}},backgrounding:function(){var a=this.cy();if(!a.styleEnabled())return!1;var b=this[0];return!!b._private.backgrounding}};e.bypass=e.style=e.css,e.renderedStyle=e.renderedCss,e.removeBypass=e.removeStyle=e.removeCss,b.exports=e},{"../is":77}],27:[function(a,b,c){"use strict";function d(a){return function(){var b=arguments,c=[];if(2===b.length){var d=b[0],e=b[1];this.bind(a.event,d,e)}else if(1===b.length){var e=b[0];this.bind(a.event,e)}else if(0===b.length){for(var f=0;f<this.length;f++){var g=this[f],h=!a.ableField||g._private[a.ableField],i=g._private[a.field]!=a.value;if(a.overrideAble){var j=a.overrideAble(g);if(void 0!==j&&(h=j,!j))return this}h&&(g._private[a.field]=a.value,i&&c.push(g))}var k=this.spawn(c);k.updateStyle(),k.trigger(a.event)}return this}}function e(a){f[a.field]=function(){var b=this[0];if(b){if(a.overrideField){var c=a.overrideField(b);if(void 0!==c)return c}return b._private[a.field]}},f[a.on]=d({event:a.on,field:a.field,ableField:a.ableField,overrideAble:a.overrideAble,value:!0}),f[a.off]=d({event:a.off,field:a.field,ableField:a.ableField,overrideAble:a.overrideAble,value:!1})}var f={};e({field:"locked",overrideField:function(a){return!!a.cy().autolock()||void 0},on:"lock",off:"unlock"}),e({field:"grabbable",overrideField:function(a){return!a.cy().autoungrabify()&&void 0},on:"grabify",off:"ungrabify"}),e({field:"selected",ableField:"selectable",overrideAble:function(a){return!a.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),e({field:"selectable",overrideField:function(a){return!a.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),f.deselect=f.unselect,f.grabbed=function(){var a=this[0];return a?a._private.grabbed:void 0},e({field:"active",on:"activate",off:"unactivate"}),f.inactive=function(){var a=this[0];return a?!a._private.active:void 0},b.exports=f},{}],28:[function(a,b,c){"use strict";function d(a){return function(b){for(var c=[],d=0;d<this.length;d++){var e=this[d],f=e._private[a.attr];f&&c.push(f)}return this.spawn(c,{unique:!0}).filter(b)}}function e(a){return function(b){var c=[],d=this._private.cy,e=a||{};h.string(b)&&(b=d.$(b));for(var f=this._private.ids,g=b._private.ids,i=0;i<b.length;i++)for(var j=b[i]._private.edges,k=0;k<j.length;k++){var l=j[k],m=l._private.data,n=f[m.source]&&g[m.target],o=g[m.source]&&f[m.target],p=n||o;if(p){if(e.thisIs){if("source"===e.thisIs&&!n)continue;if("target"===e.thisIs&&!o)continue}c.push(l)}}return this.spawn(c,{unique:!0})}}function f(a){var b={codirected:!1};return a=g.extend({},b,a),function(b){for(var c=[],d=this.edges(),e=a,f=0;f<d.length;f++)for(var g=d[f],h=g.source()[0],i=h.id(),j=g.target()[0],k=j.id(),l=h._private.edges,m=0;m<l.length;m++){var n=l[m],o=n._private.data,p=o.target,q=o.source,r=p===k&&q===i,s=i===p&&k===q;(e.codirected&&r||!e.codirected&&(r||s))&&c.push(n)}return this.spawn(c,{unique:!0}).filter(b)}}var g=a("../util"),h=a("../is"),i={};g.extend(i,{roots:function(a){for(var b=this,c=[],d=0;d<b.length;d++){var e=b[d];if(e.isNode()){var f=e.connectedEdges(function(){return this.data("target")===e.id()&&this.data("source")!==e.id()}).length>0;f||c.push(e)}}return this.spawn(c,{unique:!0}).filter(a)},leaves:function(a){for(var b=this,c=[],d=0;d<b.length;d++){var e=b[d];if(e.isNode()){var f=e.connectedEdges(function(){return this.data("source")===e.id()&&this.data("target")!==e.id()}).length>0;f||c.push(e)}}return this.spawn(c,{unique:!0}).filter(a)},outgoers:function(a){for(var b=this,c=[],d=0;d<b.length;d++){var e=b[d],f=e.id();if(e.isNode())for(var g=e._private.edges,h=0;h<g.length;h++){var i=g[h],j=i._private.data.source;i._private.data.target,j===f&&(c.push(i),c.push(i.target()[0]))}}return this.spawn(c,{unique:!0}).filter(a)},successors:function(a){for(var b=this,c=[],d={};;){var e=b.outgoers();if(0===e.length)break;for(var f=!1,g=0;g<e.length;g++){var h=e[g],i=h.id();d[i]||(d[i]=!0,c.push(h),f=!0)}if(!f)break;b=e}return this.spawn(c,{unique:!0}).filter(a)},incomers:function(a){for(var b=this,c=[],d=0;d<b.length;d++){var e=b[d],f=e.id();if(e.isNode())for(var g=e._private.edges,h=0;h<g.length;h++){var i=g[h],j=(i._private.data.source,i._private.data.target);j===f&&(c.push(i),c.push(i.source()[0]))}}return this.spawn(c,{unique:!0}).filter(a)},predecessors:function(a){for(var b=this,c=[],d={};;){var e=b.incomers();if(0===e.length)break;for(var f=!1,g=0;g<e.length;g++){var h=e[g],i=h.id();d[i]||(d[i]=!0,c.push(h),f=!0)}if(!f)break;b=e}return this.spawn(c,{unique:!0}).filter(a)}}),g.extend(i,{neighborhood:function(a){for(var b=[],c=this.nodes(),d=0;d<c.length;d++)for(var e=c[d],f=e.connectedEdges(),g=0;g<f.length;g++){var h=f[g],i=h._private.source,j=h._private.target,k=e===i?j:i;k.length>0&&b.push(k[0]),b.push(h[0])}return this.spawn(b,{unique:!0}).filter(a)},closedNeighborhood:function(a){return this.neighborhood().add(this).filter(a)},openNeighborhood:function(a){return this.neighborhood(a)}}),i.neighbourhood=i.neighborhood,i.closedNeighbourhood=i.closedNeighborhood,i.openNeighbourhood=i.openNeighborhood,g.extend(i,{source:function(a){var b,c=this[0];return c&&(b=c._private.source),b&&a?b.filter(a):b},target:function(a){var b,c=this[0];return c&&(b=c._private.target),b&&a?b.filter(a):b},sources:d({attr:"source"}),targets:d({attr:"target"})}),g.extend(i,{edgesWith:e(),edgesTo:e({thisIs:"source"})}),g.extend(i,{connectedEdges:function(a){for(var b=[],c=this,d=0;d<c.length;d++){var e=c[d];if(e.isNode())for(var f=e._private.edges,g=0;g<f.length;g++){var h=f[g];b.push(h)}}return this.spawn(b,{unique:!0}).filter(a)},connectedNodes:function(a){for(var b=[],c=this,d=0;d<c.length;d++){var e=c[d];e.isEdge()&&(b.push(e.source()[0]),b.push(e.target()[0]))}return this.spawn(b,{unique:!0}).filter(a)},parallelEdges:f(),codirectedEdges:f({codirected:!0})}),g.extend(i,{components:function(){var a=this,b=a.cy(),c=a.spawn(),d=a.nodes(),e=[],f=function(a,b){c.merge(a),d.unmerge(a),b.merge(a)};if(d.empty())return a.spawn();do{var g=b.collection();e.push(g);var h=d[0];f(h,g),a.bfs({directed:!1,roots:h,visit:function(a,b,c,d,e){f(c,g)}})}while(d.length>0);return e.map(function(a){var b=a.connectedEdges().stdFilter(function(b){return a.anySame(b.source())&&a.anySame(b.target())});return a.union(b)})}}),b.exports=i},{"../is":77,"../util":94}],29:[function(a,b,c){"use strict";var d=function(a,b){var c=a.cy(),d=a._private,e=b._private,f=d.style["z-index"].value-e.style["z-index"].value,g=0,h=0,i=c.hasCompoundNodes(),j="nodes"===d.group,k="edges"===d.group,l="nodes"===e.group,m="edges"===e.group;i&&(g=a.zDepth(),h=b.zDepth());var n=g-h,o=0===n;return o?j&&m?1:k&&l?-1:0===f?d.index-e.index:f:n};b.exports=d},{}],30:[function(a,b,c){"use strict";var d=a("../is"),e=a("../util"),f=a("../collection"),g=a("../collection/element"),h=a("../window"),i=(h?h.document:null,a("../extensions/renderer/null"),{add:function(a){var b,c=this;if(d.elementOrCollection(a)){var h=a;if(h._private.cy===c)b=h.restore();else{for(var i=[],j=0;j<h.length;j++){var k=h[j];i.push(k.json())}b=new f(c,i)}}else if(d.array(a)){var i=a;b=new f(c,i)}else if(d.plainObject(a)&&(d.array(a.nodes)||d.array(a.edges))){for(var l=a,i=[],m=["nodes","edges"],j=0,n=m.length;n>j;j++){var o=m[j],p=l[o];if(d.array(p))for(var q=0,r=p.length;r>q;q++){var s=e.extend({group:o},p[q]);i.push(s)}}b=new f(c,i)}else{var s=a;b=new g(c,s).collection()}return b},remove:function(a){if(d.elementOrCollection(a))a=a;else if(d.string(a)){var b=a;a=this.$(b)}return a.remove()},load:function(a,b,c){var f=this;f.notifications(!1);var g=f.elements();g.length>0&&g.remove(),null!=a&&(d.plainObject(a)||d.array(a))&&f.add(a),f.one("layoutready",function(a){f.notifications(!0),f.trigger(a),f.notify({type:"load",collection:f.elements()}),f.one("load",b),f.trigger("load")}).one("layoutstop",function(){f.one("done",c),f.trigger("done")});var h=e.extend({},f._private.options.layout);return h.eles=f.$(),f.layout(h),this}});b.exports=i},{"../collection":23,"../collection/element":19,"../extensions/renderer/null":73,"../is":77,"../util":94,"../window":100}],31:[function(a,b,c){"use strict";var d=a("../define"),e=a("../util"),f=a("../is"),g={animate:d.animate(),animation:d.animation(),animated:d.animated(),clearQueue:d.clearQueue(),delay:d.delay(),delayAnimation:d.delayAnimation(),stop:d.stop(),addToAnimationPool:function(a){var b=this;b.styleEnabled()&&b._private.aniEles.merge(a)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){function a(){k._private.animationsRunning&&e.requestAnimationFrame(function(c){b(c),a()})}function b(a){function b(b,e){var g=b._private,h=g.animation.current,i=g.animation.queue,j=!1;if(0===h.length){var k=i.shift();k&&h.push(k)}for(var l=function(a){for(var b=a.length-1;b>=0;b--){var c=a[b];c()}a.splice(0,a.length)},m=h.length-1;m>=0;m--){var n=h[m],o=n._private;o.stopped?(h.splice(m,1),o.hooked=!1,o.playing=!1,o.started=!1,l(o.frames)):(o.playing||o.applying)&&(o.playing&&o.applying&&(o.applying=!1),o.started||c(b,n,a),d(b,n,a,e),o.applying&&(o.applying=!1),l(o.frames),n.completed()&&(h.splice(m,1),o.hooked=!1,o.playing=!1,o.started=!1,l(o.completes)),j=!0)}return e||0!==h.length||0!==i.length||f.push(b),j}for(var e=k._private.aniEles,f=[],g=!1,h=0;h<e.length;h++){var i=e[h],j=b(i);g=g||j}var l=b(k,!0);if(g||l){var m;if(e.length>0){var n=e.updateCompoundBounds();m=n.length>0?e.add(n):e}k.notify({type:"draw",collection:m})}e.unmerge(f)}function c(a,b,c){var d=f.core(a),e=!d,g=a,h=k._private.style,i=b._private;if(e){var j=g._private.position;i.startPosition=i.startPosition||{x:j.x,y:j.y},i.startStyle=i.startStyle||h.getValueStyle(g)}if(d){var l=k._private.pan;i.startPan=i.startPan||{x:l.x,y:l.y},i.startZoom=null!=i.startZoom?i.startZoom:k._private.zoom}i.started=!0,i.startTime=c-i.progress*i.duration}function d(a,b,c,d){var e=k._private.style,h=!d,i=a._private,l=b._private,n=l.easing,o=l.startTime;if(!l.easingImpl)if(null==n)l.easingImpl=m.linear;else{var p;if(f.string(n)){var q=e.parse("transition-timing-function",n);p=q.value}else p=n;var r,s;f.string(p)?(r=p,s=[]):(r=p[1],s=p.slice(2).map(function(a){return+a})),s.length>0?("spring"===r&&s.push(l.duration),l.easingImpl=m[r].apply(null,s)):l.easingImpl=m[r]}var t,u=l.easingImpl;if(t=0===l.duration?1:(c-o)/l.duration,l.applying&&(t=l.progress),0>t?t=0:t>1&&(t=1),null==l.delay){var v=l.startPosition,w=l.position,x=i.position;w&&h&&(g(v.x,w.x)&&(x.x=j(v.x,w.x,t,u)),g(v.y,w.y)&&(x.y=j(v.y,w.y,t,u)));var y=l.startPan,z=l.pan,A=i.pan,B=null!=z&&d;B&&(g(y.x,z.x)&&(A.x=j(y.x,z.x,t,u)),g(y.y,z.y)&&(A.y=j(y.y,z.y,t,u)),a.trigger("pan"));var C=l.startZoom,D=l.zoom,E=null!=D&&d;E&&(g(C,D)&&(i.zoom=j(C,D,t,u)),a.trigger("zoom")),(B||E)&&a.trigger("viewport");var F=l.style;if(F&&h)for(var G=0;G<F.length;G++){var H=F[G],r=H.name,I=H,J=l.startStyle[r],K=j(J,I,t,u);e.overrideBypass(a,r,K)}}return f.fn(l.step)&&l.step.apply(a,[c]),l.progress=t,t}function g(a,b){return null!=a&&null!=b&&(!(!f.number(a)||!f.number(b))||!(!a||!b))}function h(a,b,c){var d=1-c,e=c*c;return 3*d*d*c*a+3*d*e*b+e*c}function i(a,b){return function(c,d,e){return c+(d-c)*h(a,b,e)}}function j(a,b,c,d){0>c?c=0:c>1&&(c=1);var e,g;if(e=null!=a.pfValue||null!=a.value?null!=a.pfValue?a.pfValue:a.value:a,g=null!=b.pfValue||null!=b.value?null!=b.pfValue?b.pfValue:b.value:b,f.number(e)&&f.number(g))return d(e,g,c);if(f.array(e)&&f.array(g)){for(var h=[],i=0;i<g.length;i++){var j=e[i],k=g[i];if(null!=j&&null!=k){var l=d(j,k,c);a.roundValue&&(l=Math.round(l)),h.push(l)}else h.push(k)}return h}}var k=this;if(k._private.animationsRunning=!0,k.styleEnabled()){a();var l=function(){function a(a){return-a.tension*a.x-a.friction*a.v}function b(b,c,d){var e={x:b.x+d.dx*c,v:b.v+d.dv*c,tension:b.tension,friction:b.friction};return{dx:e.v,dv:a(e)}}function c(c,d){var e={dx:c.v,dv:a(c)},f=b(c,.5*d,e),g=b(c,.5*d,f),h=b(c,d,g),i=1/6*(e.dx+2*(f.dx+g.dx)+h.dx),j=1/6*(e.dv+2*(f.dv+g.dv)+h.dv);return c.x=c.x+i*d,c.v=c.v+j*d,c}return function a(b,d,e){var f,g,h,i={x:-1,v:0,tension:null,friction:null},j=[0],k=0,l=1e-4,m=.016;for(b=parseFloat(b)||500,d=parseFloat(d)||20,e=e||null,i.tension=b,i.friction=d,f=null!==e,f?(k=a(b,d),g=k/e*m):g=m;h=c(h||i,g),j.push(1+h.x),k+=16,Math.abs(h.x)>l&&Math.abs(h.v)>l;);return f?function(a){return j[a*(j.length-1)|0]}:k}}(),m={linear:function(a,b,c){return a+(b-a)*c},ease:i(.25,.1,.25,1),"ease-in":i(.42,0,1,1),"ease-out":i(0,0,.58,1),"ease-in-out":i(.42,0,.58,1),"ease-in-sine":i(.47,0,.745,.715),"ease-out-sine":i(.39,.575,.565,1),"ease-in-out-sine":i(.445,.05,.55,.95),"ease-in-quad":i(.55,.085,.68,.53),"ease-out-quad":i(.25,.46,.45,.94),"ease-in-out-quad":i(.455,.03,.515,.955),"ease-in-cubic":i(.55,.055,.675,.19),"ease-out-cubic":i(.215,.61,.355,1),"ease-in-out-cubic":i(.645,.045,.355,1),"ease-in-quart":i(.895,.03,.685,.22),"ease-out-quart":i(.165,.84,.44,1),"ease-in-out-quart":i(.77,0,.175,1),"ease-in-quint":i(.755,.05,.855,.06),"ease-out-quint":i(.23,1,.32,1),"ease-in-out-quint":i(.86,0,.07,1),"ease-in-expo":i(.95,.05,.795,.035),"ease-out-expo":i(.19,1,.22,1),"ease-in-out-expo":i(1,0,0,1),"ease-in-circ":i(.6,.04,.98,.335),"ease-out-circ":i(.075,.82,.165,1),"ease-in-out-circ":i(.785,.135,.15,.86),spring:function(a,b,c){if(0===c)return m.linear;var d=l(a,b,c);return function(a,b,c){return a+(b-a)*d(c)}},"cubic-bezier":function(a,b,c,d){return i(a,b,c,d)}}}}};b.exports=g},{"../define":41,"../is":77,"../util":94}],32:[function(a,b,c){"use strict";var d=a("../define"),e={on:d.on(),one:d.on({unbindSelfOnTrigger:!0}),once:d.on({unbindAllBindersOnTrigger:!0}),off:d.off(),trigger:d.trigger()};d.eventAliasesOn(e),b.exports=e},{"../define":41}],33:[function(a,b,c){"use strict";var d={png:function(a){var b=this._private.renderer;return a=a||{},b.png(a)},jpg:function(a){var b=this._private.renderer;return a=a||{},a.bg=a.bg||"#fff",b.jpg(a)}};d.jpeg=d.jpg,b.exports=d},{}],34:[function(a,b,c){"use strict";var d=a("../window"),e=a("../util"),f=a("../collection"),g=a("../is"),h=a("../promise"),i=a("../define"),j=function(a){if(!(this instanceof j))return new j(a);var b=this;a=e.extend({},a);var c=a.container;c&&!g.htmlElement(c)&&g.htmlElement(c[0])&&(c=c[0]);var i=c?c._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var k=i.readies=i.readies||[];c&&(c._cyreg=i),i.cy=b;var l=void 0!==d&&void 0!==c&&!a.headless,m=a;m.layout=e.extend({name:l?"grid":"null"},m.layout),m.renderer=e.extend({name:l?"canvas":"null"},m.renderer);var n=function(a,b,c){return void 0!==b?b:void 0!==c?c:a},o=this._private={container:c,ready:!1,initrender:!1,
options:m,elements:[],id2index:{},listeners:[],onRenders:[],aniEles:f(this),scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:n(!0,m.zoomingEnabled),userZoomingEnabled:n(!0,m.userZoomingEnabled),panningEnabled:n(!0,m.panningEnabled),userPanningEnabled:n(!0,m.userPanningEnabled),boxSelectionEnabled:n(!0,m.boxSelectionEnabled),autolock:n(!1,m.autolock,m.autolockNodes),autoungrabify:n(!1,m.autoungrabify,m.autoungrabifyNodes),autounselectify:n(!1,m.autounselectify),styleEnabled:void 0===m.styleEnabled?l:m.styleEnabled,zoom:g.number(m.zoom)?m.zoom:1,pan:{x:g.plainObject(m.pan)&&g.number(m.pan.x)?m.pan.x:0,y:g.plainObject(m.pan)&&g.number(m.pan.y)?m.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,deferredExecQueue:[]},p=m.selectionType;void 0===p||"additive"!==p&&"single"!==p?o.selectionType="single":o.selectionType=p,g.number(m.minZoom)&&g.number(m.maxZoom)&&m.minZoom<m.maxZoom?(o.minZoom=m.minZoom,o.maxZoom=m.maxZoom):g.number(m.minZoom)&&void 0===m.maxZoom?o.minZoom=m.minZoom:g.number(m.maxZoom)&&void 0===m.minZoom&&(o.maxZoom=m.maxZoom);var q=function(a,b){var c=a.some(g.promise);return c?h.all(a).then(b):void b(a)};b.initRenderer(e.extend({hideEdgesOnViewport:m.hideEdgesOnViewport,hideLabelsOnViewport:m.hideLabelsOnViewport,textureOnViewport:m.textureOnViewport,wheelSensitivity:g.number(m.wheelSensitivity)&&m.wheelSensitivity>0?m.wheelSensitivity:1,motionBlur:void 0===m.motionBlur||m.motionBlur,motionBlurOpacity:void 0===m.motionBlurOpacity?.05:m.motionBlurOpacity,pixelRatio:g.number(m.pixelRatio)&&m.pixelRatio>0?m.pixelRatio:void 0,desktopTapThreshold:void 0===m.desktopTapThreshold?4:m.desktopTapThreshold,touchTapThreshold:void 0===m.touchTapThreshold?8:m.touchTapThreshold},m.renderer)),q([m.style,m.elements],function(a){var c=a[0],d=a[1];o.styleEnabled&&b.setStyle(c),m.initrender&&(b.on("initrender",m.initrender),b.on("initrender",function(){o.initrender=!0})),b.load(d,function(){b.startAnimationLoop(),o.ready=!0,g.fn(m.ready)&&b.on("ready",m.ready);for(var a=0;a<k.length;a++){var c=k[a];b.on("ready",c)}i&&(i.readies=[]),b.trigger("ready")},m.done)})},k=j.prototype;e.extend(k,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},ready:function(a){return this.isReady()?this.trigger("ready",[],a):this.on("ready",a),this},initrender:function(){return this._private.initrender},destroy:function(){var a=this;a.stopAnimationLoop(),a.notify({type:"destroy"});var b=a.container();if(b)for(b._cyreg=null;b.childNodes.length>0;)b.removeChild(b.childNodes[0]);return a},getElementById:function(a){var b=this._private.id2index[a];return void 0!==b?this._private.elements[b]:f(this)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(a){for(var b=this._private.elements,c=this._private.id2index,d=0;d<a.length;d++){var e=a[d],f=e._private.data.id,g=c[f],h=void 0!==g;h||(g=b.length,b.push(e),c[f]=g,e._private.index=g)}return this},removeFromPool:function(a){for(var b=this._private.elements,c=this._private.id2index,d=0;d<a.length;d++){var e=a[d],f=e._private.data.id,g=c[f],h=void 0!==g;if(h){this._private.id2index[f]=void 0,b.splice(g,1);for(var i=g;i<b.length;i++){var j=b[i]._private.data.id;c[j]--,b[i]._private.index--}}}},container:function(){return this._private.container},options:function(){return e.copy(this._private.options)},json:function(a){var b=this,c=b._private;if(g.plainObject(a)){if(b.startBatch(),a.elements){var d={},f=function(a,c){for(var f=0;f<a.length;f++){var g=a[f],h=g.data.id,i=b.getElementById(h);d[h]=!0,0!==i.length?i.json(g):c?b.add(e.extend({group:c},g)):b.add(g)}};if(g.array(a.elements))f(a.elements);else for(var h=["nodes","edges"],i=0;i<h.length;i++){var j=h[i],k=a.elements[j];g.array(k)&&f(k,j)}b.elements().stdFilter(function(a){return!d[a.id()]}).remove()}a.style&&b.style(a.style),null!=a.zoom&&a.zoom!==c.zoom&&b.zoom(a.zoom),a.pan&&(a.pan.x===c.pan.x&&a.pan.y===c.pan.y||b.pan(a.pan));for(var l=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],i=0;i<l.length;i++){var m=l[i];null!=a[m]&&b[m](a[m])}return b.endBatch(),this}if(void 0===a){var n={};return n.elements={},b.elements().each(function(a,b){var c=b.group();n.elements[c]||(n.elements[c]=[]),n.elements[c].push(b.json())}),this._private.styleEnabled&&(n.style=b.style().json()),n.zoomingEnabled=b._private.zoomingEnabled,n.userZoomingEnabled=b._private.userZoomingEnabled,n.zoom=b._private.zoom,n.minZoom=b._private.minZoom,n.maxZoom=b._private.maxZoom,n.panningEnabled=b._private.panningEnabled,n.userPanningEnabled=b._private.userPanningEnabled,n.pan=e.copy(b._private.pan),n.boxSelectionEnabled=b._private.boxSelectionEnabled,n.renderer=e.copy(b._private.options.renderer),n.hideEdgesOnViewport=b._private.options.hideEdgesOnViewport,n.hideLabelsOnViewport=b._private.options.hideLabelsOnViewport,n.textureOnViewport=b._private.options.textureOnViewport,n.wheelSensitivity=b._private.options.wheelSensitivity,n.motionBlur=b._private.options.motionBlur,n}},scratch:i.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:i.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})}),[a("./add-remove"),a("./animation"),a("./events"),a("./export"),a("./layout"),a("./notification"),a("./renderer"),a("./search"),a("./style"),a("./viewport")].forEach(function(a){e.extend(k,a)}),b.exports=j},{"../collection":23,"../define":41,"../is":77,"../promise":80,"../util":94,"../window":100,"./add-remove":30,"./animation":31,"./events":32,"./export":33,"./layout":35,"./notification":36,"./renderer":37,"./search":38,"./style":39,"./viewport":40}],35:[function(a,b,c){"use strict";var d=a("../util"),e=a("../is"),f={layout:function(a){var b=this._private.prevLayout=null==a?this._private.prevLayout:this.makeLayout(a);return b.run(),this},makeLayout:function(a){var b=this;if(null==a)return void d.error("Layout options must be specified to make a layout");if(null==a.name)return void d.error("A `name` must be specified to make a layout");var c=a.name,f=b.extension("layout",c);if(null==f)return void d.error("Can not apply layout: No such layout `"+c+"` found; did you include its JS file?");var g;g=e.string(a.eles)?b.$(a.eles):null!=a.eles?a.eles:b.$();var h=new f(d.extend({},a,{cy:b,eles:g}));return h}};f.createLayout=f.makeLayout,b.exports=f},{"../is":77,"../util":94}],36:[function(a,b,c){"use strict";var d={notify:function(a){var b=this._private;if(b.batchingNotify){var c=b.batchNotifyEles,d=b.batchNotifyTypes;return a.collection&&c.merge(a.collection),void(d.ids[a.type]||d.push(a.type))}if(b.notificationsEnabled){var e=this.renderer();e.notify(a)}},notifications:function(a){var b=this._private;return void 0===a?b.notificationsEnabled:void(b.notificationsEnabled=!!a)},noNotifications:function(a){this.notifications(!1),a(),this.notifications(!0)},startBatch:function(){var a=this._private;return null==a.batchCount&&(a.batchCount=0),0===a.batchCount&&(a.batchingStyle=a.batchingNotify=!0,a.batchStyleEles=this.collection(),a.batchNotifyEles=this.collection(),a.batchNotifyTypes=[],a.batchNotifyTypes.ids={}),a.batchCount++,this},endBatch:function(){var a=this._private;return a.batchCount--,0===a.batchCount&&(a.batchingStyle=!1,a.batchStyleEles.updateStyle(),a.batchingNotify=!1,this.notify({type:a.batchNotifyTypes,collection:a.batchNotifyEles})),this},batch:function(a){return this.startBatch(),a(),this.endBatch(),this},batchData:function(a){var b=this;return this.batch(function(){for(var c in a){var d=a[c],e=b.getElementById(c);e.data(d)}})}};b.exports=d},{}],37:[function(a,b,c){"use strict";var d=a("../util"),e={renderTo:function(a,b,c,d){var e=this._private.renderer;return e.renderTo(a,b,c,d),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},resize:function(){return this.notify({type:"resize"}),this.trigger("resize"),this},initRenderer:function(a){var b=this,c=b.extension("renderer",a.name);if(null==c)return void d.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",a.name);var e=d.extend({},a,{cy:b}),f=b._private.renderer=new c(e);f.init(e)},triggerOnRender:function(){for(var a=this._private.onRenders,b=0;b<a.length;b++){var c=a[b];c()}return this},onRender:function(a){return this._private.onRenders.push(a),this},offRender:function(a){var b=this._private.onRenders;if(null==a)return this._private.onRenders=[],this;for(var c=0;c<b.length;c++){var d=b[c];if(a===d){b.splice(c,1);break}}return this}};e.invalidateDimensions=e.resize,b.exports=e},{"../util":94}],38:[function(a,b,c){"use strict";var d=a("../is"),e=a("../collection"),f={collection:function(a,b){return d.string(a)?this.$(a):d.elementOrCollection(a)?a.collection():d.array(a)?e(this,a,b):e(this)},nodes:function(a){var b=this.$(function(){return this.isNode()});return a?b.filter(a):b},edges:function(a){var b=this.$(function(){return this.isEdge()});return a?b.filter(a):b},$:function(a){var b=new e(this,this._private.elements);return a?b.filter(a):b}};f.elements=f.filter=f.$,b.exports=f},{"../collection":23,"../is":77}],39:[function(a,b,c){"use strict";var d=a("../is"),e=a("../style"),f={style:function(a){if(a){var b=this.setStyle(a);b.update()}return this._private.style},setStyle:function(a){var b=this._private;return d.stylesheet(a)?b.style=a.generateStyle(this):d.array(a)?b.style=e.fromJson(this,a):d.string(a)?b.style=e.fromString(this,a):b.style=e(this),b.style}};b.exports=f},{"../is":77,"../style":86}],40:[function(a,b,c){"use strict";var d=a("../is"),e={autolock:function(a){return void 0===a?this._private.autolock:(this._private.autolock=!!a,this)},autoungrabify:function(a){return void 0===a?this._private.autoungrabify:(this._private.autoungrabify=!!a,this)},autounselectify:function(a){return void 0===a?this._private.autounselectify:(this._private.autounselectify=!!a,this)},panningEnabled:function(a){return void 0===a?this._private.panningEnabled:(this._private.panningEnabled=!!a,this)},userPanningEnabled:function(a){return void 0===a?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!a,this)},zoomingEnabled:function(a){return void 0===a?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!a,this)},userZoomingEnabled:function(a){return void 0===a?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!a,this)},boxSelectionEnabled:function(a){return void 0===a?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!a,this)},pan:function(){var a,b,c,e,f,g=arguments,h=this._private.pan;switch(g.length){case 0:return h;case 1:if(d.string(g[0]))return a=g[0],h[a];if(d.plainObject(g[0])){if(!this._private.panningEnabled)return this;c=g[0],e=c.x,f=c.y,d.number(e)&&(h.x=e),d.number(f)&&(h.y=f),this.trigger("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;a=g[0],b=g[1],"x"!==a&&"y"!==a||!d.number(b)||(h[a]=b),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},panBy:function(a){var b,c,e,f,g,h=arguments,i=this._private.pan;if(!this._private.panningEnabled)return this;switch(h.length){case 1:d.plainObject(h[0])&&(e=h[0],f=e.x,g=e.y,d.number(f)&&(i.x+=f),d.number(g)&&(i.y+=g),this.trigger("pan viewport"));break;case 2:b=h[0],c=h[1],"x"!==b&&"y"!==b||!d.number(c)||(i[b]+=c),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},fit:function(a,b){var c=this.getFitViewport(a,b);if(c){var d=this._private;d.zoom=c.zoom,d.pan=c.pan,this.trigger("pan zoom viewport"),this.notify({type:"viewport"})}return this},getFitViewport:function(a,b){if(d.number(a)&&void 0===b&&(b=a,a=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var c;if(d.string(a)){var e=a;a=this.$(e)}else if(d.boundingBox(a)){var f=a;c={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2},c.w=c.x2-c.x1,c.h=c.y2-c.y1}else d.elementOrCollection(a)||(a=this.elements());c=c||a.boundingBox();var g,h=this.width(),i=this.height();if(b=d.number(b)?b:0,!isNaN(h)&&!isNaN(i)&&h>0&&i>0&&!isNaN(c.w)&&!isNaN(c.h)&&c.w>0&&c.h>0){g=Math.min((h-2*b)/c.w,(i-2*b)/c.h),g=g>this._private.maxZoom?this._private.maxZoom:g,g=g<this._private.minZoom?this._private.minZoom:g;var j={x:(h-g*(c.x1+c.x2))/2,y:(i-g*(c.y1+c.y2))/2};return{zoom:g,pan:j}}}},minZoom:function(a){return void 0===a?this._private.minZoom:(d.number(a)&&(this._private.minZoom=a),this)},maxZoom:function(a){return void 0===a?this._private.maxZoom:(d.number(a)&&(this._private.maxZoom=a),this)},zoom:function(a){var b,c;if(void 0===a)return this._private.zoom;if(d.number(a))c=a;else if(d.plainObject(a)){if(c=a.level,a.position){var e=a.position,f=this._private.pan,g=this._private.zoom;b={x:e.x*g+f.x,y:e.y*g+f.y}}else a.renderedPosition&&(b=a.renderedPosition);if(b&&!this._private.panningEnabled)return this}if(!this._private.zoomingEnabled)return this;if(!d.number(c)||b&&(!d.number(b.x)||!d.number(b.y)))return this;if(c=c>this._private.maxZoom?this._private.maxZoom:c,c=c<this._private.minZoom?this._private.minZoom:c,b){var h=this._private.pan,i=this._private.zoom,j=c,k={x:-j/i*(b.x-h.x)+b.x,y:-j/i*(b.y-h.y)+b.y};this._private.zoom=c,this._private.pan=k;var l=h.x!==k.x||h.y!==k.y;this.trigger(" zoom "+(l?" pan ":"")+" viewport ")}else this._private.zoom=c,this.trigger("zoom viewport");return this.notify({type:"viewport"}),this},viewport:function(a){var b=this._private,c=!0,e=!0,f=[],g=!1,h=!1;if(!a)return this;if(d.number(a.zoom)||(c=!1),d.plainObject(a.pan)||(e=!1),!c&&!e)return this;if(c){var i=a.zoom;i<b.minZoom||i>b.maxZoom||!b.zoomingEnabled?g=!0:(b.zoom=i,f.push("zoom"))}if(e&&(!g||!a.cancelOnFailedZoom)&&b.panningEnabled){var j=a.pan;d.number(j.x)&&(b.pan.x=j.x,h=!1),d.number(j.y)&&(b.pan.y=j.y,h=!1),h||f.push("pan")}return f.length>0&&(f.push("viewport"),this.trigger(f.join(" ")),this.notify({type:"viewport"})),this},center:function(a){var b=this.getCenterPan(a);return b&&(this._private.pan=b,this.trigger("pan viewport"),this.notify({type:"viewport"})),this},getCenterPan:function(a,b){if(this._private.panningEnabled){if(d.string(a)){var c=a;a=this.elements(c)}else d.elementOrCollection(a)||(a=this.elements());var e=a.boundingBox(),f=this.width(),g=this.height();b=void 0===b?this._private.zoom:b;var h={x:(f-b*(e.x1+e.x2))/2,y:(g-b*(e.y1+e.y2))/2};return h}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},width:function(){var a=this._private.container;return a?a.clientWidth:1},height:function(){var a=this._private.container;return a?a.clientHeight:1},extent:function(){var a=this._private.pan,b=this._private.zoom,c=this.renderedExtent(),d={x1:(c.x1-a.x)/b,x2:(c.x2-a.x)/b,y1:(c.y1-a.y)/b,y2:(c.y2-a.y)/b};return d.w=d.x2-d.x1,d.h=d.y2-d.y1,d},renderedExtent:function(){var a=this.width(),b=this.height();return{x1:0,y1:0,x2:a,y2:b,w:a,h:b}}};e.centre=e.center,e.autolockNodes=e.autolock,e.autoungrabifyNodes=e.autoungrabify,b.exports=e},{"../is":77}],41:[function(a,b,c){"use strict";var d=a("./util"),e=a("./is"),f=a("./selector"),g=a("./promise"),h=a("./event"),i=a("./animation"),j={data:function(a){var b={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,onSet:function(a){},canSet:function(a){return!0}};return a=d.extend({},b,a),function(b,c){var d=a,f=this,g=void 0!==f.length,h=g?f:[f],i=g?f[0]:f;if(e.string(b)){if(d.allowGetting&&void 0===c){var j;return i&&(j=i._private[d.field][b]),j}if(d.allowSetting&&void 0!==c){var k=!d.immutableKeys[b];if(k){for(var l=0,m=h.length;m>l;l++)d.canSet(h[l])&&(h[l]._private[d.field][b]=c);d.updateStyle&&f.updateStyle(),d.onSet(f),d.settingTriggersEvent&&f[d.triggerFnName](d.settingEvent)}}}else if(d.allowSetting&&e.plainObject(b)){var n,o,p=b;for(n in p){o=p[n];var k=!d.immutableKeys[n];if(k)for(var l=0,m=h.length;m>l;l++)d.canSet(h[l])&&(h[l]._private[d.field][n]=o)}d.updateStyle&&f.updateStyle(),d.onSet(f),d.settingTriggersEvent&&f[d.triggerFnName](d.settingEvent)}else if(d.allowBinding&&e.fn(b)){var q=b;f.bind(d.bindingEvent,q)}else if(d.allowGetting&&void 0===b){var j;return i&&(j=i._private[d.field]),j}return f}},removeData:function(a){var b={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return a=d.extend({},b,a),function(b){var c=a,d=this,f=void 0!==d.length,g=f?d:[d];if(e.string(b)){for(var h=b.split(/\s+/),i=h.length,j=0;i>j;j++){var k=h[j];if(!e.emptyString(k)){var l=!c.immutableKeys[k];if(l)for(var m=0,n=g.length;n>m;m++)g[m]._private[c.field][k]=void 0}}c.triggerEvent&&d[c.triggerFnName](c.event)}else if(void 0===b){for(var m=0,n=g.length;n>m;m++){var o=g[m]._private[c.field];for(var k in o){var p=!c.immutableKeys[k];p&&(o[k]=void 0)}}c.triggerEvent&&d[c.triggerFnName](c.event)}return d}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,falseCallback:function(){return!1}},on:function(a){var b={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};return a=d.extend({},b,a),function(b,c,d,g){var h=this,i=void 0!==h.length,k=i?h:[h],l=e.string(b),m=a;if(e.plainObject(c)?(g=d,d=c,c=void 0):(e.fn(c)||c===!1)&&(g=c,d=void 0,c=void 0),(e.fn(d)||d===!1)&&(g=d,d=void 0),!e.fn(g)&&g!==!1&&l)return h;if(l){var n={};n[b]=g,b=n}for(var o in b)if(g=b[o],g===!1&&(g=j.event.falseCallback),e.fn(g)){o=o.split(/\s+/);for(var p=0;p<o.length;p++){var q=o[p];if(!e.emptyString(q)){var r=q.match(j.event.regex);if(r)for(var s=r[1],t=r[2]?r[2]:void 0,u={callback:g,data:d,delegated:!!c,selector:c,selObj:new f(c),type:s,namespace:t,unbindSelfOnTrigger:m.unbindSelfOnTrigger,unbindAllBindersOnTrigger:m.unbindAllBindersOnTrigger,binders:k},v=0;v<k.length;v++){var w=k[v]._private;w.listeners=w.listeners||[],w.listeners.push(u)}}}}return h}},eventAliasesOn:function(a){var b=a;b.addListener=b.listen=b.bind=b.on,b.removeListener=b.unlisten=b.unbind=b.off,b.emit=b.trigger,b.pon=b.promiseOn=function(a,b){var c=this,d=Array.prototype.slice.call(arguments,0);return new g(function(a,b){var e=function(b){c.off.apply(c,g),a(b)},f=d.concat([e]),g=f.concat([]);c.on.apply(c,f)})}},off:function(a){var b={};return a=d.extend({},b,a),function(a,b,c){var d=this,f=void 0!==d.length,g=f?d:[d],h=e.string(a);if(0===arguments.length){for(var i=0;i<g.length;i++)g[i]._private.listeners=[];return d}if((e.fn(b)||b===!1)&&(c=b,b=void 0),h){var k={};k[a]=c,a=k}for(var l in a){c=a[l],c===!1&&(c=j.event.falseCallback),l=l.split(/\s+/);for(var m=0;m<l.length;m++){var n=l[m];if(!e.emptyString(n)){var o=n.match(j.event.optionalTypeRegex);if(o)for(var p=o[1]?o[1]:void 0,q=o[2]?o[2]:void 0,i=0;i<g.length;i++)for(var r=g[i]._private.listeners=g[i]._private.listeners||[],s=0;s<r.length;s++){var t=r[s],u=!q||q===t.namespace,v=!p||t.type===p,w=!c||c===t.callback,x=u&&v&&w;x&&(r.splice(s,1),s--)}}}}return d}},trigger:function(a){var b={};return a=d.extend({},b,a),function(b,c,d){var f=this,g=void 0!==f.length,i=g?f:[f],k=e.string(b),l=e.plainObject(b),m=e.event(b),n=this._private.cy||(e.core(this)?this:null),o=!!n&&n.hasCompoundNodes();if(k){var p=b.split(/\s+/);b=[];for(var q=0;q<p.length;q++){var r=p[q];if(!e.emptyString(r)){var s=r.match(j.event.regex),t=s[1],u=s[2]?s[2]:void 0;b.push({type:t,namespace:u})}}}else if(l){var v=b;b=[v]}c?e.array(c)||(c=[c]):c=[];for(var q=0;q<b.length;q++)for(var w=b[q],x=0;x<i.length;x++){var r,y=i[x],z=y._private.listeners=y._private.listeners||[],A=e.element(y),B=A||a.layout;if(m?(r=w,r.cyTarget=r.cyTarget||y,r.cy=r.cy||n):r=new h(w,{cyTarget:y,cy:n,namespace:w.namespace}),w.layout&&(r.layout=w.layout),a.layout&&(r.layout=y),r.cyPosition){var C=r.cyPosition,D=n.zoom(),E=n.pan();r.cyRenderedPosition={x:C.x*D+E.x,y:C.y*D+E.y}}d&&(z=[{namespace:r.namespace,type:r.type,callback:d}]);for(var F=0;F<z.length;F++){var G=z[F],H=!G.namespace||G.namespace===r.namespace,I=G.type===r.type,J=!G.delegated||y!==r.cyTarget&&e.element(r.cyTarget)&&G.selObj.matches(r.cyTarget),K=H&&I&&J;if(K){var L=[r];if(L=L.concat(c),G.data?r.data=G.data:r.data=void 0,(G.unbindSelfOnTrigger||G.unbindAllBindersOnTrigger)&&(z.splice(F,1),F--),G.unbindAllBindersOnTrigger)for(var M=G.binders,N=0;N<M.length;N++){var O=M[N];if(O&&O!==y)for(var P=O._private.listeners,Q=0;Q<P.length;Q++){var R=P[Q];R===G&&(P.splice(Q,1),Q--)}}var S=G.delegated?r.cyTarget:y,T=G.callback.apply(S,L);(T===!1||r.isPropagationStopped())&&(B=!1,T===!1&&(r.stopPropagation(),r.preventDefault()))}}if(B){var U=o?y._private.parent:null,V=null!=U&&0!==U.length;V?(U=U[0],U.trigger(r)):n.trigger(r)}}return f}},animated:function(a){var b={};return a=d.extend({},b,a),function(){var a=this,b=void 0!==a.length,c=b?a:[a],d=this._private.cy||this;if(!d.styleEnabled())return!1;var e=c[0];return e?e._private.animation.current.length>0:void 0}},clearQueue:function(a){var b={};return a=d.extend({},b,a),function(){var a=this,b=void 0!==a.length,c=b?a:[a],d=this._private.cy||this;if(!d.styleEnabled())return this;for(var e=0;e<c.length;e++){var f=c[e];f._private.animation.queue=[]}return this}},delay:function(a){var b={};return a=d.extend({},b,a),function(a,b){var c=this._private.cy||this;return c.styleEnabled()?this.animate({delay:a,duration:a,complete:b}):this}},delayAnimation:function(a){var b={};return a=d.extend({},b,a),function(a,b){var c=this._private.cy||this;return c.styleEnabled()?this.animation({delay:a,duration:a,complete:b}):this}},animation:function(a){var b={};return a=d.extend({},b,a),function(a,b){var c=this,e=void 0!==c.length,f=e?c:[c],g=this._private.cy||this,h=!e,j=!h;if(!g.styleEnabled())return this;var k=g.style();switch(a=d.extend({},a,b),void 0===a.duration&&(a.duration=400),a.duration){case"slow":a.duration=600;break;case"fast":a.duration=200}var l=!0;if(a)for(var m in a){l=!1;break}if(l)return new i(f[0],a);if(j&&(a.style=k.getPropsList(a.style||a.css),a.css=void 0),a.renderedPosition&&j){var n=a.renderedPosition,o=g.pan(),p=g.zoom();a.position={x:(n.x-o.x)/p,y:(n.y-o.y)/p}}if(a.panBy&&h){var q=a.panBy,r=g.pan();a.pan={x:r.x+q.x,y:r.y+q.y}}var s=a.center||a.centre;if(s&&h){var t=g.getCenterPan(s.eles,a.zoom);t&&(a.pan=t)}if(a.fit&&h){var u=a.fit,v=g.getFitViewport(u.eles||u.boundingBox,u.padding);v&&(a.pan=v.pan,a.zoom=v.zoom)}return new i(f[0],a)}},animate:function(a){var b={};return a=d.extend({},b,a),function(a,b){var c=this,e=void 0!==c.length,f=e?c:[c],g=this._private.cy||this;if(!g.styleEnabled())return this;b&&(a=d.extend({},a,b));for(var h=0;h<f.length;h++){var i=f[h],j=i.animated()&&(void 0===a.queue||a.queue),k=i.animation(a,j?{queue:!0}:void 0);k.play()}return this}},stop:function(a){var b={};return a=d.extend({},b,a),function(a,b){var c=this,d=void 0!==c.length,e=d?c:[c],f=this._private.cy||this;if(!f.styleEnabled())return this;for(var g=0;g<e.length;g++){for(var h=e[g],i=h._private,j=i.animation.current,k=0;k<j.length;k++){var l=j[k],m=l._private;b&&(m.duration=0)}a&&(i.animation.queue=[]),b||(i.animation.current=[])}return f.notify({collection:this,type:"draw"}),this}}};b.exports=j},{"./animation":1,"./event":42,"./is":77,"./promise":80,"./selector":81,"./util":94}],42:[function(a,b,c){"use strict";function d(){return!1}function e(){return!0}var f=function(a,b){return this instanceof f?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented?e:d):this.type=a,b&&(this.type=void 0!==b.type?b.type:this.type,this.cy=b.cy,this.cyTarget=b.cyTarget,this.cyPosition=b.cyPosition,this.cyRenderedPosition=b.cyRenderedPosition,this.namespace=b.namespace,this.layout=b.layout,this.data=b.data,this.message=b.message),void(this.timeStamp=a&&a.timeStamp||Date.now())):new f(a,b)};f.prototype={instanceString:function(){return"event"},preventDefault:function(){this.isDefaultPrevented=e;var a=this.originalEvent;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){this.isPropagationStopped=e;var a=this.originalEvent;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=e,this.stopPropagation()},isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d},b.exports=f},{}],43:[function(a,b,c){"use strict";function d(a,b,c){var d=c;if("core"===a)k.prototype[b]=c;else if("collection"===a)j.prototype[b]=c;else if("layout"===a){for(var f=function(a){this.options=a,c.call(this,a),m.plainObject(this._private)||(this._private={}),this._private.cy=a.cy,this._private.listeners=[]},g=f.prototype=Object.create(c.prototype),l=[],o=0;o<l.length;o++){var p=l[o];g[p]=g[p]||function(){return this}}g.start&&!g.run?g.run=function(){return this.start(),this}:!g.start&&g.run&&(g.start=function(){return this.run(),this}),g.stop||(g.stop=function(){var a=this.options;if(a&&a.animate)for(var b=this.animations,c=0;c<b.length;c++)b[c].stop();return this.trigger("layoutstop"),this}),g.destroy||(g.destroy=function(){return this}),g.on=i.on({layout:!0}),g.one=i.on({layout:!0,unbindSelfOnTrigger:!0}),g.once=i.on({layout:!0,unbindAllBindersOnTrigger:!0}),g.off=i.off({layout:!0}),g.trigger=i.trigger({layout:!0}),i.eventAliasesOn(g),d=f}else if("renderer"===a&&"null"!==b&&"base"!==b){var q=e("renderer","base").prototype,r=c.prototype;for(var s in q){var t=q[s],u=null!=r[s];if(u)return void h.error("Can not register renderer `"+b+"` since it overrides `"+s+"` in its prototype");r[s]=t}q.clientFunctions.forEach(function(a){r[a]=r[a]||function(){h.error("Renderer does not implement `renderer."+a+"()` on its prototype")}})}return h.setMap({map:n,keys:[a,b],value:d})}function e(a,b){return h.getMap({map:n,keys:[a,b]})}function f(a,b,c,d,e){return h.setMap({map:o,keys:[a,b,c,d],value:e})}function g(a,b,c,d){return h.getMap({map:o,keys:[a,b,c,d]})}var h=a("./util"),i=a("./define"),j=a("./collection"),k=a("./core"),l=a("./extensions"),m=a("./is"),n={},o={},p=function(){return 2===arguments.length?e.apply(null,arguments):3===arguments.length?d.apply(null,arguments):4===arguments.length?g.apply(null,arguments):5===arguments.length?f.apply(null,arguments):void h.error("Invalid extension access syntax")};k.prototype.extension=p,l.forEach(function(a){a.extensions.forEach(function(b){d(a.type,b.name,b.impl)})}),b.exports=p},{"./collection":23,"./core":34,"./define":41,"./extensions":44,"./is":77,"./util":94}],44:[function(a,b,c){"use strict";b.exports=[{type:"layout",extensions:a("./layout")},{type:"renderer",extensions:a("./renderer")}]},{"./layout":50,"./renderer":72}],45:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},h,a)}var e=a("../../util"),f=a("../../math"),g=a("../../is"),h={fit:!0,directed:!1,padding:30,circle:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,roots:void 0,maximalAdjustments:0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};d.prototype.run=function(){var a,b=this.options,c=b,d=b.cy,e=c.eles,h=e.nodes().not(":parent"),i=e,j=f.makeBoundingBox(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:d.width(),h:d.height()});if(g.elementOrCollection(c.roots))a=c.roots;else if(g.array(c.roots)){for(var k=[],l=0;l<c.roots.length;l++){var m=c.roots[l],n=d.getElementById(m);k.push(n)}a=d.collection(k)}else if(g.string(c.roots))a=d.$(c.roots);else if(c.directed)a=h.roots();else{for(var o=[],p=h;p.length>0;){var q=d.collection();e.bfs({roots:p[0],visit:function(a,b,c,d,e){q=q.add(c)},directed:!1}),p=p.not(q),o.push(q)}a=d.collection();for(var l=0;l<o.length;l++){var r=o[l],s=r.maxDegree(!1),t=r.filter(function(){return this.degree(!1)===s});a=a.add(t)}}var u=[],v={},w={},x={},y={},z={};i.bfs({roots:a,directed:c.directed,visit:function(a,b,c,d,e){var f=this[0],g=f.id();if(u[b]||(u[b]=[]),u[b].push(f),v[g]=!0,w[g]=b,x[g]=e,y[g]=d,e){var h=e.id(),i=z[h]=z[h]||[];i.push(c)}}});for(var A=[],l=0;l<h.length;l++){var n=h[l];v[n.id()]||A.push(n)}for(var B=3*A.length,C=0;0!==A.length&&B>C;){for(var D=A.shift(),E=D.neighborhood().nodes(),F=!1,l=0;l<E.length;l++){var G=w[E[l].id()];if(void 0!==G){u[G].push(D),F=!0;break}}F||A.push(D),C++}for(;0!==A.length;){var D=A.shift(),F=!1;F||(0===u.length&&u.push([]),u[0].push(D))}var H=function(){for(var a=0;a<u.length;a++)for(var b=u[a],c=0;c<b.length;c++){var d=b[c];d._private.scratch.breadthfirst={depth:a,index:c}}};H();for(var I=function(a){for(var b,c=a.connectedEdges(function(){return this.data("target")===a.id()}),d=a._private.scratch.breadthfirst,e=0,f=0;f<c.length;f++){var g=c[f],h=g.source()[0],i=h._private.scratch.breadthfirst;d.depth<=i.depth&&e<i.depth&&(e=i.depth,b=h)}return b},J=0;J<c.maximalAdjustments;J++){for(var K=u.length,L=[],l=0;K>l;l++)for(var G=u[l],M=G.length,N=0;M>N;N++){var n=G[N],O=n._private.scratch.breadthfirst,P=I(n);P&&(O.intEle=P,L.push(n))}for(var l=0;l<L.length;l++){var n=L[l],O=n._private.scratch.breadthfirst,P=O.intEle,Q=P._private.scratch.breadthfirst;u[O.depth].splice(O.index,1);for(var R=Q.depth+1;R>u.length-1;)u.push([]);u[R].push(n),O.depth=R,O.index=u[R].length-1}H()}var S=0;if(c.avoidOverlap){for(var l=0;l<h.length;l++){var T=h[l],U=T.boundingBox(),V=U.w,W=U.h;S=Math.max(S,V,W)}S*=c.spacingFactor}for(var X={},Y=function(a){if(X[a.id()])return X[a.id()];for(var b=a._private.scratch.breadthfirst.depth,c=a.neighborhood().nodes().not(":parent"),d=0,e=0,f=0;f<c.length;f++){var g=c[f],h=g._private.scratch.breadthfirst,i=h.index,j=h.depth,k=u[j].length;(b>j||0===b)&&(d+=i/k,e++)}return e=Math.max(1,e),d/=e,0===e&&(d=void 0),X[a.id()]=d,d},Z=function(a,b){var c=Y(a),d=Y(b);return c-d},$=0;3>$;$++){for(var l=0;l<u.length;l++)u[l]=u[l].sort(Z);H()}for(var _=0,l=0;l<u.length;l++)_=Math.max(u[l].length,_);for(var aa={x:j.x1+j.w/2,y:j.x1+j.h/2},ba=function(a,b){var d=a._private.scratch.breadthfirst,e=d.depth,f=d.index,g=u[e].length,h=Math.max(j.w/(g+1),S),i=Math.max(j.h/(u.length+1),S),k=Math.min(j.w/2/u.length,j.h/2/u.length);if(k=Math.max(k,S),c.circle){if(c.circle){var l=k*e+k-(u.length>0&&u[0].length<=3?k/2:0),m=2*Math.PI/u[e].length*f;return 0===e&&1===u[0].length&&(l=1),{x:aa.x+l*Math.cos(m),y:aa.y+l*Math.sin(m)}}return{x:aa.x+(f+1-(g+1)/2)*h,y:(e+1)*i}}var n={x:aa.x+(f+1-(g+1)/2)*h,y:(e+1)*i};return b?n:n},ca={},l=u.length-1;l>=0;l--)for(var G=u[l],N=0;N<G.length;N++){var D=G[N];ca[D.id()]=ba(D,l===u.length-1)}return h.layoutPositions(this,c,function(){return ca[this.id()]}),this},b.exports=d},{"../../is":77,"../../math":79,"../../util":94}],46:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},h,a)}var e=a("../../util"),f=a("../../math"),g=a("../../is"),h={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};d.prototype.run=function(){var a=this.options,b=a,c=a.cy,d=b.eles,e=void 0!==b.counterclockwise?!b.counterclockwise:b.clockwise,h=d.nodes().not(":parent");b.sort&&(h=h.sort(b.sort));for(var i,j=f.makeBoundingBox(b.boundingBox?b.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()}),k={x:j.x1+j.w/2,y:j.y1+j.h/2},l=void 0===b.sweep?2*Math.PI-2*Math.PI/h.length:b.sweep,m=l/Math.max(1,h.length-1),n=0,o=0;o<h.length;o++){var p=h[o],q=p.boundingBox(),r=q.w,s=q.h;n=Math.max(n,r,s)}if(i=g.number(b.radius)?b.radius:h.length<=1?0:Math.min(j.h,j.w)/2-n,h.length>1&&b.avoidOverlap){n*=1.75;var t=Math.cos(m)-Math.cos(0),u=Math.sin(m)-Math.sin(0),v=Math.sqrt(n*n/(t*t+u*u));i=Math.max(v,i)}var w=function(a,c){var d=b.startAngle+a*m*(e?1:-1),f=i*Math.cos(d),g=i*Math.sin(d),h={x:k.x+f,y:k.y+g};return h};return h.layoutPositions(this,b,w),this},b.exports=d},{"../../is":77,"../../math":79,"../../util":94}],47:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},g,a)}var e=a("../../util"),f=a("../../math"),g={fit:!0,
padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,height:void 0,width:void 0,concentric:function(a){return a.degree()},levelWidth:function(a){return a.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};d.prototype.run=function(){for(var a=this.options,b=a,c=void 0!==b.counterclockwise?!b.counterclockwise:b.clockwise,d=a.cy,e=b.eles,g=e.nodes().not(":parent"),h=f.makeBoundingBox(b.boundingBox?b.boundingBox:{x1:0,y1:0,w:d.width(),h:d.height()}),i={x:h.x1+h.w/2,y:h.y1+h.h/2},j=[],k=b.startAngle,l=0,m=0;m<g.length;m++){var n,o=g[m];n=b.concentric.apply(o,[o]),j.push({value:n,node:o}),o._private.scratch.concentric=n}g.updateStyle();for(var m=0;m<g.length;m++){var o=g[m],p=o.boundingBox();l=Math.max(l,p.w,p.h)}j.sort(function(a,b){return b.value-a.value});for(var q=b.levelWidth(g),r=[[]],s=r[0],m=0;m<j.length;m++){var t=j[m];if(s.length>0){var u=Math.abs(s[0].value-t.value);u>=q&&(s=[],r.push(s))}s.push(t)}var v=l+b.minNodeSpacing;if(!b.avoidOverlap){var w=r.length>0&&r[0].length>1,x=Math.min(h.w,h.h)/2-v,y=x/(r.length+w?1:0);v=Math.min(v,y)}for(var z=0,m=0;m<r.length;m++){var A=r[m],B=void 0===b.sweep?2*Math.PI-2*Math.PI/A.length:b.sweep,C=A.dTheta=B/Math.max(1,A.length-1);if(A.length>1&&b.avoidOverlap){var D=Math.cos(C)-Math.cos(0),E=Math.sin(C)-Math.sin(0),F=Math.sqrt(v*v/(D*D+E*E));z=Math.max(F,z)}A.r=z,z+=v}if(b.equidistant){for(var G=0,z=0,m=0;m<r.length;m++){var A=r[m],H=A.r-z;G=Math.max(G,H)}z=0;for(var m=0;m<r.length;m++){var A=r[m];0===m&&(z=A.r),A.r=z,z+=G}}for(var I={},m=0;m<r.length;m++)for(var A=r[m],C=A.dTheta,z=A.r,J=0;J<A.length;J++){var t=A[J],k=b.startAngle+(c?1:-1)*C*J,K={x:i.x+z*Math.cos(k),y:i.y+z*Math.sin(k)};I[t.node.id()]=K}return g.layoutPositions(this,b,function(){var a=this.id();return I[a]}),this},b.exports=d},{"../../math":79,"../../util":94}],48:[function(a,b,c){"use strict";function d(a){this.options=f.extend({},j,a),this.options.layout=this}var e,f=a("../../util"),g=a("../../math"),h=a("../../thread"),i=a("../../is"),j={ready:function(){},stop:function(){},animate:!0,animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,componentSpacing:100,nodeRepulsion:function(a){return 4e5},nodeOverlap:10,idealEdgeLength:function(a){return 10},edgeElasticity:function(a){return 100},nestingFactor:5,gravity:80,numIter:1e3,initialTemp:200,coolingFactor:.95,minTemp:1,useMultitasking:!0};d.prototype.run=function(){var a=this.options,b=a.cy,c=this,d=this.thread;d&&!d.stopped()||(d=this.thread=h({disabled:!a.useMultitasking})),c.stopped=!1,c.trigger({type:"layoutstart",layout:c}),e=!0===a.debug;var g=k(b,c,a);e&&n(g),o(g,b);var i=Date.now(),j=!1,l=function(c){c=c||{},j&&!c.next||!c.force&&Date.now()-i<a.animationThreshold||(j=!0,f.requestAnimationFrame(function(){p(g,b,a),!0===a.fit&&b.fit(a.padding),j=!1,c.next&&c.next()}))};d.on("message",function(a){var b=a.message;g.layoutNodes=b,l()}),d.pass({layoutInfo:g,options:{animate:a.animate,refresh:a.refresh,componentSpacing:a.componentSpacing,nodeOverlap:a.nodeOverlap,nestingFactor:a.nestingFactor,gravity:a.gravity,numIter:a.numIter,initialTemp:a.initialTemp,coolingFactor:a.coolingFactor,minTemp:a.minTemp}}).run(function(a){var b,c=a.layoutInfo,d=a.options,e=!1,f=function(a,b,c){g(a,b),k(a,b),l(a,b),m(a,b),n(a,b)},g=function(a,b){for(var c=0;c<a.graphSet.length;c++)for(var d=a.graphSet[c],e=d.length,f=0;e>f;f++)for(var g=a.layoutNodes[a.idToIndex[d[f]]],i=f+1;e>i;i++){var j=a.layoutNodes[a.idToIndex[d[i]]];h(g,j,a,b)}},h=function(a,b,c,d){var e=a.cmptId,f=b.cmptId;if(e===f||c.isCompound){var g=b.positionX-a.positionX,h=b.positionY-a.positionY;if(0!==g||0!==h){var k=i(a,b,g,h);if(k>0)var l=d.nodeOverlap*k,m=Math.sqrt(g*g+h*h),n=l*g/m,o=l*h/m;else var p=j(a,g,h),q=j(b,-1*g,-1*h),r=q.x-p.x,s=q.y-p.y,t=r*r+s*s,m=Math.sqrt(t),l=(a.nodeRepulsion+b.nodeRepulsion)/t,n=l*r/m,o=l*s/m;a.isLocked||(a.offsetX-=n,a.offsetY-=o),b.isLocked||(b.offsetX+=n,b.offsetY+=o)}}},i=function(a,b,c,d){if(c>0)var e=a.maxX-b.minX;else var e=b.maxX-a.minX;if(d>0)var f=a.maxY-b.minY;else var f=b.maxY-a.minY;return e>=0&&f>=0?Math.sqrt(e*e+f*f):0},j=function(a,b,c){var d=a.positionX,e=a.positionY,f=a.height||1,g=a.width||1,h=c/b,i=f/g,j={};do{if(0===b&&c>0){j.x=d,j.y=e+f/2;break}if(0===b&&0>c){j.x=d,j.y=e+f/2;break}if(b>0&&h>=-1*i&&i>=h){j.x=d+g/2,j.y=e+g*c/2/b;break}if(0>b&&h>=-1*i&&i>=h){j.x=d-g/2,j.y=e-g*c/2/b;break}if(c>0&&(-1*i>=h||h>=i)){j.x=d+f*b/2/c,j.y=e+f/2;break}if(0>c&&(-1*i>=h||h>=i)){j.x=d-f*b/2/c,j.y=e-f/2;break}}while(!1);return j},k=function(a,b){for(var c=0;c<a.edgeSize;c++){var d=a.layoutEdges[c],e=a.idToIndex[d.sourceId],f=a.layoutNodes[e],g=a.idToIndex[d.targetId],h=a.layoutNodes[g],i=h.positionX-f.positionX,k=h.positionY-f.positionY;if(0===i&&0===k)return;var l=j(f,i,k),m=j(h,-1*i,-1*k),n=m.x-l.x,o=m.y-l.y,p=Math.sqrt(n*n+o*o),q=Math.pow(d.idealLength-p,2)/d.elasticity;if(0!==p)var r=q*n/p,s=q*o/p;else var r=0,s=0;f.isLocked||(f.offsetX+=r,f.offsetY+=s),h.isLocked||(h.offsetX-=r,h.offsetY-=s)}},l=function(a,b){for(var c=1,d=0;d<a.graphSet.length;d++){var e=a.graphSet[d],f=e.length;if(0===d)var g=a.clientHeight/2,h=a.clientWidth/2;else var i=a.layoutNodes[a.idToIndex[e[0]]],j=a.layoutNodes[a.idToIndex[i.parentId]],g=j.positionX,h=j.positionY;for(var k=0;f>k;k++){var l=a.layoutNodes[a.idToIndex[e[k]]];if(!l.isLocked){var m=g-l.positionX,n=h-l.positionY,o=Math.sqrt(m*m+n*n);if(o>c){var p=b.gravity*m/o,q=b.gravity*n/o;l.offsetX+=p,l.offsetY+=q}}}}},m=function(a,b){var c=[],d=0,e=-1;for(c.push.apply(c,a.graphSet[0]),e+=a.graphSet[0].length;e>=d;){var f=c[d++],g=a.idToIndex[f],h=a.layoutNodes[g],i=h.children;if(0<i.length&&!h.isLocked){for(var j=h.offsetX,k=h.offsetY,l=0;l<i.length;l++){var m=a.layoutNodes[a.idToIndex[i[l]]];m.offsetX+=j,m.offsetY+=k,c[++e]=i[l]}h.offsetX=0,h.offsetY=0}}},n=function(a,b){for(var c=0;c<a.nodeSize;c++){var d=a.layoutNodes[c];0<d.children.length&&(d.maxX=void 0,d.minX=void 0,d.maxY=void 0,d.minY=void 0)}for(var c=0;c<a.nodeSize;c++){var d=a.layoutNodes[c];if(!(0<d.children.length||d.isLocked)){var e=o(d.offsetX,d.offsetY,a.temperature);d.positionX+=e.x,d.positionY+=e.y,d.offsetX=0,d.offsetY=0,d.minX=d.positionX-d.width,d.maxX=d.positionX+d.width,d.minY=d.positionY-d.height,d.maxY=d.positionY+d.height,p(d,a)}}for(var c=0;c<a.nodeSize;c++){var d=a.layoutNodes[c];0<d.children.length&&!d.isLocked&&(d.positionX=(d.maxX+d.minX)/2,d.positionY=(d.maxY+d.minY)/2,d.width=d.maxX-d.minX,d.height=d.maxY-d.minY)}},o=function(a,b,c){var d=Math.sqrt(a*a+b*b);if(d>c)var e={x:c*a/d,y:c*b/d};else var e={x:a,y:b};return e},p=function(a,b){var c=a.parentId;if(null!=c){var d=b.layoutNodes[b.idToIndex[c]],e=!1;return(null==d.maxX||a.maxX+d.padRight>d.maxX)&&(d.maxX=a.maxX+d.padRight,e=!0),(null==d.minX||a.minX-d.padLeft<d.minX)&&(d.minX=a.minX-d.padLeft,e=!0),(null==d.maxY||a.maxY+d.padBottom>d.maxY)&&(d.maxY=a.maxY+d.padBottom,e=!0),(null==d.minY||a.minY-d.padTop<d.minY)&&(d.minY=a.minY-d.padTop,e=!0),e?p(d,b):void 0}},q=function(a,b){for(var d=c.layoutNodes,e=[],f=0;f<d.length;f++){var g=d[f],h=g.cmptId,i=e[h]=e[h]||[];i.push(g)}for(var j=0,f=0;f<e.length;f++){var k=e[f];k.x1=1/0,k.x2=-(1/0),k.y1=1/0,k.y2=-(1/0);for(var l=0;l<k.length;l++){var m=k[l];k.x1=Math.min(k.x1,m.positionX-m.width/2),k.x2=Math.max(k.x2,m.positionX+m.width/2),k.y1=Math.min(k.y1,m.positionY-m.height/2),k.y2=Math.max(k.y2,m.positionY+m.height/2)}k.w=k.x2-k.x1,k.h=k.y2-k.y1,j+=k.w*k.h}e.sort(function(a,b){return b.w*b.h-a.w*a.h});for(var n=0,o=0,p=0,q=0,r=Math.sqrt(j)*c.clientWidth/c.clientHeight,f=0;f<e.length;f++){for(var k=e[f],l=0;l<k.length;l++){var m=k[l];m.isLocked||(m.positionX+=n,m.positionY+=o)}n+=k.w+b.componentSpacing,p+=k.w+b.componentSpacing,q=Math.max(q,k.h),p>r&&(o+=q+b.componentSpacing,n=0,p=0,q=0)}},r=function(a){return!e&&(f(c,d,a),c.temperature=c.temperature*d.coolingFactor,!(c.temperature<d.minTemp))},s=0;do{for(var t=0;t<d.refresh&&s<d.numIter;){var b=r(s);if(!b)break;t++,s++}d.animate&&broadcast(c.layoutNodes)}while(b&&s+1<d.numIter);return q(c,d),c}).then(function(a){g.layoutNodes=a.layoutNodes,d.stop(),m()});var m=function(){l({force:!0,next:function(){c.one("layoutstop",a.stop),c.trigger({type:"layoutstop",layout:c})}})};return this},d.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.trigger("layoutstop"),this},d.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var k=function(a,b,c){for(var d=c.eles.edges(),e=c.eles.nodes(),f={isCompound:a.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:e.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:d.size(),temperature:c.initialTemp,clientWidth:a.width(),clientHeight:a.width(),boundingBox:g.makeBoundingBox(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:a.width(),h:a.height()})},h=c.eles.components(),j={},k=0;k<h.length;k++)for(var m=h[k],n=0;n<m.length;n++){var o=m[n];j[o.id()]=k}for(var k=0;k<f.nodeSize;k++){var p=e[k],q=p.boundingBox(),r={};r.isLocked=p.locked(),r.id=p.data("id"),r.parentId=p.data("parent"),r.cmptId=j[p.id()],r.children=[],r.positionX=p.position("x"),r.positionY=p.position("y"),r.offsetX=0,r.offsetY=0,r.height=q.w,r.width=q.h,r.maxX=r.positionX+r.width/2,r.minX=r.positionX-r.width/2,r.maxY=r.positionY+r.height/2,r.minY=r.positionY-r.height/2,r.padLeft=parseFloat(p.style("padding-left")),r.padRight=parseFloat(p.style("padding-right")),r.padTop=parseFloat(p.style("padding-top")),r.padBottom=parseFloat(p.style("padding-bottom")),r.nodeRepulsion=i.fn(c.nodeRepulsion)?c.nodeRepulsion.call(p,p):c.nodeRepulsion,f.layoutNodes.push(r),f.idToIndex[r.id]=k}for(var s=[],t=0,u=-1,v=[],k=0;k<f.nodeSize;k++){var p=f.layoutNodes[k],w=p.parentId;null!=w?f.layoutNodes[f.idToIndex[w]].children.push(p.id):(s[++u]=p.id,v.push(p.id))}for(f.graphSet.push(v);u>=t;){var x=s[t++],y=f.idToIndex[x],o=f.layoutNodes[y],z=o.children;if(z.length>0){f.graphSet.push(z);for(var k=0;k<z.length;k++)s[++u]=z[k]}}for(var k=0;k<f.graphSet.length;k++)for(var A=f.graphSet[k],n=0;n<A.length;n++){var B=f.idToIndex[A[n]];f.indexToGraph[B]=k}for(var k=0;k<f.edgeSize;k++){var C=d[k],D={};D.id=C.data("id"),D.sourceId=C.data("source"),D.targetId=C.data("target");var E=i.fn(c.idealEdgeLength)?c.idealEdgeLength.call(C,C):c.idealEdgeLength,F=i.fn(c.edgeElasticity)?c.edgeElasticity.call(C,C):c.edgeElasticity,G=f.idToIndex[D.sourceId],H=f.idToIndex[D.targetId],I=f.indexToGraph[G],J=f.indexToGraph[H];if(I!=J){for(var K=l(D.sourceId,D.targetId,f),L=f.graphSet[K],M=0,r=f.layoutNodes[G];-1===L.indexOf(r.id);)r=f.layoutNodes[f.idToIndex[r.parentId]],M++;for(r=f.layoutNodes[H];-1===L.indexOf(r.id);)r=f.layoutNodes[f.idToIndex[r.parentId]],M++;E*=M*c.nestingFactor}D.idealLength=E,D.elasticity=F,f.layoutEdges.push(D)}return f},l=function(a,b,c){var d=m(a,b,0,c);return 2>d.count?0:d.graph},m=function(a,b,c,d){var e=d.graphSet[c];if(-1<e.indexOf(a)&&-1<e.indexOf(b))return{count:2,graph:c};for(var f=0,g=0;g<e.length;g++){var h=e[g],i=d.idToIndex[h],j=d.layoutNodes[i].children;if(0!==j.length){var k=d.indexToGraph[d.idToIndex[j[0]]],l=m(a,b,k,d);if(0!==l.count){if(1!==l.count)return l;if(f++,2===f)break}}}return{count:f,graph:c}},n=function(a){if(e){console.debug("layoutNodes:");for(var b=0;b<a.nodeSize;b++){var c=a.layoutNodes[b],d="\nindex: "+b+"\nId: "+c.id+"\nChildren: "+c.children.toString()+"\nparentId: "+c.parentId+"\npositionX: "+c.positionX+"\npositionY: "+c.positionY+"\nOffsetX: "+c.offsetX+"\nOffsetY: "+c.offsetY+"\npadLeft: "+c.padLeft+"\npadRight: "+c.padRight+"\npadTop: "+c.padTop+"\npadBottom: "+c.padBottom;console.debug(d)}console.debug("idToIndex");for(var b in a.idToIndex)console.debug("Id: "+b+"\nIndex: "+a.idToIndex[b]);console.debug("Graph Set");for(var f=a.graphSet,b=0;b<f.length;b++)console.debug("Set : "+b+": "+f[b].toString());for(var d="IndexToGraph",b=0;b<a.indexToGraph.length;b++)d+="\nIndex : "+b+" Graph: "+a.indexToGraph[b];console.debug(d),d="Layout Edges";for(var b=0;b<a.layoutEdges.length;b++){var g=a.layoutEdges[b];d+="\nEdge Index: "+b+" ID: "+g.id+" SouceID: "+g.sourceId+" TargetId: "+g.targetId+" Ideal Length: "+g.idealLength}console.debug(d),d="nodeSize: "+a.nodeSize,d+="\nedgeSize: "+a.edgeSize,d+="\ntemperature: "+a.temperature,console.debug(d)}},o=function(a,b){for(var c=a.clientWidth,d=a.clientHeight,e=0;e<a.nodeSize;e++){var f=a.layoutNodes[e];0!==f.children.length||f.isLocked||(f.positionX=Math.random()*c,f.positionY=Math.random()*d)}},p=function(a,b,c){var d=c.layout,e=c.eles.nodes(),f=a.boundingBox,g={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)};c.boundingBox&&(e.forEach(function(b){var c=a.layoutNodes[a.idToIndex[b.data("id")]];g.x1=Math.min(g.x1,c.positionX),g.x2=Math.max(g.x2,c.positionX),g.y1=Math.min(g.y1,c.positionY),g.y2=Math.max(g.y2,c.positionY)}),g.w=g.x2-g.x1,g.h=g.y2-g.y1),e.positions(function(b,d){var e=a.layoutNodes[a.idToIndex[d.data("id")]];if(c.boundingBox){var h=(e.positionX-g.x1)/g.w,i=(e.positionY-g.y1)/g.h;return{x:f.x1+h*f.w,y:f.y1+i*f.h}}return{x:e.positionX,y:e.positionY}}),!0!==a.ready&&(a.ready=!0,d.one("layoutready",c.ready),d.trigger({type:"layoutready",layout:this}))};b.exports=d},{"../../is":77,"../../math":79,"../../thread":92,"../../util":94}],49:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},g,a)}var e=a("../../util"),f=a("../../math"),g={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:function(a){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};d.prototype.run=function(){var a=this.options,b=a,c=a.cy,d=b.eles,e=d.nodes().not(":parent");b.sort&&(e=e.sort(b.sort));var g=f.makeBoundingBox(b.boundingBox?b.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()});if(0===g.h||0===g.w)e.layoutPositions(this,b,function(){return{x:g.x1,y:g.y1}});else{var h=e.size(),i=Math.sqrt(h*g.h/g.w),j=Math.round(i),k=Math.round(g.w/g.h*i),l=function(a){if(null==a)return Math.min(j,k);var b=Math.min(j,k);b==j?j=a:k=a},m=function(a){if(null==a)return Math.max(j,k);var b=Math.max(j,k);b==j?j=a:k=a},n=b.rows,o=null!=b.cols?b.cols:b.columns;if(null!=n&&null!=o)j=n,k=o;else if(null!=n&&null==o)j=n,k=Math.ceil(h/j);else if(null==n&&null!=o)k=o,j=Math.ceil(h/k);else if(k*j>h){var p=l(),q=m();(p-1)*q>=h?l(p-1):(q-1)*p>=h&&m(q-1)}else for(;h>k*j;){var p=l(),q=m();(q+1)*p>=h?m(q+1):l(p+1)}var r=g.w/k,s=g.h/j;if(b.condense&&(r=0,s=0),b.avoidOverlap)for(var t=0;t<e.length;t++){var u=e[t],v=u._private.position;null!=v.x&&null!=v.y||(v.x=0,v.y=0);var w=u.boundingBox(),x=b.avoidOverlapPadding,y=w.w+x,z=w.h+x;r=Math.max(r,y),s=Math.max(s,z)}for(var A={},B=function(a,b){return!!A["c-"+a+"-"+b]},C=function(a,b){A["c-"+a+"-"+b]=!0},D=0,E=0,F=function(){E++,E>=k&&(E=0,D++)},G={},t=0;t<e.length;t++){var u=e[t],H=b.position(u);if(H&&(void 0!==H.row||void 0!==H.col)){var v={row:H.row,col:H.col};if(void 0===v.col)for(v.col=0;B(v.row,v.col);)v.col++;else if(void 0===v.row)for(v.row=0;B(v.row,v.col);)v.row++;G[u.id()]=v,C(v.row,v.col)}}var I=function(a,b){var c,d;if(b.locked()||b.isFullAutoParent())return!1;var e=G[b.id()];if(e)c=e.col*r+r/2+g.x1,d=e.row*s+s/2+g.y1;else{for(;B(D,E);)F();c=E*r+r/2+g.x1,d=D*s+s/2+g.y1,C(D,E),F()}return{x:c,y:d}};e.layoutPositions(this,b,I)}return this},b.exports=d},{"../../math":79,"../../util":94}],50:[function(a,b,c){"use strict";b.exports=[{name:"breadthfirst",impl:a("./breadthfirst")},{name:"circle",impl:a("./circle")},{name:"concentric",impl:a("./concentric")},{name:"cose",impl:a("./cose")},{name:"grid",impl:a("./grid")},{name:"null",impl:a("./null")},{name:"preset",impl:a("./preset")},{name:"random",impl:a("./random")}]},{"./breadthfirst":45,"./circle":46,"./concentric":47,"./cose":48,"./grid":49,"./null":51,"./preset":52,"./random":53}],51:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},f,a)}var e=a("../../util"),f={ready:function(){},stop:function(){}};d.prototype.run=function(){var a=this.options,b=a.eles,c=this;return a.cy,c.trigger("layoutstart"),b.nodes().positions(function(){return{x:0,y:0}}),c.one("layoutready",a.ready),c.trigger("layoutready"),c.one("layoutstop",a.stop),c.trigger("layoutstop"),this},d.prototype.stop=function(){return this},b.exports=d},{"../../util":94}],52:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},g,a)}var e=a("../../util"),f=a("../../is"),g={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};d.prototype.run=function(){function a(a){if(null==b.positions)return null;if(e)return b.positions.apply(a,[a]);var c=b.positions[a._private.data.id];return null==c?null:c}var b=this.options,c=b.eles,d=c.nodes(),e=f.fn(b.positions);return d.layoutPositions(this,b,function(b,c){var d=a(c);return!c.locked()&&null!=d&&d}),this},b.exports=d},{"../../is":77,"../../util":94}],53:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},g,a)}var e=a("../../util"),f=a("../../math"),g={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};d.prototype.run=function(){var a=this.options,b=a.cy,c=a.eles,d=c.nodes().not(":parent"),e=f.makeBoundingBox(a.boundingBox?a.boundingBox:{x1:0,y1:0,w:b.width(),h:b.height()}),g=function(a,b){return{x:e.x1+Math.round(Math.random()*e.w),y:e.y1+Math.round(Math.random()*e.h)}};return d.layoutPositions(this,a,g),this},b.exports=d},{"../../math":79,"../../util":94}],54:[function(a,b,c){"use strict";var d=a("../../../math"),e=a("../../../is"),f=a("../../../util"),g={};g.arrowShapeHeight=.3,g.registerArrowShapes=function(){var a=this.arrowShapes={},b=this,c=function(a,b,c,d,e,f){var g=e.x-c/2-f,h=e.x+c/2+f,i=e.y-c/2-f,j=e.y+c/2+f,k=a>=g&&h>=a&&b>=i&&j>=b;return k},g=function(a,b,c,d,e){var f=a*Math.cos(d)-b*Math.sin(d),g=a*Math.sin(d)+b*Math.cos(d),h=f*c,i=g*c,j=h+e.x,k=i+e.y;return{x:j,y:k}},h=function(a,b,c,d){for(var e=[],f=0;f<a.length;f+=2){var h=a[f],i=a[f+1];e.push(g(h,i,b,c,d))}return e},i=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push(d.x,d.y)}return b},j=function(g,j){e.string(j)&&(j=a[j]),a[g]=f.extend({name:g,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(a,b,c,e,f,g){var j=i(h(this.points,c+2*g,e,f)),k=d.pointInsidePolygonPoints(a,b,j);return k},roughCollide:c,draw:function(a,c,d,e){var f=h(this.points,c,d,e);b.arrowShapeImpl("polygon")(a,f)},spacing:function(a){return 0},gap:function(a){return 2*a._private.style.width.pfValue}},j)};j("none",{collide:f.falsify,roughCollide:f.falsify,draw:f.noop,spacing:f.zeroify,gap:f.zeroify}),j("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),j("arrow","triangle"),j("triangle-backcurve",{points:a.triangle.points,controlPoint:[0,-.15],roughCollide:c,draw:function(a,c,d,e){var f=h(this.points,c,d,e),i=this.controlPoint,j=g(i[0],i[1],c,d,e);b.arrowShapeImpl(this.name)(a,f,j)},gap:function(a){return a._private.style.width.pfValue}}),j("triangle-tee",{points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(a,b,c,e,f,g){var j=i(h(this.points,c+2*g,e,f)),k=i(h(this.pointsTee,c+2*g,e,f)),l=d.pointInsidePolygonPoints(a,b,j)||d.pointInsidePolygonPoints(a,b,k);return l},draw:function(a,c,d,e){var f=h(this.points,c,d,e),g=h(this.pointsTee,c,d,e);b.arrowShapeImpl(this.name)(a,f,g)}}),j("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(a){return a._private.style.width.pfValue}}),j("half-triangle-overshot",{points:[0,-.25,-.5,-.25,.5,.25],leavePathOpen:!0,matchEdgeWidth:!0}),j("circle",{radius:.15,collide:function(a,b,c,d,e,f){var g=e,h=Math.pow(g.x-a,2)+Math.pow(g.y-b,2)<=Math.pow((c+2*f)*this.radius,2);return h},draw:function(a,c,d,e){b.arrowShapeImpl(this.name)(a,e.x,e.y,this.radius*c)},spacing:function(a){return b.getArrowWidth(a._private.style.width.pfValue)*this.radius}}),j("inhibitor",{points:[-.25,0,-.25,-.1,.25,-.1,.25,0],spacing:function(a){return 1},gap:function(a){return 1}}),j("tee","inhibitor"),j("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),j("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(a){return a._private.style.width.pfValue}})},b.exports=g},{"../../../is":77,"../../../math":79,"../../../util":94}],55:[function(a,b,c){"use strict";var d={},e=function(a){a.eleEache=null},f=function(a){return a.eleEache||(a.eleEache={nodes:a.cy.nodes(),edges:a.cy.edges()}),a.eleEache};d.getCachedElements=function(){return f(this)},d.getCachedNodes=function(){return f(this).nodes},d.getCachedEdges=function(){return f(this).edges},d.updateElementsCache=function(){var a=this;return e(a),f(a)},b.exports=d},{}],56:[function(a,b,c){"use strict";function d(a,b){var c=function(a,b,c,d){return e.qbezierAt(a,b,c,d)},d=a._private,f=d.rstyle.bezierPts;f.push({x:c(b[0],b[2],b[4],.05),y:c(b[1],b[3],b[5],.05)}),f.push({x:c(b[0],b[2],b[4],.25),y:c(b[1],b[3],b[5],.25)}),f.push({x:c(b[0],b[2],b[4],.4),y:c(b[1],b[3],b[5],.4)}),f.push({x:c(b[0],b[2],b[4],.5),y:c(b[1],b[3],b[5],.5)}),f.push({x:c(b[0],b[2],b[4],.6),y:c(b[1],b[3],b[5],.6)}),f.push({x:c(b[0],b[2],b[4],.75),y:c(b[1],b[3],b[5],.75)}),f.push({x:c(b[0],b[2],b[4],.95),y:c(b[1],b[3],b[5],.95)})}var e=a("../../../math"),f=a("../../../is"),g=a("../../../collection/zsort"),h={};h.projectIntoViewport=function(a,b){var c=this.findContainerClientCoords(),d=c[0],e=c[1],f=a-d,g=b-e;return f-=this.cy.pan().x,g-=this.cy.pan().y,f/=this.cy.zoom(),g/=this.cy.zoom(),[f,g]},h.findContainerClientCoords=function(){var a=this.container,b=this.containerBB=this.containerBB||a.getBoundingClientRect();return[b.left,b.top,b.right-b.left,b.bottom-b.top]},h.invalidateContainerClientCoordsCache=function(){this.containerBB=null},h.findNearestElement=function(a,b,c,d){function f(d){var e=d._private;if("no"!==e.style.events.strValue){var f=d.outerWidth()+2*p,g=d.outerHeight()+2*p,h=f/2,k=g/2,m=e.position;if(m.x-h<=a&&a<=m.x+h&&m.y-k<=b&&b<=m.y+k){var n=!c||d.visible()&&!d.transparent();if(c&&!n)return;var o=j.nodeShapes[i.getNodeShape(d)];o.checkPoint(a,b,0,f,g,m.x,m.y)&&l.push(d)}}}function g(d){var g=d._private;if("no"!==g.style.events.strValue){var h,k,m=g.rscratch,p=g.style,q=p.width.pfValue/2+o,r=q*q,s=2*q,t=g.source,u=g.target,v=!1,w=function(){if(void 0!==k)return k;if(!c)return k=!0,!0;var a=d.visible()&&!d.transparent();return a?(k=!0,!0):(k=!1,!1)};if("segments"===m.edgeType||"straight"===m.edgeType||"haystack"===m.edgeType)for(var x=m.allpts,y=0;y+3<x.length;y+=2)(v=e.inLineVicinity(a,b,x[y],x[y+1],x[y+2],x[y+3],s))&&w()&&r>(h=e.sqDistanceToFiniteLine(a,b,x[y],x[y+1],x[y+2],x[y+3]))&&l.push(d);else if("bezier"===m.edgeType||"multibezier"===m.edgeType||"self"===m.edgeType||"compound"===m.edgeType)for(var x=m.allpts,y=0;y+5<m.allpts.length;y+=4)(v=e.inBezierVicinity(a,b,x[y],x[y+1],x[y+2],x[y+3],x[y+4],x[y+5],s))&&w()&&r>(h=e.sqDistanceToQuadraticBezier(a,b,x[y],x[y+1],x[y+2],x[y+3],x[y+4],x[y+5]))&&l.push(d);if(v&&w()&&0===l.length||l[l.length-1]!==d)for(var t=t||g.source,u=u||g.target,z=p.width.pfValue,A=i.getArrowWidth(z),B=[{name:"source",x:m.arrowStartX,y:m.arrowStartY,angle:m.srcArrowAngle},{name:"target",x:m.arrowEndX,y:m.arrowEndY,angle:m.tgtArrowAngle},{name:"mid-source",x:m.midX,y:m.midY,angle:m.midsrcArrowAngle},{name:"mid-target",x:m.midX,y:m.midY,angle:m.midtgtArrowAngle}],y=0;y<B.length;y++){var C=B[y],D=j.arrowShapes[p[C.name+"-arrow-shape"].value];if(D.roughCollide(a,b,A,C.angle,{x:C.x,y:C.y},o)&&D.collide(a,b,A,C.angle,{x:C.x,y:C.y},o)){l.push(d);break}}n&&l.length>0&&l[l.length-1]===d&&(f(t),f(u))}}function h(c){var d=c._private,f=q;if("no"!==d.style["text-events"].strValue)if("edges"===d.group&&"autorotate"===d.style["edge-text-rotation"].strValue){var g=d.rstyle,h=g.labelWidth+2*f,i=g.labelHeight+2*f,j=g.labelX,k=g.labelY,m=d.rscratch.labelAngle,n=Math.cos(m),o=Math.sin(m),p=function(a,b){return a-=j,b-=k,{x:a*n-b*o+j,y:a*o+b*n+k}},r=j-h/2,s=j+h/2,t=k-i/2,u=k+i/2,v=p(r,t),w=p(r,u),x=p(s,t),y=p(s,u),z=[v.x,v.y,x.x,x.y,y.x,y.y,w.x,w.y];e.pointInsidePolygonPoints(a,b,z)&&l.push(c)}else{var A=c.boundingBox({includeLabels:!0,includeNodes:!1,includeEdges:!1});A.x1-=f,A.y1-=f,A.x2+=f,A.y2+=f,A.w=A.x2-A.x1,A.h=A.y2-A.y1,e.inBoundingBox(A,a,b)&&l.push(c)}}for(var i=this,j=this,k=j.getCachedZSortedEles(),l=[],m=j.cy.zoom(),n=j.cy.hasCompoundNodes(),o=(d?24:8)/m,p=(d?8:2)/m,q=(d?8:2)/m,r=k.length-1;r>=0;r--){var s=k[r],t=s._private;if(l.length>0)break;"nodes"===t.group?f(s):g(s),h(s)}return l.length>0?l[l.length-1]:null},h.getAllInBox=function(a,b,c,d){var f=this.getCachedNodes(),g=this.getCachedEdges(),h=[],i=Math.min(a,c),j=Math.max(a,c),k=Math.min(b,d),l=Math.max(b,d);a=i,c=j,b=k,d=l;for(var m=e.makeBoundingBox({x1:a,y1:b,x2:c,y2:d}),n=0;n<f.length;n++){var o=f[n],p=o.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});e.boundingBoxesIntersect(m,p)&&h.push(f[n])}for(var q=0;q<g.length;q++){var r=g[q],s=r._private,t=s.rscratch;if((null==t.startX||null==t.startY||e.inBoundingBox(m,t.startX,t.startY))&&(null==t.endX||null==t.endY||e.inBoundingBox(m,t.endX,t.endY)))if("bezier"===t.edgeType||"multibezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType||"segments"===t.edgeType||"haystack"===t.edgeType){for(var u=s.rstyle.bezierPts||s.rstyle.linePts||s.rstyle.haystackPts,v=!0,n=0;n<u.length;n++)if(!e.pointInBoundingBox(m,u[n])){v=!1;break}v&&h.push(r)}else"haystack"!==t.edgeType&&"straight"!==t.edgeType||h.push(r)}return h},h.getNodeShape=function(a){var b=this,c=a._private.style,d=c.shape.value;if(a.isParent())return"rectangle"===d||"roundrectangle"===d?d:"rectangle";if("polygon"===d){var e=c["shape-polygon-points"].value;return b.nodeShapes.makePolygon(e).name}return d},h.updateCachedZSortedEles=function(){this.getCachedZSortedEles(!0)},h.getCachedZSortedEles=function(a){var b=this.lastZOrderCachedNodes,c=this.lastZOrderCachedEdges,d=this.getCachedNodes(),e=this.getCachedEdges(),f=[];if(!a&&b&&c&&b===d&&c===e)f=this.cachedZSortedEles;else{for(var h=0;h<d.length;h++){var i=d[h];(i.animated()||i.visible()&&!i.transparent())&&f.push(i)}for(var h=0;h<e.length;h++){var j=e[h];(j.animated()||j.visible()&&!j.transparent())&&f.push(j)}f.sort(g),this.cachedZSortedEles=f}return this.lastZOrderCachedNodes=d,this.lastZOrderCachedEdges=e,f},h.projectLines=function(a){var b=a._private,c=b.rscratch,e=c.edgeType;if("multibezier"===e||"bezier"===e||"self"===e||"compound"===e)for(var f=(b.rstyle.bezierPts=[],0);f+5<c.allpts.length;f+=4)d(a,c.allpts.slice(f,f+6));else if("segments"===e)for(var g=b.rstyle.linePts=[],f=0;f+1<c.allpts.length;f+=2)g.push({x:c.allpts[f],y:c.allpts[f+1]});else if("haystack"===e){var h=c.haystackPts;b.rstyle.haystackPts=[{x:h[0],y:h[1]},{x:h[2],y:h[3]}]}},h.projectBezier=h.projectLines,h.recalculateNodeLabelProjection=function(a){var b=a._private.style.label.strValue;if(b&&!b.match(/^\s+$/)){var c,d,e=a.outerWidth(),f=a.outerHeight(),g=a._private.position,h=a._private.style["text-halign"].strValue,i=a._private.style["text-valign"].strValue,j=a._private.rscratch,k=a._private.rstyle;switch(h){case"left":c=g.x-e/2;break;case"right":c=g.x+e/2;break;default:c=g.x}switch(i){case"top":d=g.y-f/2;break;case"bottom":d=g.y+f/2;break;default:d=g.y}j.labelX=c,j.labelY=d,k.labelX=c,k.labelY=d,this.applyLabelDimensions(a)}},h.recalculateEdgeLabelProjection=function(a){var b=a._private.style.label.strValue;if(b&&!b.match(/^\s+$/)){var c,d,e=a._private,f=e.rscratch,g=e.rstyle;c=f.midX,d=f.midY,f.labelX=c,f.labelY=d,g.labelX=c,g.labelY=d,this.applyLabelDimensions(a)}},h.applyLabelDimensions=function(a){var b=a._private.rscratch,c=a._private.rstyle,d=this.getLabelText(a),e=this.calculateLabelDimensions(a,d);c.labelWidth=e.width,b.labelWidth=e.width,c.labelHeight=e.height,b.labelHeight=e.height},h.getLabelText=function(a){var b=a._private.style,c=a._private.style.label.strValue,d=b["text-transform"].value,e=a._private.rscratch;if("none"==d||("uppercase"==d?c=c.toUpperCase():"lowercase"==d&&(c=c.toLowerCase())),"wrap"===b["text-wrap"].value){if(e.labelWrapKey&&e.labelWrapKey===e.labelKey)return e.labelWrapCachedText;for(var f=c.split("\n"),g=b["text-max-width"].pfValue,h=[],i=0;i<f.length;i++){var j=f[i],k=this.calculateLabelDimensions(a,j,"line="+j),l=k.width;if(l>g){for(var m=j.split(/\s+/),n="",o=0;o<m.length;o++){var p=m[o],q=0===n.length?p:n+" "+p,r=this.calculateLabelDimensions(a,q,"testLine="+q),s=r.width;g>=s?n+=p+" ":(h.push(n),n=p+" ")}n.match(/^\s+$/)||h.push(n)}else h.push(j)}e.labelWrapCachedLines=h,e.labelWrapCachedText=c=h.join("\n"),e.labelWrapKey=e.labelKey}return c},h.calculateLabelDimensions=function(a,b,c){var d=this,e=a._private.style,f=e["font-style"].strValue,g=e["font-size"].pfValue+"px",h=e["font-family"].strValue,i=e["font-weight"].strValue,j=a._private.labelKey;c&&(j+="$@$"+c);var k=d.labelDimCache||(d.labelDimCache={});if(k[j])return k[j];var l=this.labelCalcDiv;l||(l=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(l));var m=l.style;return m.fontFamily=h,m.fontStyle=f,m.fontSize=g,m.fontWeight=i,m.position="absolute",m.left="-9999px",m.top="-9999px",m.zIndex="-1",m.visibility="hidden",m.pointerEvents="none",m.padding="0",m.lineHeight="1","wrap"===e["text-wrap"].value?m.whiteSpace="pre":m.whiteSpace="normal",l.textContent=b,k[j]={width:l.clientWidth,height:l.clientHeight},k[j]},h.recalculateRenderedStyle=function(a){for(var b=[],c=[],d={},e=0;e<a.length;e++){var f=a[e],g=f._private,h=g.style,i=g.rscratch,j=g.rstyle,k=g.data.id,l=null!=i.boundingBoxKey&&g.boundingBoxKey===i.boundingBoxKey,m=null!=i.labelKey&&g.labelKey===i.labelKey,n=l&&m;if("nodes"===g.group){var o=g.position,p=null!=j.nodeX&&null!=j.nodeY&&o.x===j.nodeX&&o.y===j.nodeY,q=null!=j.nodeW&&j.nodeW===h.width.pfValue,r=null!=j.nodeH&&j.nodeH===h.height.pfValue;p&&n&&q&&r||c.push(f),j.nodeX=o.x,j.nodeY=o.y,j.nodeW=h.width.pfValue,j.nodeH=h.height.pfValue}else{var s=g.source._private.position,t=g.target._private.position,u=null!=j.srcX&&null!=j.srcY&&s.x===j.srcX&&s.y===j.srcY,v=null!=j.tgtX&&null!=j.tgtY&&t.x===j.tgtX&&t.y===j.tgtY,w=u&&v;if(!w||!n)if("bezier"===i.edgeType||"straight"===i.edgeType||"self"===i.edgeType||"compound"===i.edgeType){if(!d[k]){b.push(f),d[k]=!0;for(var x=f.parallelEdges(),e=0;e<x.length;e++){var y=x[e],z=y._private.data.id;d[z]||(b.push(y),d[z]=!0)}}}else b.push(f);j.srcX=s.x,j.srcY=s.y,j.tgtX=t.x,j.tgtY=t.y}i.boundingBoxKey=g.boundingBoxKey,i.labelKey=g.labelKey}this.recalculateEdgeProjections(b),this.recalculateLabelProjections(c,b)},h.recalculateLabelProjections=function(a,b){for(var c=0;c<a.length;c++)this.recalculateNodeLabelProjection(a[c]);for(var c=0;c<b.length;c++)this.recalculateEdgeLabelProjection(b[c])},h.recalculateEdgeProjections=function(a){this.findEdgeControlPoints(a)},h.findEdgeControlPoints=function(a){if(a&&0!==a.length){for(var b,c=this,d=c.cy,g=d.hasCompoundNodes(),h={},i=[],j=[],k=[],l=0;l<a.length;l++){var m=a[l],n=m._private,o=n.data,p=n.style,q=p["curve-style"].value,r="unbundled-bezier"===q||"segments"===q;if("none"!==p.display.value)if("autorotate"===p["edge-text-rotation"].strValue&&k.push(m),"haystack"!==q){var s=o.source,t=o.target;b=s>t?t+"$-$"+s:s+"$-$"+t,r&&(b="unbundled$-$"+o.id),null==h[b]&&(h[b]=[],i.push(b)),h[b].push(m),r&&(h[b].hasUnbundled=!0)}else j.push(m)}for(var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I=0;I<i.length;I++){b=i[I];var J=h[b];if(J.sort(function(a,b){return a._private.index-b._private.index}),u=J[0]._private.source,v=J[0]._private.target,w=u._private,x=v._private,w.data.id>x.data.id){var K=u;u=v,v=K}if(y=w.position,z=x.position,A=u.outerWidth(),B=u.outerHeight(),C=v.outerWidth(),D=v.outerHeight(),E=c.nodeShapes[this.getNodeShape(u)],F=c.nodeShapes[this.getNodeShape(v)],H=!1,J.length>1&&u!==v||J.hasUnbundled){var L=E.intersectLine(y.x,y.y,A,B,z.x,z.y,0),M=F.intersectLine(z.x,z.y,C,D,y.x,y.y,0),N={x1:L[0],x2:M[0],y1:L[1],y2:M[1]},O=M[1]-L[1],P=M[0]-L[0],Q=Math.sqrt(P*P+O*O),R={x:P,y:O},S={x:R.x/Q,y:R.y/Q};G={x:-S.y,y:S.x},(F.checkPoint(L[0],L[1],0,C,D,z.x,z.y)||E.checkPoint(M[0],M[1],0,A,B,y.x,y.y))&&(G={},H=!0)}for(var m,T,U,l=0;l<J.length;l++){m=J[l],T=m._private,
U=T.rscratch;var V=U.lastEdgeIndex,W=l,X=U.lastNumEdges,Y=J.length,Z=T.style,p=Z,q=Z["curve-style"].value,$=Z["control-point-distances"],_=Z["control-point-weights"],aa=$&&_?Math.min($.value.length,_.value.length):1,ba=Z["control-point-step-size"].pfValue,ca=void 0!==$?$.pfValue[0]:void 0,da=_.value[0],r="unbundled-bezier"===q||"segments"===q,ea=T.source!==u;ea&&r&&(ca*=-1);var fa=U.lastSrcCtlPtX,ga=y.x,ha=U.lastSrcCtlPtY,ia=y.y,ja=U.lastSrcCtlPtW,ka=u.outerWidth(),la=U.lastSrcCtlPtH,ma=u.outerHeight(),na=U.lastTgtCtlPtX,oa=z.x,pa=U.lastTgtCtlPtY,qa=z.y,ra=U.lastTgtCtlPtW,sa=v.outerWidth(),ta=U.lastTgtCtlPtH,ua=v.outerHeight(),va=U.lastW,wa=Z["control-point-step-size"].pfValue;if(H?U.badBezier=!0:U.badBezier=!1,fa!==ga||ha!==ia||ja!==ka||la!==ma||na!==oa||pa!==qa||ra!==sa||ta!==ua||va!==wa||!(V===W&&X===Y||r)){if(U.lastSrcCtlPtX=ga,U.lastSrcCtlPtY=ia,U.lastSrcCtlPtW=ka,U.lastSrcCtlPtH=ma,U.lastTgtCtlPtX=oa,U.lastTgtCtlPtY=qa,U.lastTgtCtlPtW=sa,U.lastTgtCtlPtH=ua,U.lastEdgeIndex=W,U.lastNumEdges=Y,U.lastWidth=wa,u===v){U.edgeType="self";var xa=l,ya=ba;r&&(xa=0,ya=ca),U.ctrlpts=[y.x,y.y-(1+Math.pow(B,1.12)/100)*ya*(xa/3+1),y.x-(1+Math.pow(A,1.12)/100)*ya*(xa/3+1),y.y]}else if(g&&(u.isParent()||u.isChild()||v.isParent()||v.isChild())&&(u.parents().anySame(v)||v.parents().anySame(u))){U.edgeType="compound",U.badBezier=!1;var xa=l,ya=ba;r&&(xa=0,ya=ca);var za=50,Aa={x:y.x-A/2,y:y.y-B/2},Ba={x:z.x-C/2,y:z.y-D/2},Ca={x:Math.min(Aa.x,Ba.x),y:Math.min(Aa.y,Ba.y)},Da=.5,Ea=Math.max(Da,Math.log(.01*A)),Fa=Math.max(Da,Math.log(.01*C));U.ctrlpts=[Ca.x,Ca.y-(1+Math.pow(za,1.12)/100)*ya*(xa/3+1)*Ea,Ca.x-(1+Math.pow(za,1.12)/100)*ya*(xa/3+1)*Fa,Ca.y]}else if("segments"===q){U.edgeType="segments",U.segpts=[];for(var Ga=Z["segment-weights"].pfValue,Ha=Z["segment-distances"].pfValue,Ia=Math.min(Ga.length,Ha.length),Ja=0;Ia>Ja;Ja++){var Ka=Ga[Ja],La=Ha[Ja],Ma=1-Ka,Na=Ka,Oa={x:N.x1*Ma+N.x2*Na,y:N.y1*Ma+N.y2*Na};U.segpts.push(Oa.x+G.x*La,Oa.y+G.y*La)}}else if(J.length%2!==1||l!==Math.floor(J.length/2)||r){var Pa=r;U.edgeType=Pa?"multibezier":"bezier",U.ctrlpts=[];for(var Qa=0;aa>Qa;Qa++){var Ra,Sa=(.5-J.length/2+l)*ba,Ta=e.signum(Sa);Pa&&(ca=$?$.pfValue[Qa]:ba,da=_.value[Qa]),Ra=r?ca:void 0!==ca?Ta*ca:void 0;var Ua=void 0!==Ra?Ra:Sa,Ma=!ea||r?1-da:da,Na=!ea||r?da:1-da,Oa={x:N.x1*Ma+N.x2*Na,y:N.y1*Ma+N.y2*Na};U.ctrlpts.push(Oa.x+G.x*Ua,Oa.y+G.y*Ua)}}else U.edgeType="straight";this.findEndpoints(m);var Va=!f.number(U.startX)||!f.number(U.startY),Wa=!f.number(U.arrowStartX)||!f.number(U.arrowStartY),Xa=!f.number(U.endX)||!f.number(U.endY),Ya=!f.number(U.arrowEndX)||!f.number(U.arrowEndY),Za=3,$a=this.getArrowWidth(Z.width.pfValue)*this.arrowShapeHeight,_a=Za*$a;if("bezier"===U.edgeType){var ab=e.distance({x:U.ctrlpts[0],y:U.ctrlpts[1]},{x:U.startX,y:U.startY}),bb=_a>ab,cb=e.distance({x:U.ctrlpts[0],y:U.ctrlpts[1]},{x:U.endX,y:U.endY}),db=_a>cb,eb=!1;if(Va||Wa||bb){eb=!0;var fb={x:U.ctrlpts[0]-y.x,y:U.ctrlpts[1]-y.y},gb=Math.sqrt(fb.x*fb.x+fb.y*fb.y),hb={x:fb.x/gb,y:fb.y/gb},ib=Math.max(A,B),jb={x:U.ctrlpts[0]+2*hb.x*ib,y:U.ctrlpts[1]+2*hb.y*ib},kb=E.intersectLine(y.x,y.y,A,B,jb.x,jb.y,0);bb?(U.ctrlpts[0]=U.ctrlpts[0]+hb.x*(_a-ab),U.ctrlpts[1]=U.ctrlpts[1]+hb.y*(_a-ab)):(U.ctrlpts[0]=kb[0]+hb.x*_a,U.ctrlpts[1]=kb[1]+hb.y*_a)}if(Xa||Ya||db){eb=!0;var fb={x:U.ctrlpts[0]-z.x,y:U.ctrlpts[1]-z.y},gb=Math.sqrt(fb.x*fb.x+fb.y*fb.y),hb={x:fb.x/gb,y:fb.y/gb},ib=Math.max(A,B),jb={x:U.ctrlpts[0]+2*hb.x*ib,y:U.ctrlpts[1]+2*hb.y*ib},lb=F.intersectLine(z.x,z.y,C,D,jb.x,jb.y,0);db?(U.ctrlpts[0]=U.ctrlpts[0]+hb.x*(_a-cb),U.ctrlpts[1]=U.ctrlpts[1]+hb.y*(_a-cb)):(U.ctrlpts[0]=lb[0]+hb.x*_a,U.ctrlpts[1]=lb[1]+hb.y*_a)}eb&&this.findEndpoints(m)}if("multibezier"===U.edgeType||"bezier"===U.edgeType||"self"===U.edgeType||"compound"===U.edgeType){U.allpts=[],U.allpts.push(U.startX,U.startY);for(var Qa=0;Qa+1<U.ctrlpts.length;Qa+=2)U.allpts.push(U.ctrlpts[Qa],U.ctrlpts[Qa+1]),Qa+3<U.ctrlpts.length&&U.allpts.push((U.ctrlpts[Qa]+U.ctrlpts[Qa+2])/2,(U.ctrlpts[Qa+1]+U.ctrlpts[Qa+3])/2);U.allpts.push(U.endX,U.endY);var mb,nb;"bezier"===U.edgeType?(U.midX=e.qbezierAt(U.arrowStartX,U.ctrlpts[0],U.arrowEndX,.5),U.midY=e.qbezierAt(U.arrowStartY,U.ctrlpts[1],U.arrowEndY,.5)):U.ctrlpts.length/2%2===0?(mb=U.allpts.length/2-1,U.midX=U.allpts[mb],U.midY=U.allpts[mb+1]):(mb=U.allpts.length/2-3,nb=.5,U.midX=e.qbezierAt(U.allpts[mb],U.allpts[mb+2],U.allpts[mb+4],nb),U.midY=e.qbezierAt(U.allpts[mb+1],U.allpts[mb+3],U.allpts[mb+5],nb))}else if("straight"===U.edgeType)U.allpts=[U.startX,U.startY,U.endX,U.endY],U.midX=(U.arrowStartX+U.arrowEndX)/2,U.midY=(U.arrowStartY+U.arrowEndY)/2;else if("segments"===U.edgeType)if(U.allpts=[],U.allpts.push(U.startX,U.startY),U.allpts.push.apply(U.allpts,U.segpts),U.allpts.push(U.endX,U.endY),U.segpts.length%4===0){var ob=U.segpts.length/2,pb=ob-2;U.midX=(U.segpts[pb]+U.segpts[ob])/2,U.midY=(U.segpts[pb+1]+U.segpts[ob+1])/2}else{var pb=U.segpts.length/2-1;U.midX=U.segpts[pb],U.midY=U.segpts[pb+1]}this.projectLines(m),this.calculateArrowAngles(m),this.recalculateEdgeLabelProjection(m)}}}for(var l=0;l<j.length;l++){var m=j[l],n=m._private,p=n.style,qb=n.rscratch,U=qb;if(!qb.haystack){var rb=2*Math.random()*Math.PI;qb.source={x:Math.cos(rb),y:Math.sin(rb)};var rb=2*Math.random()*Math.PI;qb.target={x:Math.cos(rb),y:Math.sin(rb)}}var u=n.source,v=n.target,y=u._private.position,z=v._private.position,A=u.width(),C=v.width(),B=u.height(),D=v.height(),ib=p["haystack-radius"].value,sb=ib/2;U.haystackPts=U.allpts=[U.source.x*A*sb+y.x,U.source.y*B*sb+y.y,U.target.x*C*sb+z.x,U.target.y*D*sb+z.y],U.midX=(U.allpts[0]+U.allpts[2])/2,U.midY=(U.allpts[1]+U.allpts[3])/2,qb.edgeType="haystack",qb.haystack=!0,this.projectLines(m),this.calculateArrowAngles(m),this.recalculateEdgeLabelProjection(m)}for(var l=0;l<k.length;l++){var m=k[l],U=m._private.rscratch;U.labelAngle=Math.atan(U.midDispY/U.midDispX)}return h}};var i=function(a,b){return Math.atan2(b,a)-Math.PI/2};h.calculateArrowAngles=function(a){var b,c,d,f,g,h,j=a._private.rscratch,k="haystack"===j.edgeType,l="multibezier"===j.edgeType,m="segments"===j.edgeType,n="compound"===j.edgeType,o="self"===j.edgeType,p=a.source().position(),q=a.target().position();k?(d=j.haystackPts[0],f=j.haystackPts[1],g=j.haystackPts[2],h=j.haystackPts[3]):(d=j.arrowStartX,f=j.arrowStartY,g=j.arrowEndX,h=j.arrowEndY),b=p.x-d,c=p.y-f,j.srcArrowAngle=i(b,c);var r=j.midX,s=j.midY;if(k&&(r=(d+g)/2,s=(f+h)/2),b=g-d,c=h-f,o)b=-1,c=1;else if(m){var t=j.allpts;if(t.length/2%2===0){var u=t.length/2,v=u-2;b=t[u]-t[v],c=t[u+1]-t[v+1]}else{var u=t.length/2-1,v=u-2,w=u+2;b=t[u]-t[v],c=t[u+1]-t[v+1]}}else if(l||n){var x,y,z,A,t=j.allpts,B=j.ctrlpts;if(B.length/2%2===0){var C=t.length/2-1,D=C+2,E=D+2;x=e.qbezierAt(t[C],t[D],t[E],0),y=e.qbezierAt(t[C+1],t[D+1],t[E+1],0),z=e.qbezierAt(t[C],t[D],t[E],1e-4),A=e.qbezierAt(t[C+1],t[D+1],t[E+1],1e-4)}else{var D=t.length/2-1,C=D-2,E=D+2;x=e.qbezierAt(t[C],t[D],t[E],.4999),y=e.qbezierAt(t[C+1],t[D+1],t[E+1],.4999),z=e.qbezierAt(t[C],t[D],t[E],.5),A=e.qbezierAt(t[C+1],t[D+1],t[E+1],.5)}b=z-x,c=A-y}if(j.midtgtArrowAngle=i(b,c),j.midDispX=b,j.midDispY=c,b*=-1,c*=-1,m){var t=j.allpts;if(t.length/2%2===0);else{var u=t.length/2-1,w=u+2;b=-(t[w]-t[u]),c=-(t[w+1]-t[u+1])}}j.midsrcArrowAngle=i(b,c),b=q.x-g,c=q.y-h,j.tgtArrowAngle=i(b,c)},h.findEndpoints=function(a){var b,c,d,g=this,h=a.source()[0],i=a.target()[0],j=h._private,k=i._private,l=j.position,m=k.position,n=a._private.style["target-arrow-shape"].value,o=a._private.style["source-arrow-shape"].value,p=a._private.rscratch,q=p.edgeType,r="bezier"===q||"multibezier"===q||"self"===q||"compound"===q,s="bezier"!==q,t="straight"===q||"segments"===q,u="segments"===q;if(r){var v=[p.ctrlpts[0],p.ctrlpts[1]],w=s?[p.ctrlpts[p.ctrlpts.length-2],p.ctrlpts[p.ctrlpts.length-1]]:v;c=w,d=v}else if(t){var x=u?p.segpts.slice(0,2):[m.x,m.y],y=u?p.segpts.slice(p.segpts.length-2):[l.x,l.y];c=y,d=x}b=g.nodeShapes[this.getNodeShape(i)].intersectLine(m.x,m.y,i.outerWidth(),i.outerHeight(),c[0],c[1],0);var z=e.shortenIntersection(b,c,g.arrowShapes[n].spacing(a)),A=e.shortenIntersection(b,c,g.arrowShapes[n].gap(a));p.endX=A[0],p.endY=A[1],p.arrowEndX=z[0],p.arrowEndY=z[1],b=g.nodeShapes[this.getNodeShape(h)].intersectLine(l.x,l.y,h.outerWidth(),h.outerHeight(),d[0],d[1],0);var B=e.shortenIntersection(b,d,g.arrowShapes[o].spacing(a)),C=e.shortenIntersection(b,d,g.arrowShapes[o].gap(a));p.startX=C[0],p.startY=C[1],p.arrowStartX=B[0],p.arrowStartY=B[1],t&&(f.number(p.startX)&&f.number(p.startY)&&f.number(p.endX)&&f.number(p.endY)?p.badLine=!1:p.badLine=!0)},h.getArrowWidth=h.getArrowHeight=function(a){var b=this.arrowWidthCache=this.arrowWidthCache||{},c=b[a];return c?c:(c=Math.max(Math.pow(13.37*a,.9),29),b[a]=c,c)},b.exports=h},{"../../../collection/zsort":29,"../../../is":77,"../../../math":79}],57:[function(a,b,c){"use strict";var d={};d.getCachedImage=function(a,b){var c=this,d=c.imageCache=c.imageCache||{};if(d[a]&&d[a].image)return d[a].image;var e=d[a]=d[a]||{},f=e.image=new Image;return f.addEventListener("load",b),f.src=a,f},b.exports=d},{}],58:[function(a,b,c){"use strict";var d=a("../../../is"),e=a("../../../util"),f=function(){},g=f,h=g.prototype;h.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],h.init=function(a){var b=this;b.options=a,b.cy=a.cy,b.container=a.cy.container(),b.selection=[void 0,void 0,void 0,void 0,0],b.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},b.dragData={possibleDragElements:[]},b.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},b.redraws=0,b.showFps=a.showFps,b.hideEdgesOnViewport=a.hideEdgesOnViewport,b.hideLabelsOnViewport=a.hideLabelsOnViewport,b.textureOnViewport=a.textureOnViewport,b.wheelSensitivity=a.wheelSensitivity,b.motionBlurEnabled=a.motionBlur,b.forcedPixelRatio=a.pixelRatio,b.motionBlur=!0,b.motionBlurOpacity=a.motionBlurOpacity,b.motionBlurTransparency=1-b.motionBlurOpacity,b.motionBlurPxRatio=1,b.mbPxRBlurry=1,b.minMbLowQualFrames=4,b.fullQualityMb=!1,b.clearedForMotionBlur=[],b.desktopTapThreshold=a.desktopTapThreshold,b.desktopTapThreshold2=a.desktopTapThreshold*a.desktopTapThreshold,b.touchTapThreshold=a.touchTapThreshold,b.touchTapThreshold2=a.touchTapThreshold*a.touchTapThreshold,b.tapholdDuration=500,b.bindings=[],b.registerNodeShapes(),b.registerArrowShapes(),b.load()},h.notify=function(a){var b,c=this;b=d.array(a.type)?a.type:[a.type];for(var e=0;e<b.length;e++){var f=b[e];switch(f){case"destroy":return void c.destroy();case"add":case"remove":case"load":c.updateElementsCache();break;case"viewport":c.redrawHint("select",!0);break;case"style":c.updateCachedZSortedEles()}"load"!==f&&"resize"!==f||(c.invalidateContainerClientCoordsCache(),c.matchCanvasSize(c.container))}c.redrawHint("eles",!0),c.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()},h.destroy=function(){this.destroyed=!0,this.cy.stopAnimationLoop();for(var a=0;a<this.bindings.length;a++){var b=this.bindings[a],c=b;c.target.removeEventListener(c.event,c.handler,c.useCapture)}if(this.removeObserver&&this.removeObserver.disconnect(),this.labelCalcDiv)try{document.body.removeChild(this.labelCalcDiv)}catch(a){}},[a("./arrow-shapes"),a("./cached-eles"),a("./coord-ele-math"),a("./images"),a("./load-listeners"),a("./node-shapes"),a("./redraw")].forEach(function(a){e.extend(h,a)}),b.exports=g},{"../../../is":77,"../../../util":94,"./arrow-shapes":54,"./cached-eles":55,"./coord-ele-math":56,"./images":57,"./load-listeners":59,"./node-shapes":60,"./redraw":61}],59:[function(a,b,c){"use strict";var d=a("../../../is"),e=a("../../../util"),f=a("../../../event"),g=a("../../../collection"),h={};h.registerBinding=function(a,b,c,d){this.bindings.push({target:a,event:b,handler:c,useCapture:d}),a.addEventListener(b,c,d)},h.nodeIsDraggable=function(a){return!(0===a._private.style.opacity.value||"visible"!=a._private.style.visibility.value||"element"!=a._private.style.display.value||a.locked()||!a.grabbable())},h.load=function(){var a=this,b=function(b,c,d,g){null==b&&(b=a.cy);for(var h=0;h<c.length;h++){var i=c[h],j=f(d,e.extend({type:i},g));b.trigger(j)}},c=function(a){return a.shiftKey||a.metaKey||a.ctrlKey},h=function(b){var c;if(b.addToList&&a.cy.hasCompoundNodes()){if(!b.addToList.hasId){b.addToList.hasId={};for(var d=0;d<b.addToList.length;d++){var e=b.addToList[d];b.addToList.hasId[e.id()]=!0}}c=b.addToList.hasId}return c||{}},i=function(a,b){if(a._private.cy.hasCompoundNodes()&&(null!=b.inDragLayer||null!=b.addToList))for(var c=h(b),d=a.descendants(),e=0;e<d.size();e++){var f=d[e],g=f._private;b.inDragLayer&&(g.rscratch.inDragLayer=!0),b.addToList&&!c[f.id()]&&(b.addToList.push(f),c[f.id()]=!0,g.grabbed=!0);for(var i=g.edges,j=0;b.inDragLayer&&j<i.length;j++)i[j]._private.rscratch.inDragLayer=!0}},j=function(a,b){var c=a._private,d=h(b);b.inDragLayer&&(c.rscratch.inDragLayer=!0),b.addToList&&!d[a.id()]&&(b.addToList.push(a),d[a.id()]=!0,c.grabbed=!0);for(var e=c.edges,f=0;b.inDragLayer&&f<e.length;f++)e[f]._private.rscratch.inDragLayer=!0;i(a,b),l(a,{inDragLayer:b.inDragLayer})},k=function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b]._private;if("nodes"===c.group){c.rscratch.inDragLayer=!1,c.grabbed=!1;for(var d=c.edges,e=0;e<d.length;e++)d[e]._private.rscratch.inDragLayer=!1;l(a[b],{inDragLayer:!1})}else"edges"===c.group&&(c.rscratch.inDragLayer=!1)}},l=function(a,b){if(null!=b.inDragLayer||null!=b.addToList){var c=a;if(a._private.cy.hasCompoundNodes()){for(;c.parent().nonempty();)c=c.parent()[0];if(c!=a){for(var d=c.descendants().merge(c).unmerge(a).unmerge(a.descendants()),e=d.connectedEdges(),f=h(b),g=0;g<d.size();g++)void 0!==b.inDragLayer&&(d[g]._private.rscratch.inDragLayer=b.inDragLayer),b.addToList&&!f[d[g].id()]&&(b.addToList.push(d[g]),f[d[g].id()]=!0,d[g]._private.grabbed=!0);for(var i=0;void 0!==b.inDragLayer&&i<e.length;i++)e[i]._private.rscratch.inDragLayer=b.inDragLayer}}}};"undefined"!=typeof MutationObserver?(a.removeObserver=new MutationObserver(function(b){for(var c=0;c<b.length;c++){var d=b[c],e=d.removedNodes;if(e)for(var f=0;f<e.length;f++){var g=e[f];if(g===a.container){a.destroy();break}}}}),a.container.parentNode&&a.removeObserver.observe(a.container.parentNode,{childList:!0})):a.registerBinding(a.container,"DOMNodeRemoved",function(b){a.destroy()}),a.registerBinding(window,"resize",e.debounce(function(b){a.invalidateContainerClientCoordsCache(),a.matchCanvasSize(a.container),a.redrawHint("eles",!0),a.redraw()},100));for(var m=function(b){a.registerBinding(b,"scroll",function(b){a.invalidateContainerClientCoordsCache()})},n=a.cy.container();m(n),n.parentNode;)n=n.parentNode;a.registerBinding(a.container,"contextmenu",function(a){a.preventDefault()});var o=function(){return 0!==a.selection[4]};a.registerBinding(a.container,"mousedown",function(c){c.preventDefault(),a.hoverData.capture=!0,a.hoverData.which=c.which;var d=a.cy,e=a.projectIntoViewport(c.clientX,c.clientY),g=a.selection,h=a.findNearestElement(e[0],e[1],!0,!1),i=a.dragData.possibleDragElements;a.hoverData.mdownPos=e;var k=function(){a.hoverData.tapholdCancelled=!1,clearTimeout(a.hoverData.tapholdTimeout),a.hoverData.tapholdTimeout=setTimeout(function(){if(!a.hoverData.tapholdCancelled){var b=a.hoverData.down;b?b.trigger(f(c,{type:"taphold",cyPosition:{x:e[0],y:e[1]}})):d.trigger(f(c,{type:"taphold",cyPosition:{x:e[0],y:e[1]}}))}},a.tapholdDuration)};if(3==c.which){a.hoverData.cxtStarted=!0;var l=f(c,{type:"cxttapstart",cyPosition:{x:e[0],y:e[1]}});h?(h.activate(),h.trigger(l),a.hoverData.down=h):d.trigger(l),a.hoverData.downTime=(new Date).getTime(),a.hoverData.cxtDragged=!1}else if(1==c.which){if(h&&h.activate(),null!=h&&a.nodeIsDraggable(h)){var m=f(c,{type:"grab",cyPosition:{x:e[0],y:e[1]}});if(h.isNode()&&!h.selected())i=a.dragData.possibleDragElements=[],j(h,{addToList:i}),h.trigger(m);else if(h.isNode()&&h.selected()){i=a.dragData.possibleDragElements=[];for(var n=d.$(function(){return this.isNode()&&this.selected()}),o=0;o<n.length;o++)a.nodeIsDraggable(n[o])&&j(n[o],{addToList:i});h.trigger(m)}a.redrawHint("eles",!0),a.redrawHint("drag",!0)}a.hoverData.down=h,a.hoverData.downTime=(new Date).getTime(),b(h,["mousedown","tapstart","vmousedown"],c,{cyPosition:{x:e[0],y:e[1]}}),null==h?(g[4]=1,a.data.bgActivePosistion={x:e[0],y:e[1]},a.redrawHint("select",!0),a.redraw()):h.isEdge()&&(g[4]=1),k()}g[0]=g[2]=e[0],g[1]=g[3]=e[1]},!1),a.registerBinding(window,"mousemove",function(e){var h=!1,i=a.hoverData.capture;if(!i){var k=a.findContainerClientCoords();if(!(e.clientX>k[0]&&e.clientX<k[0]+a.canvasWidth&&e.clientY>k[1]&&e.clientY<k[1]+a.canvasHeight))return;for(var l=a.container,m=e.target,n=m.parentNode,o=!1;n;){if(n===l){o=!0;break}n=n.parentNode}if(!o)return}var p=a.cy,q=p.zoom(),r=a.projectIntoViewport(e.clientX,e.clientY),s=a.selection,t=null;a.hoverData.draggingEles||(t=a.findNearestElement(r[0],r[1],!0,!1));var u=a.hoverData.last,v=a.hoverData.down,w=[r[0]-s[2],r[1]-s[3]],x=a.dragData.possibleDragElements,y=s[2]-s[0],z=y*y,A=s[3]-s[1],B=A*A,C=z+B,D=C*q*q,E=c(e),F=D>=a.desktopTapThreshold2;F&&(a.hoverData.tapholdCancelled=!0);var G=function(){var b=a.hoverData.dragDelta=a.hoverData.dragDelta||[];0===b.length?(b.push(w[0]),b.push(w[1])):(b[0]+=w[0],b[1]+=w[1])};if(h=!0,b(t,["mousemove","vmousemove","tapdrag"],e,{cyPosition:{x:r[0],y:r[1]}}),3===a.hoverData.which){if(F){var H=f(e,{type:"cxtdrag",cyPosition:{x:r[0],y:r[1]}});v?v.trigger(H):p.trigger(H),a.hoverData.cxtDragged=!0,a.hoverData.cxtOver&&t===a.hoverData.cxtOver||(a.hoverData.cxtOver&&a.hoverData.cxtOver.trigger(f(e,{type:"cxtdragout",cyPosition:{x:r[0],y:r[1]}})),a.hoverData.cxtOver=t,t&&t.trigger(f(e,{type:"cxtdragover",cyPosition:{x:r[0],y:r[1]}})))}}else if(a.hoverData.dragging){if(h=!0,p.panningEnabled()&&p.userPanningEnabled()){var I;if(a.hoverData.justStartedPan){var J=a.hoverData.mdownPos;I={x:(r[0]-J[0])*q,y:(r[1]-J[1])*q},a.hoverData.justStartedPan=!1}else I={x:w[0]*q,y:w[1]*q};p.panBy(I),a.hoverData.dragged=!0}r=a.projectIntoViewport(e.clientX,e.clientY)}else if(1!=s[4]||null!=v&&!v.isEdge()){if(v&&v.isEdge()&&v.active()&&v.unactivate(),t!=u&&(u&&b(u,["mouseout","tapdragout"],e,{cyPosition:{x:r[0],y:r[1]}}),t&&b(t,["mouseover","tapdragover"],e,{cyPosition:{x:r[0],y:r[1]}}),a.hoverData.last=t),v&&v.isNode()&&a.nodeIsDraggable(v))if(F){var K=!a.dragData.didDrag;K&&a.redrawHint("eles",!0),a.dragData.didDrag=!0;for(var L=[],M=0;M<x.length;M++){var N=x[M];if(a.hoverData.draggingEles||j(N,{inDragLayer:!0}),N.isNode()&&a.nodeIsDraggable(N)&&N.grabbed()){var O=N._private.position;if(L.push(N),d.number(w[0])&&d.number(w[1])){var P=!N.isParent();if(P&&(O.x+=w[0],O.y+=w[1]),K){var Q=a.hoverData.dragDelta;P&&d.number(Q[0])&&d.number(Q[1])&&(O.x+=Q[0],O.y+=Q[1])}}}}a.hoverData.draggingEles=!0;var R=g(p,L);R.updateCompoundBounds(),R.trigger("position drag"),a.redrawHint("drag",!0),a.redraw()}else G();h=!0}else a.hoverData.dragging||!p.boxSelectionEnabled()||!E&&p.panningEnabled()&&p.userPanningEnabled()?!a.hoverData.selecting&&p.panningEnabled()&&p.userPanningEnabled()&&(a.hoverData.dragging=!0,a.hoverData.justStartedPan=!0,s[4]=0,a.data.bgActivePosistion={x:r[0],y:r[1]},a.redrawHint("select",!0),a.redraw()):(a.data.bgActivePosistion=void 0,a.hoverData.selecting=!0,a.redrawHint("select",!0),a.redraw()),v&&v.isEdge()&&v.active()&&v.unactivate();return s[2]=r[0],s[3]=r[1],h?(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1):void 0},!1),a.registerBinding(window,"mouseup",function(d){var e=a.hoverData.capture;if(e){a.hoverData.capture=!1;var h=a.cy,i=a.projectIntoViewport(d.clientX,d.clientY),j=a.selection,l=a.findNearestElement(i[0],i[1],!0,!1),m=a.dragData.possibleDragElements,n=a.hoverData.down,o=c(d);if(a.data.bgActivePosistion&&(a.redrawHint("select",!0),a.redraw()),a.hoverData.tapholdCancelled=!0,a.data.bgActivePosistion=void 0,n&&n.unactivate(),3===a.hoverData.which){var p=f(d,{type:"cxttapend",cyPosition:{x:i[0],y:i[1]}});if(n?n.trigger(p):h.trigger(p),!a.hoverData.cxtDragged){var q=f(d,{type:"cxttap",cyPosition:{x:i[0],y:i[1]}});n?n.trigger(q):h.trigger(q)}a.hoverData.cxtDragged=!1,a.hoverData.which=null}else if(1===a.hoverData.which){if(null!=n||a.dragData.didDrag||a.hoverData.selecting||a.hoverData.dragged||c(d)||(h.$(function(){return this.selected()}).unselect(),m.length>0&&a.redrawHint("eles",!0),a.dragData.possibleDragElements=m=[]),b(l,["mouseup","tapend","vmouseup"],d,{cyPosition:{x:i[0],y:i[1]}}),a.dragData.didDrag||a.hoverData.dragged||b(l,["click","tap","vclick"],d,{cyPosition:{x:i[0],y:i[1]}}),l!=n||a.dragData.didDrag||a.hoverData.selecting||null!=l&&l._private.selectable&&(a.hoverData.dragging||("additive"===h.selectionType()||o?l.selected()?l.unselect():l.select():o||(h.$(":selected").unmerge(l).unselect(),l.select())),a.redrawHint("eles",!0)),a.hoverData.selecting){var r=[],s=a.getAllInBox(j[0],j[1],j[2],j[3]);a.redrawHint("select",!0),s.length>0&&a.redrawHint("eles",!0);for(var t=0;t<s.length;t++)s[t]._private.selectable&&r.push(s[t]);var u=g(h,r);"additive"===h.selectionType()?u.select():(o||h.$(":selected").unmerge(u).unselect(),u.select()),a.redraw()}a.hoverData.dragging&&(a.hoverData.dragging=!1,a.redrawHint("select",!0),a.redrawHint("eles",!0),a.redraw()),j[4]||(a.redrawHint("drag",!0),a.redrawHint("eles",!0),k(m),n&&n.trigger("free"))}j[4]=0,a.hoverData.down=null,a.hoverData.cxtStarted=!1,a.hoverData.draggingEles=!1,a.hoverData.selecting=!1,a.dragData.didDrag=!1,a.hoverData.dragged=!1,a.hoverData.dragDelta=[]}},!1);var p=function(b){if(!a.scrollingPage){var c=a.cy,d=a.projectIntoViewport(b.clientX,b.clientY),e=[d[0]*c.zoom()+c.pan().x,d[1]*c.zoom()+c.pan().y];if(a.hoverData.draggingEles||a.hoverData.dragging||a.hoverData.cxtStarted||o())return void b.preventDefault();if(c.panningEnabled()&&c.userPanningEnabled()&&c.zoomingEnabled()&&c.userZoomingEnabled()){b.preventDefault(),a.data.wheelZooming=!0,clearTimeout(a.data.wheelTimeout),a.data.wheelTimeout=setTimeout(function(){a.data.wheelZooming=!1,a.redrawHint("eles",!0),a.redraw()},150);var f=b.deltaY/-250||b.wheelDeltaY/1e3||b.wheelDelta/1e3;f*=a.wheelSensitivity;var g=1===b.deltaMode;g&&(f*=33),c.zoom({level:c.zoom()*Math.pow(10,f),renderedPosition:{x:e[0],y:e[1]}})}}};a.registerBinding(a.container,"wheel",p,!0),a.registerBinding(window,"scroll",function(b){a.scrollingPage=!0,clearTimeout(a.scrollingPageTimeout),a.scrollingPageTimeout=setTimeout(function(){a.scrollingPage=!1},250)},!0),a.registerBinding(a.container,"mouseout",function(b){var c=a.projectIntoViewport(b.clientX,b.clientY);a.cy.trigger(f(b,{type:"mouseout",cyPosition:{x:c[0],y:c[1]}}))},!1),a.registerBinding(a.container,"mouseover",function(b){var c=a.projectIntoViewport(b.clientX,b.clientY);a.cy.trigger(f(b,{type:"mouseover",cyPosition:{x:c[0],y:c[1]}}))},!1);var q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=function(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))},F=function(a,b,c,d){return(c-a)*(c-a)+(d-b)*(d-b)};a.registerBinding(a.container,"touchstart",D=function(c){a.touchData.capture=!0,a.data.bgActivePosistion=void 0;var d=a.cy,e=a.getCachedNodes(),g=a.getCachedEdges(),h=a.touchData.now,i=a.touchData.earlier;if(c.touches[0]){var k=a.projectIntoViewport(c.touches[0].clientX,c.touches[0].clientY);h[0]=k[0],h[1]=k[1]}if(c.touches[1]){var k=a.projectIntoViewport(c.touches[1].clientX,c.touches[1].clientY);h[2]=k[0],h[3]=k[1]}if(c.touches[2]){var k=a.projectIntoViewport(c.touches[2].clientX,c.touches[2].clientY);h[4]=k[0],h[5]=k[1]}if(c.touches[1]){var l=function(a){for(var b=0;b<a.length;b++)a[b]._private.grabbed=!1,a[b]._private.rscratch.inDragLayer=!1,a[b].active()&&a[b].unactivate()};l(e),l(g);var m=a.findContainerClientCoords();y=m[0],z=m[1],A=m[2],B=m[3],q=c.touches[0].clientX-y,r=c.touches[0].clientY-z,s=c.touches[1].clientX-y,t=c.touches[1].clientY-z,C=q>=0&&A>=q&&s>=0&&A>=s&&r>=0&&B>=r&&t>=0&&B>=t;var n=d.pan(),o=d.zoom();u=E(q,r,s,t),v=F(q,r,s,t),w=[(q+s)/2,(r+t)/2],x=[(w[0]-n.x)/o,(w[1]-n.y)/o];var p=200,D=p*p;if(D>v&&!c.touches[2]){var G=a.findNearestElement(h[0],h[1],!0,!0),H=a.findNearestElement(h[2],h[3],!0,!0);return G&&G.isNode()?(G.activate().trigger(f(c,{type:"cxttapstart",cyPosition:{x:h[0],y:h[1]}})),a.touchData.start=G):H&&H.isNode()?(H.activate().trigger(f(c,{type:"cxttapstart",cyPosition:{x:h[0],y:h[1]}})),a.touchData.start=H):(d.trigger(f(c,{type:"cxttapstart",cyPosition:{x:h[0],y:h[1]}})),a.touchData.start=null),a.touchData.start&&(a.touchData.start._private.grabbed=!1),a.touchData.cxt=!0,a.touchData.cxtDragged=!1,a.data.bgActivePosistion=void 0,void a.redraw()}}if(c.touches[2]);else if(c.touches[1]);else if(c.touches[0]){var I=a.findNearestElement(h[0],h[1],!0,!0);if(null!=I&&(I.activate(),a.touchData.start=I,I.isNode()&&a.nodeIsDraggable(I))){var J=a.dragData.touchDragEles=[];if(a.redrawHint("eles",!0),a.redrawHint("drag",!0),I.selected())for(var K=d.$(function(){return this.isNode()&&this.selected()}),L=0;L<K.length;L++){var M=K[L];a.nodeIsDraggable(M)&&j(M,{addToList:J})}else j(I,{addToList:J});I.trigger(f(c,{type:"grab",cyPosition:{x:h[0],y:h[1]}}))}b(I,["touchstart","tapstart","vmousedown"],c,{cyPosition:{x:h[0],y:h[1]}}),null==I&&(a.data.bgActivePosistion={x:k[0],y:k[1]},a.redrawHint("select",!0),a.redraw());for(var N=0;N<h.length;N++)i[N]=h[N],a.touchData.startPosition[N]=h[N];a.touchData.singleTouchMoved=!1,a.touchData.singleTouchStartTime=+new Date,clearTimeout(a.touchData.tapholdTimeout),a.touchData.tapholdTimeout=setTimeout(function(){a.touchData.singleTouchMoved!==!1||a.pinching||a.touchData.selecting||(b(a.touchData.start,["taphold"],c,{cyPosition:{x:h[0],y:h[1]}}),a.touchData.start||d.$(":selected").unselect())},a.tapholdDuration)}},!1);var G;a.registerBinding(window,"touchmove",G=function(c){var e=a.selection,h=a.touchData.capture,i=a.cy,k=a.touchData.now,l=a.touchData.earlier,m=i.zoom();if(c.touches[0]){var n=a.projectIntoViewport(c.touches[0].clientX,c.touches[0].clientY);k[0]=n[0],k[1]=n[1]}if(c.touches[1]){var n=a.projectIntoViewport(c.touches[1].clientX,c.touches[1].clientY);k[2]=n[0],k[3]=n[1]}if(c.touches[2]){var n=a.projectIntoViewport(c.touches[2].clientX,c.touches[2].clientY);k[4]=n[0],k[5]=n[1]}for(var o=[],p=0;p<k.length;p++)o[p]=k[p]-l[p];var w=a.touchData.startPosition,A=k[0]-w[0],B=A*A,D=k[1]-w[1],G=D*D,H=B+G,I=H*m*m,J=I>=a.touchTapThreshold2;if(h&&a.touchData.cxt){c.preventDefault();var K=c.touches[0].clientX-y,L=c.touches[0].clientY-z,M=c.touches[1].clientX-y,N=c.touches[1].clientY-z,O=F(K,L,M,N),P=O/v,Q=150,R=Q*Q,S=1.5,T=S*S;if(P>=T||O>=R){a.touchData.cxt=!1,a.touchData.start&&(a.touchData.start.unactivate(),a.touchData.start=null),a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);var U=f(c,{type:"cxttapend",cyPosition:{x:k[0],y:k[1]}});a.touchData.start?a.touchData.start.trigger(U):i.trigger(U)}}if(h&&a.touchData.cxt){var U=f(c,{type:"cxtdrag",cyPosition:{x:k[0],y:k[1]}});a.data.bgActivePosistion=void 0,a.redrawHint("select",!0),a.touchData.start?a.touchData.start.trigger(U):i.trigger(U),a.touchData.start&&(a.touchData.start._private.grabbed=!1),a.touchData.cxtDragged=!0;var V=a.findNearestElement(k[0],k[1],!0,!0);a.touchData.cxtOver&&V===a.touchData.cxtOver||(a.touchData.cxtOver&&a.touchData.cxtOver.trigger(f(c,{type:"cxtdragout",cyPosition:{x:k[0],y:k[1]}})),a.touchData.cxtOver=V,V&&V.trigger(f(c,{type:"cxtdragover",cyPosition:{x:k[0],y:k[1]}})))}else if(h&&c.touches[2]&&i.boxSelectionEnabled())c.preventDefault(),a.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,a.touchData.selecting=!0,a.redrawHint("select",!0),e&&0!==e.length&&void 0!==e[0]?(e[2]=(k[0]+k[2]+k[4])/3,e[3]=(k[1]+k[3]+k[5])/3):(e[0]=(k[0]+k[2]+k[4])/3,e[1]=(k[1]+k[3]+k[5])/3,e[2]=(k[0]+k[2]+k[4])/3+1,e[3]=(k[1]+k[3]+k[5])/3+1),e[4]=1,a.touchData.selecting=!0,a.redraw();else if(h&&c.touches[1]&&i.zoomingEnabled()&&i.panningEnabled()&&i.userZoomingEnabled()&&i.userPanningEnabled()){c.preventDefault(),a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);var W=a.dragData.touchDragEles;if(W){a.redrawHint("drag",!0);for(var X=0;X<W.length;X++)W[X]._private.grabbed=!1,W[X]._private.rscratch.inDragLayer=!1}var K=c.touches[0].clientX-y,L=c.touches[0].clientY-z,M=c.touches[1].clientX-y,N=c.touches[1].clientY-z,Y=E(K,L,M,N),Z=Y/u;if(1!=Z&&C){var $=K-q,_=L-r,aa=M-s,ba=N-t,ca=($+aa)/2,da=(_+ba)/2,ea=i.zoom(),fa=ea*Z,ga=i.pan(),ha=x[0]*ea+ga.x,ia=x[1]*ea+ga.y,ja={x:-fa/ea*(ha-ga.x-ca)+ha,y:-fa/ea*(ia-ga.y-da)+ia};if(a.touchData.start){var W=a.dragData.touchDragEles;if(W)for(var X=0;X<W.length;X++){var ka=W[X]._private;ka.grabbed=!1,ka.rscratch.inDragLayer=!1}var la=a.touchData.start._private;la.active=!1,la.grabbed=!1,la.rscratch.inDragLayer=!1,a.redrawHint("drag",!0),a.touchData.start.trigger("free").trigger("unactivate")}i.viewport({zoom:fa,pan:ja,cancelOnFailedZoom:!0}),u=Y,q=K,r=L,s=M,t=N,a.pinching=!0}if(c.touches[0]){var n=a.projectIntoViewport(c.touches[0].clientX,c.touches[0].clientY);k[0]=n[0],k[1]=n[1]}if(c.touches[1]){var n=a.projectIntoViewport(c.touches[1].clientX,c.touches[1].clientY);k[2]=n[0],k[3]=n[1]}if(c.touches[2]){var n=a.projectIntoViewport(c.touches[2].clientX,c.touches[2].clientY);k[4]=n[0],k[5]=n[1]}}else if(c.touches[0]){var ma=a.touchData.start,na=a.touchData.last,V=V||a.findNearestElement(k[0],k[1],!0,!0);if(null!=ma&&c.preventDefault(),null!=ma&&"nodes"==ma._private.group&&a.nodeIsDraggable(ma))if(J){for(var W=a.dragData.touchDragEles,oa=!a.dragData.didDrag,pa=0;pa<W.length;pa++){var qa=W[pa];if(oa&&j(qa,{inDragLayer:!0}),a.nodeIsDraggable(qa)&&qa.isNode()&&qa.grabbed()){a.dragData.didDrag=!0;var ra=qa._private.position,sa=!qa.isParent();if(sa&&d.number(o[0])&&d.number(o[1])&&(ra.x+=o[0],ra.y+=o[1]),oa){a.redrawHint("eles",!0);var ta=a.touchData.dragDelta;sa&&d.number(ta[0])&&d.number(ta[1])&&(ra.x+=ta[0],ra.y+=ta[1])}}}var ua=g(i,W);ua.updateCompoundBounds(),ua.trigger("position drag"),a.hoverData.draggingEles=!0,a.redrawHint("drag",!0),a.touchData.startPosition[0]==l[0]&&a.touchData.startPosition[1]==l[1]&&a.redrawHint("eles",!0),a.redraw()}else{var ta=a.touchData.dragDelta=a.touchData.dragDelta||[];0===ta.length?(ta.push(o[0]),ta.push(o[1])):(ta[0]+=o[0],ta[1]+=o[1])}b(ma||V,["touchmove","tapdrag","vmousemove"],c,{cyPosition:{x:k[0],y:k[1]}}),V!=na&&(na&&na.trigger(f(c,{type:"tapdragout",cyPosition:{x:k[0],y:k[1]}})),V&&V.trigger(f(c,{type:"tapdragover",cyPosition:{x:k[0],y:k[1]}}))),a.touchData.last=V;for(var X=0;X<k.length;X++)k[X]&&a.touchData.startPosition[X]&&J&&(a.touchData.singleTouchMoved=!0);if(h&&(null==ma||ma.isEdge())&&i.panningEnabled()&&i.userPanningEnabled()){c.preventDefault(),a.swipePanning?i.panBy({x:o[0]*m,y:o[1]*m}):J&&(a.swipePanning=!0,i.panBy({x:A*m,y:D*m}),ma&&(ma.unactivate(),a.data.bgActivePosistion||(a.data.bgActivePosistion={x:k[0],y:k[1]}),a.redrawHint("select",!0),a.touchData.start=null));var n=a.projectIntoViewport(c.touches[0].clientX,c.touches[0].clientY);k[0]=n[0],k[1]=n[1]}}for(var p=0;p<k.length;p++)l[p]=k[p]},!1);var H;a.registerBinding(window,"touchcancel",H=function(b){var c=a.touchData.start;a.touchData.capture=!1,c&&c.unactivate()});var I;if(a.registerBinding(window,"touchend",I=function(c){var d=a.touchData.start,e=a.touchData.capture;if(e){a.touchData.capture=!1,c.preventDefault();var h=a.selection;a.swipePanning=!1,a.hoverData.draggingEles=!1;var i=a.cy,j=i.zoom(),l=a.touchData.now,m=a.touchData.earlier;if(c.touches[0]){var n=a.projectIntoViewport(c.touches[0].clientX,c.touches[0].clientY);l[0]=n[0],l[1]=n[1]}if(c.touches[1]){var n=a.projectIntoViewport(c.touches[1].clientX,c.touches[1].clientY);l[2]=n[0],l[3]=n[1]}if(c.touches[2]){var n=a.projectIntoViewport(c.touches[2].clientX,c.touches[2].clientY);l[4]=n[0],l[5]=n[1]}d&&d.unactivate();var o;if(a.touchData.cxt){if(o=f(c,{type:"cxttapend",cyPosition:{x:l[0],y:l[1]}}),d?d.trigger(o):i.trigger(o),!a.touchData.cxtDragged){var p=f(c,{type:"cxttap",cyPosition:{x:l[0],y:l[1]}});d?d.trigger(p):i.trigger(p)}return a.touchData.start&&(a.touchData.start._private.grabbed=!1),
a.touchData.cxt=!1,a.touchData.start=null,void a.redraw()}if(!c.touches[2]&&i.boxSelectionEnabled()&&a.touchData.selecting){a.touchData.selecting=!1;var q=[],r=a.getAllInBox(h[0],h[1],h[2],h[3]);h[0]=void 0,h[1]=void 0,h[2]=void 0,h[3]=void 0,h[4]=0,a.redrawHint("select",!0);for(var s=0;s<r.length;s++)r[s]._private.selectable&&q.push(r[s]);var t=g(i,q);t.select(),t.length>0?a.redrawHint("eles",!0):a.redraw()}var u=!1;if(null!=d&&(d._private.active=!1,u=!0,d.unactivate()),c.touches[2])a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);else if(c.touches[1]);else if(c.touches[0]);else if(!c.touches[0]){a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);var v=a.dragData.touchDragEles;if(null!=d){var w=d._private.grabbed;k(v),a.redrawHint("drag",!0),a.redrawHint("eles",!0),w&&d.trigger("free"),b(d,["touchend","tapend","vmouseup"],c,{cyPosition:{x:l[0],y:l[1]}}),d.unactivate(),a.touchData.start=null}else{var x=a.findNearestElement(l[0],l[1],!0,!0);b(x,["touchend","tapend","vmouseup"],c,{cyPosition:{x:l[0],y:l[1]}})}var y=a.touchData.startPosition[0]-l[0],z=y*y,A=a.touchData.startPosition[1]-l[1],B=A*A,C=z+B,D=C*j*j;null!=d&&!a.dragData.didDrag&&d._private.selectable&&D<a.touchTapThreshold2&&!a.pinching&&("single"===i.selectionType()?(i.$(":selected").unmerge(d).unselect(),d.select()):d.selected()?d.unselect():d.select(),u=!0,a.redrawHint("eles",!0)),a.touchData.singleTouchMoved||b(d,["tap","vclick"],c,{cyPosition:{x:l[0],y:l[1]}}),a.touchData.singleTouchMoved=!0}for(var E=0;E<l.length;E++)m[E]=l[E];a.dragData.didDrag=!1,0===c.touches.length&&(a.touchData.dragDelta=[]),u&&d&&d.updateStyle(!1),c.touches.length<2&&(a.pinching=!1,a.redrawHint("eles",!0),a.redraw())}},!1),"undefined"==typeof TouchEvent){var J=[],K=function(a){return{clientX:a.clientX,clientY:a.clientY,force:1,identifier:a.pointerId,pageX:a.pageX,pageY:a.pageY,radiusX:a.width/2,radiusY:a.height/2,screenX:a.screenX,screenY:a.screenY,target:a.target}},L=function(a){return{event:a,touch:K(a)}},M=function(a){J.push(L(a))},N=function(a){for(var b=0;b<J.length;b++){var c=J[b];if(c.event.pointerId===a.pointerId)return void J.splice(b,1)}},O=function(a){var b=J.filter(function(b){return b.event.pointerId===a.pointerId})[0];b.event=a,b.touch=K(a)},P=function(a){a.touches=J.map(function(a){return a.touch})},Q=function(a){return"mouse"===a.pointerType||4===a.pointerType};a.registerBinding(a.container,"pointerdown",function(a){Q(a)||(a.preventDefault(),M(a),P(a),D(a))}),a.registerBinding(a.container,"pointerup",function(a){Q(a)||(N(a),P(a),I(a))}),a.registerBinding(a.container,"pointercancel",function(a){Q(a)||(N(a),P(a),H(a))}),a.registerBinding(a.container,"pointermove",function(a){Q(a)||(a.preventDefault(),O(a),P(a),G(a))})}},b.exports=h},{"../../../collection":23,"../../../event":42,"../../../is":77,"../../../util":94}],60:[function(a,b,c){"use strict";var d=a("../../../math"),e={};e.registerNodeShapes=function(){function a(a,e){return b[a]={name:a,points:e,draw:function(a,b,d,e,f){c.nodeShapeImpl("polygon")(a,b,d,e,f,this.points)},intersectLine:function(a,b,c,e,f,g,h){return d.polygonIntersectLine(f,g,this.points,a,b,c/2,e/2,h)},checkPoint:function(c,e,f,g,h,i,j){return d.pointInsidePolygon(c,e,b[a].points,i,j,g,h,[0,-1],f)}}}var b=this.nodeShapes={},c=this;b.ellipse={name:"ellipse",draw:function(a,b,d,e,f){c.nodeShapeImpl(this.name)(a,b,d,e,f)},intersectLine:function(a,b,c,e,f,g,h){return d.intersectLineEllipse(f,g,a,b,c/2+h,e/2+h)},checkPoint:function(a,b,c,d,e,f,g){return a-=f,b-=g,a/=d/2+c,b/=e/2+c,1>=a*a+b*b}},a("triangle",d.generateUnitNgonPointsFitToSquare(3,0)),a("square",d.generateUnitNgonPointsFitToSquare(4,0)),b.rectangle=b.square,b.roundrectangle={name:"roundrectangle",points:d.generateUnitNgonPointsFitToSquare(4,0),draw:function(a,b,d,e,f){c.nodeShapeImpl(this.name)(a,b,d,e,f)},intersectLine:function(a,b,c,e,f,g,h){return d.roundRectangleIntersectLine(f,g,a,b,c,e,h)},checkPoint:function(a,b,c,e,f,g,h){var i=d.getRoundRectangleRadius(e,f);if(d.pointInsidePolygon(a,b,this.points,g,h,e,f-2*i,[0,-1],c))return!0;if(d.pointInsidePolygon(a,b,this.points,g,h,e-2*i,f,[0,-1],c))return!0;var j=function(a,b,c,d,e,f,g){return a-=c,b-=d,a/=e/2+g,b/=f/2+g,1>=a*a+b*b};return!!j(a,b,g-e/2+i,h-f/2+i,2*i,2*i,c)||(!!j(a,b,g+e/2-i,h-f/2+i,2*i,2*i,c)||(!!j(a,b,g+e/2-i,h+f/2-i,2*i,2*i,c)||!!j(a,b,g-e/2+i,h+f/2-i,2*i,2*i,c)))}},a("diamond",[0,1,1,0,0,-1,-1,0]),a("pentagon",d.generateUnitNgonPointsFitToSquare(5,0)),a("hexagon",d.generateUnitNgonPointsFitToSquare(6,0)),a("heptagon",d.generateUnitNgonPointsFitToSquare(7,0)),a("octagon",d.generateUnitNgonPointsFitToSquare(8,0));var e=new Array(20),f=d.generateUnitNgonPoints(5,0),g=d.generateUnitNgonPoints(5,Math.PI/5),h=.5*(3-Math.sqrt(5));h*=1.57;for(var i=0;i<g.length/2;i++)g[2*i]*=h,g[2*i+1]*=h;for(var i=0;5>i;i++)e[4*i]=f[2*i],e[4*i+1]=f[2*i+1],e[4*i+2]=g[2*i],e[4*i+3]=g[2*i+1];e=d.fitPolygonToSquare(e),a("star",e),a("vee",[-1,-1,0,-.333,1,-1,0,1]),a("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),b.makePolygon=function(c){var d,e=c.join("$"),f="polygon-"+e;return(d=b[f])?d:a(f,c)}},b.exports=e},{"../../../math":79}],61:[function(a,b,c){"use strict";var d=a("../../../util"),e={};e.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};var f=1e3/60,g=1e3;e.redraw=function(a){a=a||d.staticEmptyObject();var b=this,c=a.forcedContext;void 0===b.averageRedrawTime&&(b.averageRedrawTime=0),void 0===b.lastRedrawTime&&(b.lastRedrawTime=0);var e=b.lastRedrawTime;e=f>e?f:e,e=g>e?e:g,void 0===b.lastDrawTime&&(b.lastDrawTime=0);var h=Date.now(),i=h-b.lastDrawTime,j=i>=e;return c||j?(b.requestedFrame=!0,void(b.renderOptions=a)):void(b.skipFrame=!0)},e.startRenderLoop=function(){var a=this;if(!a.renderLoopStarted){a.renderLoopStarted=!0;var b=function(){if(!a.destroyed){if(a.requestedFrame&&!a.skipFrame){var c=d.performanceNow();a.render(a.renderOptions);var e=a.lastRedrawTime=d.performanceNow();void 0===a.averageRedrawTime&&(a.averageRedrawTime=e-c),void 0===a.redrawCount&&(a.redrawCount=0),a.redrawCount++,void 0===a.redrawTotalTime&&(a.redrawTotalTime=0);var f=e-c;a.redrawTotalTime+=f,a.lastRedrawTime=f,a.averageRedrawTime=a.averageRedrawTime/2+f/2,a.requestedFrame=!1}a.skipFrame=!1,d.requestAnimationFrame(b)}};d.requestAnimationFrame(b)}},b.exports=e},{"../../../util":94}],62:[function(a,b,c){"use strict";var d,e={};e.arrowShapeImpl=function(a){return(d||(d={polygon:function(a,b){for(var c=0;c<b.length;c++){var d=b[c];a.lineTo(d.x,d.y)}},"triangle-backcurve":function(a,b,c){for(var d,e=0;e<b.length;e++){var f=b[e];0===e&&(d=f),a.lineTo(f.x,f.y)}a.quadraticCurveTo(c.x,c.y,d.x,d.y)},"triangle-tee":function(a,b,c){for(var d=b,e=0;e<d.length;e++){var f=d[e];a.lineTo(f.x,f.y)}var g=c,h=c[0];a.moveTo(h.x,h.y);for(var e=0;e<g.length;e++){var f=g[e];a.lineTo(f.x,f.y)}},circle:function(a,b,c,d){a.arc(b,c,d,0,2*Math.PI,!1)}}))[a]},b.exports=e},{}],63:[function(a,b,c){"use strict";var d={};d.drawEdge=function(a,b,c){var d=b._private.rscratch,e=this.usePaths();if(!(d.badBezier||d.badLine||isNaN(d.allpts[0]))){var f=b._private.style;if(!(f.width.pfValue<=0)){var g=f["overlay-padding"].pfValue,h=f["overlay-opacity"].value,i=f["overlay-color"].value;if(c){if(0===h)return;this.strokeStyle(a,i[0],i[1],i[2],h),a.lineCap="round","self"!=d.edgeType||e||(a.lineCap="butt")}else{var j=f["line-color"].value;this.strokeStyle(a,j[0],j[1],j[2],f.opacity.value),a.lineCap="butt"}var k=f.width.pfValue+(c?2*g:0),l=c?"solid":f["line-style"].value;a.lineWidth=k;var m=f["shadow-blur"].pfValue,n=f["shadow-opacity"].value,o=f["shadow-color"].value,p=f["shadow-offset-x"].pfValue,q=f["shadow-offset-y"].pfValue;this.shadowStyle(a,o,c?0:n,m,p,q),this.drawEdgePath(b,a,d.allpts,l,k),this.drawArrowheads(a,b,c),this.shadowStyle(a,"transparent",0)}}},d.drawEdgePath=function(a,b,c,d,e){var f,g=a._private.rscratch,h=b,i=!1,j=this.usePaths();if(j){var k=c.join("$"),l=g.pathCacheKey&&g.pathCacheKey===k;l?(f=b=g.pathCache,i=!0):(f=b=new Path2D,g.pathCacheKey=k,g.pathCache=f)}if(h.setLineDash)switch(d){case"dotted":h.setLineDash([1,1]);break;case"dashed":h.setLineDash([6,3]);break;case"solid":h.setLineDash([])}if(!i)switch(b.beginPath&&b.beginPath(),b.moveTo(c[0],c[1]),g.edgeType){case"bezier":case"self":case"compound":case"multibezier":if(!g.badBezier)for(var m=2;m+3<c.length;m+=4)b.quadraticCurveTo(c[m],c[m+1],c[m+2],c[m+3]);break;case"straight":case"segments":case"haystack":if(!g.badLine)for(var m=2;m+1<c.length;m+=2)b.lineTo(c[m],c[m+1])}b=h,j?b.stroke(f):b.stroke(),b.setLineDash&&b.setLineDash([])},d.drawArrowheads=function(a,b,c){if(!c){var d=b._private.rscratch,e="haystack"===d.edgeType;e||this.drawArrowhead(a,b,"source",d.arrowStartX,d.arrowStartY,d.srcArrowAngle),this.drawArrowhead(a,b,"mid-target",d.midX,d.midY,d.midtgtArrowAngle),this.drawArrowhead(a,b,"mid-source",d.midX,d.midY,d.midsrcArrowAngle),e||this.drawArrowhead(a,b,"target",d.arrowEndX,d.arrowEndY,d.tgtArrowAngle)}},d.drawArrowhead=function(a,b,c,d,e,f){if(!(isNaN(d)||null==d||isNaN(e)||null==e||isNaN(f)||null==f)){var g=this,h=b._private.style,i=h[c+"-arrow-shape"].value;if("none"!==i){var j=a.globalCompositeOperation,k="hollow"===h[c+"-arrow-fill"].value?"both":"filled",l=h[c+"-arrow-fill"].value;"half-triangle-overshot"===i&&(l="hollow",k="hollow"),1===h.opacity.value&&"hollow"!==l||(a.globalCompositeOperation="destination-out",g.fillStyle(a,255,255,255,1),g.strokeStyle(a,255,255,255,1),g.drawArrowShape(b,c,a,k,h.width.pfValue,h[c+"-arrow-shape"].value,d,e,f),a.globalCompositeOperation=j);var m=h[c+"-arrow-color"].value;g.fillStyle(a,m[0],m[1],m[2],h.opacity.value),g.strokeStyle(a,m[0],m[1],m[2],h.opacity.value),g.drawArrowShape(b,c,a,l,h.width.pfValue,h[c+"-arrow-shape"].value,d,e,f)}}},d.drawArrowShape=function(a,b,c,d,e,f,g,h,i){var j,k=this,l=this.usePaths(),m=a._private.rscratch,n=!1,o=c,p={x:g,y:h},q=this.getArrowWidth(e),r=k.arrowShapes[f];if(l){var s=q+"$"+f+"$"+i+"$"+g+"$"+h;m.arrowPathCacheKey=m.arrowPathCacheKey||{},m.arrowPathCache=m.arrowPathCache||{};var t=m.arrowPathCacheKey[b]===s;t?(j=c=m.arrowPathCache[b],n=!0):(j=c=new Path2D,m.arrowPathCacheKey[b]=s,m.arrowPathCache[b]=j)}c.beginPath&&c.beginPath(),n||r.draw(c,q,i,p),!r.leavePathOpen&&c.closePath&&c.closePath(),c=o,"filled"!==d&&"both"!==d||(l?c.fill(j):c.fill()),"hollow"!==d&&"both"!==d||(c.lineWidth=r.matchEdgeWidth?e:1,c.lineJoin="miter",l?c.stroke(j):c.stroke())},b.exports=d},{}],64:[function(a,b,c){"use strict";var d={};d.safeDrawImage=function(a,b,c,d,e,f,g,h,i,j){var k=this;try{a.drawImage(b,c,d,e,f,g,h,i,j)}catch(a){k.data.canvasNeedsRedraw[k.NODE]=!0,k.data.canvasNeedsRedraw[k.DRAG]=!0,k.drawingImage=!0,k.redraw()}},d.drawInscribedImage=function(a,b,c){var d=this,e=c._private.position.x,f=c._private.position.y,g=c._private.style,h=g["background-fit"].value,i=g["background-position-x"],j=g["background-position-y"],k=g["background-repeat"].value,l=c.width(),m=c.height(),n=c._private.rscratch,o=g["background-clip"].value,p="node"===o,q=g["background-image-opacity"].value,r=b.width||b.cachedW,s=b.height||b.cachedH;null!=r&&null!=s||(document.body.appendChild(b),r=b.cachedW=b.width||b.offsetWidth,s=b.cachedH=b.height||b.offsetHeight,document.body.removeChild(b));var t=r,u=s,v=g["background-width"];"auto"!==v.value&&(t="%"===v.units?v.value/100*l:v.pfValue);var w=g["background-height"];if("auto"!==w.value&&(u="%"===w.units?w.value/100*m:w.pfValue),0!==t&&0!==u){if("contain"===h){var x=Math.min(l/t,m/u);t*=x,u*=x}else if("cover"===h){var x=Math.max(l/t,m/u);t*=x,u*=x}var y=e-l/2;y+="%"===i.units?(l-t)*i.value/100:i.pfValue;var z=f-m/2;z+="%"===j.units?(m-u)*j.value/100:j.pfValue,n.pathCache&&(y-=e,z-=f,e=0,f=0);var A=a.globalAlpha;if(a.globalAlpha=q,"no-repeat"===k)p&&(a.save(),n.pathCache?a.clip(n.pathCache):(d.nodeShapes[d.getNodeShape(c)].draw(a,e,f,l,m),a.clip())),d.safeDrawImage(a,b,0,0,r,s,y,z,t,u),p&&a.restore();else{var B=a.createPattern(b,k);a.fillStyle=B,d.nodeShapes[d.getNodeShape(c)].draw(a,e,f,l,m),a.translate(y,z),a.fill(),a.translate(-y,-z)}a.globalAlpha=A}},b.exports=d},{}],65:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){var f=f||5;a.beginPath(),a.moveTo(b+f,c),a.lineTo(b+d-f,c),a.quadraticCurveTo(b+d,c,b+d,c+f),a.lineTo(b+d,c+e-f),a.quadraticCurveTo(b+d,c+e,b+d-f,c+e),a.lineTo(b+f,c+e),a.quadraticCurveTo(b,c+e,b,c+e-f),a.lineTo(b,c+f),a.quadraticCurveTo(b,c,b+f,c),a.closePath(),a.fill()}var e=a("../../../is"),f={};f.drawEdgeText=function(a,b){var c=b._private.style.label.strValue;if(c&&!c.match(/^\s+$/)&&(!this.hideEdgesOnViewport||!(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning))){var d=b._private.style["font-size"].pfValue*b.cy().zoom(),f=b._private.style["min-zoomed-font-size"].pfValue;if(!(f>d)){a.textAlign="center",a.textBaseline="middle";var g=b._private.rscratch;if(e.number(g.labelX)&&e.number(g.labelY)){var h,i=b._private.style,j="autorotate"===i["edge-text-rotation"].strValue;j?(h=g.labelAngle,a.translate(g.labelX,g.labelY),a.rotate(h),this.drawText(a,b,0,0),a.rotate(-h),a.translate(-g.labelX,-g.labelY)):this.drawText(a,b,g.labelX,g.labelY)}}}},f.drawNodeText=function(a,b){var c=b._private.style.label.strValue;if(c&&!c.match(/^\s+$/)){var d=b._private.style["font-size"].pfValue*b.cy().zoom(),f=b._private.style["min-zoomed-font-size"].pfValue;if(!(f>d)){var g=b._private.style["text-halign"].strValue,h=b._private.style["text-valign"].strValue,i=b._private.rscratch;if(e.number(i.labelX)&&e.number(i.labelY)){switch(g){case"left":a.textAlign="right";break;case"right":a.textAlign="left";break;default:a.textAlign="center"}switch(h){case"top":a.textBaseline="bottom";break;case"bottom":a.textBaseline="top";break;default:a.textBaseline="middle"}this.drawText(a,b,i.labelX,i.labelY)}}}},f.getFontCache=function(a){var b;this.fontCaches=this.fontCaches||[];for(var c=0;c<this.fontCaches.length;c++)if(b=this.fontCaches[c],b.context===a)return b;return b={context:a},this.fontCaches.push(b),b},f.setupTextStyle=function(a,b){var c=b.effectiveOpacity(),d=b._private.style,e=d["font-style"].strValue,f=d["font-size"].pfValue+"px",g=d["font-family"].strValue,h=d["font-weight"].strValue,i=d["text-opacity"].value*d.opacity.value*c,j=d["text-outline-opacity"].value*i,k=d.color.value,l=d["text-outline-color"].value,m=d["text-shadow-blur"].pfValue,n=d["text-shadow-opacity"].value,o=d["text-shadow-color"].value,p=d["text-shadow-offset-x"].pfValue,q=d["text-shadow-offset-y"].pfValue,r=b._private.fontKey,s=this.getFontCache(a);s.key!==r&&(a.font=e+" "+h+" "+f+" "+g,s.key=r);var t=this.getLabelText(b);return a.lineJoin="round",this.fillStyle(a,k[0],k[1],k[2],i),this.strokeStyle(a,l[0],l[1],l[2],j),this.shadowStyle(a,o,n,m,p,q),t},f.drawText=function(a,b,c,e){var f=b._private,g=f.style,h=f.rstyle,i=f.rscratch,j=b.effectiveOpacity();if(0!==j&&0!==g["text-opacity"].value){var k=this.setupTextStyle(a,b),l=g["text-halign"].value,m=g["text-valign"].value;if(b.isEdge()&&(l="center",m="center"),b.isNode()){var n=g["padding-left"].pfValue,o=g["padding-right"].pfValue,p=g["padding-top"].pfValue,q=g["padding-bottom"].pfValue;c+=n/2,c-=o/2,e+=p/2,e-=q/2}if(null!=k&&!isNaN(c)&&!isNaN(e)){var r=g["text-background-opacity"].value,s=g["text-border-opacity"].value,t=g["text-border-width"].pfValue;if(r>0||t>0&&s>0){var u=4+t/2;b.isNode()&&("top"===m?e-=u:"bottom"===m&&(e+=u),"left"===l?c-=u:"right"===l&&(c+=u));var v=h.labelWidth,w=h.labelHeight,x=c;l&&("center"==l?x-=v/2:"left"==l&&(x-=v));var y=e;if(b.isNode()?"top"==m?y-=w:"center"==m&&(y-=w/2):y-=w/2,"autorotate"===g["edge-text-rotation"].strValue?(e=0,v+=4,x=c-v/2,y=e-w/2):(x-=u,y-=u,w+=2*u,v+=2*u),r>0){var z=a.fillStyle,A=g["text-background-color"].value;a.fillStyle="rgba("+A[0]+","+A[1]+","+A[2]+","+r*j+")";var B=g["text-background-shape"].strValue;"roundrectangle"==B?d(a,x,y,v,w,2):a.fillRect(x,y,v,w),a.fillStyle=z}if(t>0&&s>0){var C=a.strokeStyle,D=a.lineWidth,E=g["text-border-color"].value,F=g["text-border-style"].value;if(a.strokeStyle="rgba("+E[0]+","+E[1]+","+E[2]+","+s*j+")",a.lineWidth=t,a.setLineDash)switch(F){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash([4,2]);break;case"double":a.lineWidth=t/4,a.setLineDash([]);break;case"solid":a.setLineDash([])}if(a.strokeRect(x,y,v,w),"double"===F){var G=t/2;a.strokeRect(x+G,y+G,v-2*G,w-2*G)}a.setLineDash&&a.setLineDash([]),a.lineWidth=D,a.strokeStyle=C}}var H=2*g["text-outline-width"].pfValue;if(H>0&&(a.lineWidth=H),"wrap"===g["text-wrap"].value){var I=i.labelWrapCachedLines,J=h.labelHeight/I.length;switch(m){case"top":e-=(I.length-1)*J;break;case"bottom":break;default:case"center":e-=(I.length-1)*J/2}for(var K=0;K<I.length;K++)H>0&&a.strokeText(I[K],c,e),a.fillText(I[K],c,e),e+=J}else H>0&&a.strokeText(k,c,e),a.fillText(k,c,e);this.shadowStyle(a,"transparent",0)}}},b.exports=f},{"../../../is":77}],66:[function(a,b,c){"use strict";var d=a("../../../is"),e={};e.drawNode=function(a,b,c){var e,f,g=this,h=b._private.style,i=b._private.rscratch,j=b._private,k=j.position;if(d.number(k.x)&&d.number(k.y)){var l,m=this.usePaths(),n=a,o=!1,p=h["overlay-padding"].pfValue,q=h["overlay-opacity"].value,r=h["overlay-color"].value;if(!c||0!==q){var s=b.effectiveOpacity();if(0!==s)if(e=b.width()+h["padding-left"].pfValue+h["padding-right"].pfValue,f=b.height()+h["padding-top"].pfValue+h["padding-bottom"].pfValue,a.lineWidth=h["border-width"].pfValue,void 0!==c&&c)q>0&&(this.fillStyle(a,r[0],r[1],r[2],q),g.nodeShapes.roundrectangle.draw(a,b._private.position.x,b._private.position.y,e+2*p,f+2*p),a.fill());else{var t,u=h["background-image"].value[2]||h["background-image"].value[1];if(void 0!==u){t=this.getCachedImage(u,function(){g.data.canvasNeedsRedraw[g.NODE]=!0,g.data.canvasNeedsRedraw[g.DRAG]=!0,g.drawingImage=!0,g.redraw()});var v=j.backgrounding;j.backgrounding=!t.complete,v!==j.backgrounding&&b.updateStyle(!1)}var w=h["background-color"].value,x=h["border-color"].value,y=h["border-style"].value;this.fillStyle(a,w[0],w[1],w[2],h["background-opacity"].value*s),this.strokeStyle(a,x[0],x[1],x[2],h["border-opacity"].value*s);var z=h["shadow-blur"].pfValue,A=h["shadow-opacity"].value,B=h["shadow-color"].value,C=h["shadow-offset-x"].pfValue,D=h["shadow-offset-y"].pfValue;if(this.shadowStyle(a,B,A,z,C,D),a.lineJoin="miter",a.setLineDash)switch(y){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash([4,2]);break;case"solid":case"double":a.setLineDash([])}var E=h.shape.strValue;if(m){var F=E+"$"+e+"$"+f;a.translate(k.x,k.y),i.pathCacheKey===F?(l=a=i.pathCache,o=!0):(l=a=new Path2D,i.pathCacheKey=F,i.pathCache=l)}if(!o){var G=k;m&&(G={x:0,y:0}),g.nodeShapes[this.getNodeShape(b)].draw(a,G.x,G.y,e,f)}a=n,m?a.fill(l):a.fill(),this.shadowStyle(a,"transparent",0),void 0!==u&&t.complete&&this.drawInscribedImage(a,t,b);var H=h["background-blacken"].value,I=h["border-width"].pfValue;if(this.hasPie(b)&&(this.drawPie(a,b,s),0===H&&0===I||m||g.nodeShapes[this.getNodeShape(b)].draw(a,k.x,k.y,e,f)),H>0?(this.fillStyle(a,0,0,0,H),m?a.fill(l):a.fill()):0>H&&(this.fillStyle(a,255,255,255,-H),m?a.fill(l):a.fill()),I>0&&(m?a.stroke(l):a.stroke(),"double"===y)){a.lineWidth=h["border-width"].pfValue/3;var J=a.globalCompositeOperation;a.globalCompositeOperation="destination-out",m?a.stroke(l):a.stroke(),a.globalCompositeOperation=J}m&&a.translate(-k.x,-k.y),a.setLineDash&&a.setLineDash([])}}}},e.hasPie=function(a){return a=a[0],a._private.hasPie},e.drawPie=function(a,b,c){b=b[0];var d=b._private,e=b.cy().style(),f=d.style,g=f["pie-size"],h=b.width(),i=b.height(),j=d.position.x,k=d.position.y,l=Math.min(h,i)/2,m=0,n=this.usePaths();n&&(j=0,k=0),"%"===g.units?l=l*g.value/100:void 0!==g.pfValue&&(l=g.pfValue/2);for(var o=1;o<=e.pieBackgroundN;o++){var p=f["pie-"+o+"-background-size"].value,q=f["pie-"+o+"-background-color"].value,r=f["pie-"+o+"-background-opacity"].value*c,s=p/100;s+m>1&&(s=1-m);var t=1.5*Math.PI+2*Math.PI*m,u=2*Math.PI*s,v=t+u;0===p||m>=1||m+s>1||(a.beginPath(),a.moveTo(j,k),a.arc(j,k,l,t,v),a.closePath(),this.fillStyle(a,q[0],q[1],q[2],r),a.fill(),m+=s)}},b.exports=e},{"../../../is":77}],67:[function(a,b,c){"use strict";var d={},e=a("../../../util"),f=a("../../../math"),g=100;d.getPixelRatio=function(){var a=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var b=a.backingStorePixelRatio||a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/b},d.paintCache=function(a){for(var b,c=this.paintCaches=this.paintCaches||[],d=!0,e=0;e<c.length;e++)if(b=c[e],b.context===a){d=!1;break}return d&&(b={context:a},c.push(b)),b},d.fillStyle=function(a,b,c,d,e){a.fillStyle="rgba("+b+","+c+","+d+","+e+")"},d.strokeStyle=function(a,b,c,d,e){a.strokeStyle="rgba("+b+","+c+","+d+","+e+")"},d.shadowStyle=function(a,b,c,d,e,f){var g=this.cy.zoom(),h=this.paintCache(a);0===h.shadowOpacity&&0===c||(h.shadowOpacity=c,c>0?(a.shadowBlur=d*g,a.shadowColor="rgba("+b[0]+","+b[1]+","+b[2]+","+c+")",a.shadowOffsetX=e*g,a.shadowOffsetY=f*g):(a.shadowBlur=0,a.shadowColor="transparent"))},d.matchCanvasSize=function(a){var b=this,c=b.data,d=a.clientWidth,e=a.clientHeight,f=b.getPixelRatio(),g=b.motionBlurPxRatio;a!==b.data.bufferCanvases[b.MOTIONBLUR_BUFFER_NODE]&&a!==b.data.bufferCanvases[b.MOTIONBLUR_BUFFER_DRAG]||(f=g);var h,i=d*f,j=e*f;if(i!==b.canvasWidth||j!==b.canvasHeight){b.fontCaches=null;var k=c.canvasContainer;k.style.width=d+"px",k.style.height=e+"px";for(var l=0;l<b.CANVAS_LAYERS;l++)h=c.canvases[l],h.width===i&&h.height===j||(h.width=i,h.height=j,h.style.width=d+"px",h.style.height=e+"px");for(var l=0;l<b.BUFFER_COUNT;l++)h=c.bufferCanvases[l],h.width===i&&h.height===j||(h.width=i,h.height=j,h.style.width=d+"px",h.style.height=e+"px");b.textureMult=1,1>=f&&(h=c.bufferCanvases[b.TEXTURE_BUFFER],b.textureMult=2,h.width=i*b.textureMult,h.height=j*b.textureMult),b.canvasWidth=i,b.canvasHeight=j}},d.renderTo=function(a,b,c,d){this.render({forcedContext:a,forcedZoom:b,forcedPan:c,drawAllLayers:!0,forcedPxRatio:d})},d.render=function(a){function b(a,b,c,d,e){var f=a.globalCompositeOperation;a.globalCompositeOperation="destination-out",m.fillStyle(a,255,255,255,m.motionBlurTransparency),a.fillRect(b,c,d,e),a.globalCompositeOperation=f}function c(a,c){var d,e,f,g;m.clearingMotionBlur||a!==p.bufferContexts[m.MOTIONBLUR_BUFFER_NODE]&&a!==p.bufferContexts[m.MOTIONBLUR_BUFFER_DRAG]?(d=D,e=B,f=m.canvasWidth,g=m.canvasHeight):(d={x:C.x*t,y:C.y*t},e=A*t,f=m.canvasWidth*t,g=m.canvasHeight*t),a.setTransform(1,0,0,1,0,0),"motionBlur"===c?b(a,0,0,f,g):h||void 0!==c&&!c||a.clearRect(0,0,f,g),i||(a.translate(d.x,d.y),a.scale(e,e)),l&&a.translate(l.x,l.y),k&&a.scale(k,k)}function d(a,b){for(var c=a.eles,d=0;d<c.length;d++){var e=c[d];e.isNode()?(m.drawNode(b,e),Q||m.drawNodeText(b,e),m.drawNode(b,e,!0)):P||(m.drawEdge(b,e),Q||m.drawEdgeText(b,e),m.drawEdge(b,e,!0))}}a=a||e.staticEmptyObject();var h=a.forcedContext,i=a.drawAllLayers,j=a.drawOnlyNodeLayer,k=a.forcedZoom,l=a.forcedPan,m=this,n=void 0===a.forcedPxRatio?this.getPixelRatio():a.forcedPxRatio,o=m.cy,p=m.data,q=p.canvasNeedsRedraw,r=m.textureOnViewport&&!h&&(m.pinching||m.hoverData.dragging||m.swipePanning||m.data.wheelZooming),s=void 0!==a.motionBlur?a.motionBlur:m.motionBlur,t=m.motionBlurPxRatio,u=o.hasCompoundNodes(),v=m.hoverData.draggingEles,w=!(!m.hoverData.selecting&&!m.touchData.selecting);s=s&&!h&&m.motionBlurEnabled&&!w;var x=s;h||(m.prevPxRatio!==n&&(m.invalidateContainerClientCoordsCache(),m.matchCanvasSize(m.container),m.redrawHint("eles",!0),m.redrawHint("drag",!0)),m.prevPxRatio=n),!h&&m.motionBlurTimeout&&clearTimeout(m.motionBlurTimeout),s&&(null==m.mbFrames&&(m.mbFrames=0),m.drawingImage||m.mbFrames++,m.mbFrames<3&&(x=!1),m.mbFrames>m.minMbLowQualFrames&&(m.motionBlurPxRatio=m.mbPxRBlurry)),m.clearingMotionBlur&&(m.motionBlurPxRatio=1),m.textureDrawLastFrame&&!r&&(q[m.NODE]=!0,q[m.SELECT_BOX]=!0);var y=m.getCachedEdges(),z=o.style()._private.coreStyle,A=o.zoom(),B=void 0!==k?k:A,C=o.pan(),D={x:C.x,y:C.y},E={zoom:A,pan:{x:C.x,y:C.y}},F=m.prevViewport,G=void 0===F||E.zoom!==F.zoom||E.pan.x!==F.pan.x||E.pan.y!==F.pan.y;G||v&&!u||(m.motionBlurPxRatio=1),l&&(D=l),B*=n,D.x*=n,D.y*=n;var H={drag:{nodes:[],edges:[],eles:[]},nondrag:{nodes:[],edges:[],eles:[]}};if(r||(m.textureDrawLastFrame=!1),r){m.textureDrawLastFrame=!0;var I;if(!m.textureCache){m.textureCache={},I=m.textureCache.bb=o.elements().boundingBox(),m.textureCache.texture=m.data.bufferCanvases[m.TEXTURE_BUFFER];var J=m.data.bufferContexts[m.TEXTURE_BUFFER];J.setTransform(1,0,0,1,0,0),J.clearRect(0,0,m.canvasWidth*m.textureMult,m.canvasHeight*m.textureMult),m.render({forcedContext:J,drawOnlyNodeLayer:!0,forcedPxRatio:n*m.textureMult});var E=m.textureCache.viewport={zoom:o.zoom(),pan:o.pan(),width:m.canvasWidth,height:m.canvasHeight};E.mpan={x:(0-E.pan.x)/E.zoom,y:(0-E.pan.y)/E.zoom}}q[m.DRAG]=!1,q[m.NODE]=!1;var K=p.contexts[m.NODE],L=m.textureCache.texture,E=m.textureCache.viewport;I=m.textureCache.bb,K.setTransform(1,0,0,1,0,0),s?b(K,0,0,E.width,E.height):K.clearRect(0,0,E.width,E.height);var M=z["outside-texture-bg-color"].value,N=z["outside-texture-bg-opacity"].value;m.fillStyle(K,M[0],M[1],M[2],N),K.fillRect(0,0,E.width,E.height);var A=o.zoom();c(K,!1),K.clearRect(E.mpan.x,E.mpan.y,E.width/E.zoom/n,E.height/E.zoom/n),K.drawImage(L,E.mpan.x,E.mpan.y,E.width/E.zoom/n,E.height/E.zoom/n)}else m.textureOnViewport&&!h&&(m.textureCache=null);var O=m.pinching||m.hoverData.dragging||m.swipePanning||m.data.wheelZooming||m.hoverData.draggingEles,P=m.hideEdgesOnViewport&&O,Q=m.hideLabelsOnViewport&&O;if(q[m.DRAG]||q[m.NODE]||i||j){P||m.findEdgeControlPoints(y);for(var R=m.getCachedZSortedEles(),S=o.extent(),T=0;T<R.length;T++){var U,V=R[T],I=h?null:V.boundingBox(),W=!!h||f.boundingBoxesIntersect(S,I);W&&(U=V._private.rscratch.inDragLayer?H.drag:H.nondrag,U.eles.push(V))}}var X=[];if(X[m.NODE]=!q[m.NODE]&&s&&!m.clearedForMotionBlur[m.NODE]||m.clearingMotionBlur,X[m.NODE]&&(m.clearedForMotionBlur[m.NODE]=!0),X[m.DRAG]=!q[m.DRAG]&&s&&!m.clearedForMotionBlur[m.DRAG]||m.clearingMotionBlur,X[m.DRAG]&&(m.clearedForMotionBlur[m.DRAG]=!0),q[m.NODE]||i||j||X[m.NODE]){var Y=s&&!X[m.NODE]&&1!==t,K=h||(Y?m.data.bufferContexts[m.MOTIONBLUR_BUFFER_NODE]:p.contexts[m.NODE]),Z=s&&!Y?"motionBlur":void 0;c(K,Z),d(H.nondrag,K),i||s||(q[m.NODE]=!1)}if(!j&&(q[m.DRAG]||i||X[m.DRAG])){var Y=s&&!X[m.DRAG]&&1!==t,K=h||(Y?m.data.bufferContexts[m.MOTIONBLUR_BUFFER_DRAG]:p.contexts[m.DRAG]);c(K,s&&!Y?"motionBlur":void 0),d(H.drag,K),i||s||(q[m.DRAG]=!1)}if(m.showFps||!j&&q[m.SELECT_BOX]&&!i){var K=h||p.contexts[m.SELECT_BOX];if(c(K),1==m.selection[4]&&(m.hoverData.selecting||m.touchData.selecting)){var A=m.cy.zoom(),$=z["selection-box-border-width"].value/A;K.lineWidth=$,K.fillStyle="rgba("+z["selection-box-color"].value[0]+","+z["selection-box-color"].value[1]+","+z["selection-box-color"].value[2]+","+z["selection-box-opacity"].value+")",K.fillRect(m.selection[0],m.selection[1],m.selection[2]-m.selection[0],m.selection[3]-m.selection[1]),$>0&&(K.strokeStyle="rgba("+z["selection-box-border-color"].value[0]+","+z["selection-box-border-color"].value[1]+","+z["selection-box-border-color"].value[2]+","+z["selection-box-opacity"].value+")",K.strokeRect(m.selection[0],m.selection[1],m.selection[2]-m.selection[0],m.selection[3]-m.selection[1]))}if(p.bgActivePosistion&&!m.hoverData.selecting){var A=m.cy.zoom(),_=p.bgActivePosistion;K.fillStyle="rgba("+z["active-bg-color"].value[0]+","+z["active-bg-color"].value[1]+","+z["active-bg-color"].value[2]+","+z["active-bg-opacity"].value+")",K.beginPath(),K.arc(_.x,_.y,z["active-bg-size"].pfValue/A,0,2*Math.PI),K.fill()}var aa=m.lastRedrawTime;if(m.showFps&&aa){aa=Math.round(aa);var ba=Math.round(1e3/aa);K.setTransform(1,0,0,1,0,0),K.fillStyle="rgba(255, 0, 0, 0.75)",K.strokeStyle="rgba(255, 0, 0, 0.75)",K.lineWidth=1,K.fillText("1 frame = "+aa+" ms = "+ba+" fps",0,20);var ca=60;K.strokeRect(0,30,250,20),K.fillRect(0,30,250*Math.min(ba/ca,1),20)}i||(q[m.SELECT_BOX]=!1)}if(s&&1!==t){var da=p.contexts[m.NODE],ea=m.data.bufferCanvases[m.MOTIONBLUR_BUFFER_NODE],fa=p.contexts[m.DRAG],ga=m.data.bufferCanvases[m.MOTIONBLUR_BUFFER_DRAG],ha=function(a,c,d){a.setTransform(1,0,0,1,0,0),d||!x?a.clearRect(0,0,m.canvasWidth,m.canvasHeight):b(a,0,0,m.canvasWidth,m.canvasHeight);var e=t;a.drawImage(c,0,0,m.canvasWidth*e,m.canvasHeight*e,0,0,m.canvasWidth,m.canvasHeight)};(q[m.NODE]||X[m.NODE])&&(ha(da,ea,X[m.NODE]),q[m.NODE]=!1),(q[m.DRAG]||X[m.DRAG])&&(ha(fa,ga,X[m.DRAG]),q[m.DRAG]=!1)}m.prevViewport=E,m.clearingMotionBlur&&(m.clearingMotionBlur=!1,m.motionBlurCleared=!0,m.motionBlur=!0),s&&(m.motionBlurTimeout=setTimeout(function(){m.motionBlurTimeout=null,m.clearedForMotionBlur[m.NODE]=!1,m.clearedForMotionBlur[m.DRAG]=!1,m.motionBlur=!1,m.clearingMotionBlur=!r,m.mbFrames=0,q[m.NODE]=!0,q[m.DRAG]=!0,m.redraw()},g)),m.drawingImage=!1,h||m.initrender||(m.initrender=!0,o.trigger("initrender")),h||o.triggerOnRender()},b.exports=d},{"../../../math":79,"../../../util":94}],68:[function(a,b,c){"use strict";var d=a("../../../math"),e={};e.drawPolygonPath=function(a,b,c,d,e,f){var g=d/2,h=e/2;a.beginPath&&a.beginPath(),a.moveTo(b+g*f[0],c+h*f[1]);for(var i=1;i<f.length/2;i++)a.lineTo(b+g*f[2*i],c+h*f[2*i+1]);a.closePath()},e.drawRoundRectanglePath=function(a,b,c,e,f,g){var h=e/2,i=f/2,j=d.getRoundRectangleRadius(e,f);a.beginPath&&a.beginPath(),a.moveTo(b,c-i),a.arcTo(b+h,c-i,b+h,c,j),a.arcTo(b+h,c+i,b,c+i,j),a.arcTo(b-h,c+i,b-h,c,j),a.arcTo(b-h,c-i,b,c-i,j),a.lineTo(b,c-i),a.closePath()};for(var f=Math.sin(0),g=Math.cos(0),h={},i={},j=Math.PI/40,k=0*Math.PI;k<2*Math.PI;k+=j)h[k]=Math.sin(k),i[k]=Math.cos(k);e.drawEllipsePath=function(a,b,c,d,e){if(a.beginPath&&a.beginPath(),a.ellipse)a.ellipse(b,c,d/2,e/2,0,0,2*Math.PI);else for(var k,l,m=d/2,n=e/2,o=0*Math.PI;o<2*Math.PI;o+=j)k=b-m*h[o]*f+m*i[o]*g,l=c+n*i[o]*f+n*h[o]*g,0===o?a.moveTo(k,l):a.lineTo(k,l);a.closePath()},b.exports=e},{"../../../math":79}],69:[function(a,b,c){"use strict";var d=a("../../../is"),e={};e.createBuffer=function(a,b){var c=document.createElement("canvas");return c.width=a,c.height=b,[c,c.getContext("2d")]},e.bufferCanvasImage=function(a){var b=this.cy,c=b.elements().boundingBox(),e=a.full?Math.ceil(c.w):this.container.clientWidth,f=a.full?Math.ceil(c.h):this.container.clientHeight,g=1;if(void 0!==a.scale)e*=a.scale,f*=a.scale,g=a.scale;else if(d.number(a.maxWidth)||d.number(a.maxHeight)){var h=1/0,i=1/0;d.number(a.maxWidth)&&(h=g*a.maxWidth/e),d.number(a.maxHeight)&&(i=g*a.maxHeight/f),g=Math.min(h,i),e*=g,f*=g}var j=document.createElement("canvas");j.width=e,j.height=f,j.style.width=e+"px",j.style.height=f+"px";var k=j.getContext("2d");if(e>0&&f>0)if(k.clearRect(0,0,e,f),a.bg&&(k.fillStyle=a.bg,k.rect(0,0,e,f),k.fill()),k.globalCompositeOperation="source-over",a.full)this.render({forcedContext:k,drawAllLayers:!0,forcedZoom:g,forcedPan:{x:-c.x1*g,y:-c.y1*g},forcedPxRatio:1});else{var l=b.pan(),m={x:l.x*g,y:l.y*g},n=b.zoom()*g;this.render({forcedContext:k,drawAllLayers:!0,forcedZoom:n,forcedPan:m,forcedPxRatio:1})}return j},e.png=function(a){return this.bufferCanvasImage(a).toDataURL("image/png")},e.jpg=function(a){return this.bufferCanvasImage(a).toDataURL("image/jpeg")},b.exports=e},{"../../../is":77}],70:[function(a,b,c){"use strict";function d(a){var b=this;b.data={canvases:new Array(h.CANVAS_LAYERS),contexts:new Array(h.CANVAS_LAYERS),canvasNeedsRedraw:new Array(h.CANVAS_LAYERS),bufferCanvases:new Array(h.BUFFER_COUNT),bufferContexts:new Array(h.CANVAS_LAYERS)},b.data.canvasContainer=document.createElement("div");var c=b.data.canvasContainer.style;b.data.canvasContainer.setAttribute("style","-webkit-tap-highlight-color: rgba(0,0,0,0);"),c.position="relative",c.zIndex="0",c.overflow="hidden";var d=a.cy.container();d.appendChild(b.data.canvasContainer),d.setAttribute("style",(d.getAttribute("style")||"")+"-webkit-tap-highlight-color: rgba(0,0,0,0);");for(var e=0;e<h.CANVAS_LAYERS;e++){var g=b.data.canvases[e]=document.createElement("canvas");b.data.contexts[e]=g.getContext("2d"),
g.setAttribute("style","-webkit-user-select: none; -moz-user-select: -moz-none; user-select: none; -webkit-tap-highlight-color: rgba(0,0,0,0); outline-style: none;"+(f.ms()?" -ms-touch-action: none; touch-action: none; ":"")),g.style.position="absolute",g.setAttribute("data-id","layer"+e),g.style.zIndex=String(h.CANVAS_LAYERS-e),b.data.canvasContainer.appendChild(g),b.data.canvasNeedsRedraw[e]=!1}b.data.topCanvas=b.data.canvases[0],b.data.canvases[h.NODE].setAttribute("data-id","layer"+h.NODE+"-node"),b.data.canvases[h.SELECT_BOX].setAttribute("data-id","layer"+h.SELECT_BOX+"-selectbox"),b.data.canvases[h.DRAG].setAttribute("data-id","layer"+h.DRAG+"-drag");for(var e=0;e<h.BUFFER_COUNT;e++)b.data.bufferCanvases[e]=document.createElement("canvas"),b.data.bufferContexts[e]=b.data.bufferCanvases[e].getContext("2d"),b.data.bufferCanvases[e].style.position="absolute",b.data.bufferCanvases[e].setAttribute("data-id","buffer"+e),b.data.bufferCanvases[e].style.zIndex=String(-e-1),b.data.bufferCanvases[e].style.visibility="hidden";b.pathsEnabled=!0}var e=a("../../../util"),f=a("../../../is"),g=d,h=d.prototype;h.CANVAS_LAYERS=3,h.SELECT_BOX=0,h.DRAG=1,h.NODE=2,h.BUFFER_COUNT=3,h.TEXTURE_BUFFER=0,h.MOTIONBLUR_BUFFER_NODE=1,h.MOTIONBLUR_BUFFER_DRAG=2,h.redrawHint=function(a,b){var c=this;switch(a){case"eles":c.data.canvasNeedsRedraw[h.NODE]=b;break;case"drag":c.data.canvasNeedsRedraw[h.DRAG]=b;break;case"select":c.data.canvasNeedsRedraw[h.SELECT_BOX]=b}};var i="undefined"!=typeof Path2D;h.path2dEnabled=function(a){return void 0===a?this.pathsEnabled:void(this.pathsEnabled=!!a)},h.usePaths=function(){return i&&this.pathsEnabled},[a("./arrow-shapes"),a("./drawing-edges"),a("./drawing-images"),a("./drawing-label-text"),a("./drawing-nodes"),a("./drawing-redraw"),a("./drawing-shapes"),a("./export-image"),a("./node-shapes")].forEach(function(a){e.extend(h,a)}),b.exports=g},{"../../../is":77,"../../../util":94,"./arrow-shapes":62,"./drawing-edges":63,"./drawing-images":64,"./drawing-label-text":65,"./drawing-nodes":66,"./drawing-redraw":67,"./drawing-shapes":68,"./export-image":69,"./node-shapes":71}],71:[function(a,b,c){"use strict";var d,e={};e.nodeShapeImpl=function(a){var b=this;return(d||(d={ellipse:function(a,c,d,e,f){b.drawEllipsePath(a,c,d,e,f)},polygon:function(a,c,d,e,f,g){b.drawPolygonPath(a,c,d,e,f,g)},roundrectangle:function(a,c,d,e,f){b.drawRoundRectanglePath(a,c,d,e,f,10)}}))[a]},b.exports=e},{}],72:[function(a,b,c){"use strict";b.exports=[{name:"null",impl:a("./null")},{name:"base",impl:a("./base")},{name:"canvas",impl:a("./canvas")}]},{"./base":58,"./canvas":70,"./null":73}],73:[function(a,b,c){"use strict";function d(a){this.options=a,this.notifications=0}var e=function(){};d.prototype={recalculateRenderedStyle:e,notify:function(){this.notifications++},init:e},b.exports=d},{}],74:[function(a,b,c){"use strict";var d=a("./is"),e=a("./util"),f=a("./thread"),g=a("./promise"),h=a("./define"),i=function(b){if(!(this instanceof i))return new i(b);this._private={pass:[]};var c=4;if(d.number(b),"undefined"!=typeof navigator&&null!=navigator.hardwareConcurrency)b=navigator.hardwareConcurrency;else try{b=a("os").cpus().length}catch(a){b=c}for(var e=0;b>e;e++)this[e]=new f;this.length=b},j=i.prototype;e.extend(j,{instanceString:function(){return"fabric"},require:function(a,b){for(var c=0;c<this.length;c++){var d=this[c];d.require(a,b)}return this},random:function(){var a=Math.round((this.length-1)*Math.random()),b=this[a];return b},run:function(a){var b=this._private.pass.shift();return this.random().pass(b).run(a)},message:function(a){return this.random().message(a)},broadcast:function(a){for(var b=0;b<this.length;b++){var c=this[b];c.message(a)}return this},stop:function(){for(var a=0;a<this.length;a++){var b=this[a];b.stop()}return this},pass:function(a){var b=this._private.pass;if(!d.array(a))throw"Only arrays may be used with fabric.pass()";return b.push(a),this},spreadSize:function(){var a=Math.ceil(this._private.pass[0].length/this.length);return a=Math.max(1,a)},spread:function(a){for(var b=this,c=b._private,d=b.spreadSize(),e=c.pass.shift().concat([]),f=[],h=0;h<this.length;h++){var i=this[h],j=e.splice(0,d),k=i.pass(j).run(a);f.push(k);var l=0===e.length;if(l)break}return g.all(f).then(function(a){for(var b=[],c=0,d=0;d<a.length;d++)for(var e=a[d],f=0;f<e.length;f++){var g=e[f];b[c++]=g}return b})},map:function(a){var b=this;return b.require(a,"_$_$_fabmap"),b.spread(function(a){var b=[],c=resolve;resolve=function(a){b.push(a)};for(var d=0;d<a.length;d++){var e=b.length,f=_$_$_fabmap(a[d]),g=e===b.length;g&&b.push(f)}return resolve=c,b})},filter:function(a){var b=this._private,c=b.pass[0];return this.map(a).then(function(a){for(var b=[],d=0;d<c.length;d++){var e=c[d],f=a[d];f&&b.push(e)}return b})},sort:function(a){var b=this,c=this._private.pass[0].length,d=this.spreadSize();return a=a||function(a,b){return b>a?-1:a>b?1:0},b.require(a,"_$_$_cmp"),b.spread(function(a){var b=a.sort(_$_$_cmp);resolve(b)}).then(function(b){for(var e=function(d,e,f){e=Math.min(e,c),f=Math.min(f,c);for(var g=d,h=e,i=[],j=g;f>j;j++){var k=b[d],l=b[e];h>d&&(e>=f||a(k,l)<=0)?(i.push(k),d++):(i.push(l),e++)}for(var j=0;j<i.length;j++){var m=g+j;b[m]=i[j]}},f=d;c>f;f*=2)for(var g=0;c>g;g+=2*f)e(g,g+f,g+2*f);return b})}});var k=function(a){return a=a||{},function(b,c){var d=this._private.pass.shift();return this.random().pass(d)[a.threadFn](b,c)}};e.extend(j,{randomMap:k({threadFn:"map"}),reduce:k({threadFn:"reduce"}),reduceRight:k({threadFn:"reduceRight"})});var l=j;l.promise=l.run,l.terminate=l.halt=l.stop,l.include=l.require,e.extend(j,{on:h.on(),one:h.on({unbindSelfOnTrigger:!0}),off:h.off(),trigger:h.trigger()}),h.eventAliasesOn(j),b.exports=i},{"./define":41,"./is":77,"./promise":80,"./thread":92,"./util":94,os:void 0}],75:[function(a,b,c){"use strict";(function(){var a,d,e,f,g,h,i,j,k,l,m,n,o,p,q;e=Math.floor,l=Math.min,d=function(a,b){return b>a?-1:a>b?1:0},k=function(a,b,c,f,g){var h;if(null==c&&(c=0),null==g&&(g=d),0>c)throw new Error("lo must be non-negative");for(null==f&&(f=a.length);f>c;)h=e((c+f)/2),g(b,a[h])<0?f=h:c=h+1;return[].splice.apply(a,[c,c-c].concat(b)),b},h=function(a,b,c){return null==c&&(c=d),a.push(b),p(a,0,a.length-1,c)},g=function(a,b){var c,e;return null==b&&(b=d),c=a.pop(),a.length?(e=a[0],a[0]=c,q(a,0,b)):e=c,e},j=function(a,b,c){var e;return null==c&&(c=d),e=a[0],a[0]=b,q(a,0,c),e},i=function(a,b,c){var e;return null==c&&(c=d),a.length&&c(a[0],b)<0&&(e=[a[0],b],b=e[0],a[0]=e[1],q(a,0,c)),b},f=function(a,b){var c,f,g,h,i,j;for(null==b&&(b=d),h=function(){j=[];for(var b=0,c=e(a.length/2);c>=0?c>b:b>c;c>=0?b++:b--)j.push(b);return j}.apply(this).reverse(),i=[],f=0,g=h.length;g>f;f++)c=h[f],i.push(q(a,c,b));return i},o=function(a,b,c){var e;return null==c&&(c=d),e=a.indexOf(b),-1!==e?(p(a,0,e,c),q(a,e,c)):void 0},m=function(a,b,c){var e,g,h,j,k;if(null==c&&(c=d),g=a.slice(0,b),!g.length)return g;for(f(g,c),k=a.slice(b),h=0,j=k.length;j>h;h++)e=k[h],i(g,e,c);return g.sort(c).reverse()},n=function(a,b,c){var e,h,i,j,m,n,o,p,q,r;if(null==c&&(c=d),10*b<=a.length){if(j=a.slice(0,b).sort(c),!j.length)return j;for(i=j[j.length-1],p=a.slice(b),m=0,o=p.length;o>m;m++)e=p[m],c(e,i)<0&&(k(j,e,0,null,c),j.pop(),i=j[j.length-1]);return j}for(f(a,c),r=[],h=n=0,q=l(b,a.length);q>=0?q>n:n>q;h=q>=0?++n:--n)r.push(g(a,c));return r},p=function(a,b,c,e){var f,g,h;for(null==e&&(e=d),f=a[c];c>b&&(h=c-1>>1,g=a[h],e(f,g)<0);)a[c]=g,c=h;return a[c]=f},q=function(a,b,c){var e,f,g,h,i;for(null==c&&(c=d),f=a.length,i=b,g=a[b],e=2*b+1;f>e;)h=e+1,f>h&&!(c(a[e],a[h])<0)&&(e=h),a[b]=a[e],b=e,e=2*b+1;return a[b]=g,p(a,i,b,c)},a=function(){function a(a){this.cmp=null!=a?a:d,this.nodes=[]}return a.push=h,a.pop=g,a.replace=j,a.pushpop=i,a.heapify=f,a.updateItem=o,a.nlargest=m,a.nsmallest=n,a.prototype.push=function(a){return h(this.nodes,a,this.cmp)},a.prototype.pop=function(){return g(this.nodes,this.cmp)},a.prototype.peek=function(){return this.nodes[0]},a.prototype.contains=function(a){return-1!==this.nodes.indexOf(a)},a.prototype.replace=function(a){return j(this.nodes,a,this.cmp)},a.prototype.pushpop=function(a){return i(this.nodes,a,this.cmp)},a.prototype.heapify=function(){return f(this.nodes,this.cmp)},a.prototype.updateItem=function(a){return o(this.nodes,a,this.cmp)},a.prototype.clear=function(){return this.nodes=[]},a.prototype.empty=function(){return 0===this.nodes.length},a.prototype.size=function(){return this.nodes.length},a.prototype.clone=function(){var b;return b=new a,b.nodes=this.nodes.slice(0),b},a.prototype.toArray=function(){return this.nodes.slice(0)},a.prototype.insert=a.prototype.push,a.prototype.top=a.prototype.peek,a.prototype.front=a.prototype.peek,a.prototype.has=a.prototype.contains,a.prototype.copy=a.prototype.clone,a}(),function(a,d){return"function"==typeof define&&define.amd?define([],d):"object"==typeof c?b.exports=d():a.Heap=d()}(this,function(){return a})}).call(this)},{}],76:[function(a,b,c){"use strict";var d=a("./window"),e=a("./is"),f=a("./core"),g=a("./extension"),h=a("./jquery-plugin"),i=a("./stylesheet"),j=a("./thread"),k=a("./fabric"),l=function(a){return void 0===a&&(a={}),e.plainObject(a)?new f(a):e.string(a)?g.apply(g,arguments):void 0};l.version="2.6.7",d&&d.jQuery&&h(d.jQuery,l),l.registerJquery=function(a){h(a,l)},l.stylesheet=l.Stylesheet=i,l.thread=l.Thread=j,l.fabric=l.Fabric=k,b.exports=l},{"./core":34,"./extension":43,"./fabric":74,"./is":77,"./jquery-plugin":78,"./stylesheet":91,"./thread":92,"./window":100}],77:[function(a,b,c){"use strict";var d=a("./window"),e=d?d.navigator:null,f="string",g=typeof{},h="function",i=typeof HTMLElement,j=function(a){return a&&a.instanceString&&k.fn(a.instanceString)?a.instanceString():null},k={defined:function(a){return null!=a},string:function(a){return null!=a&&typeof a==f},fn:function(a){return null!=a&&typeof a===h},array:function(a){return Array.isArray?Array.isArray(a):null!=a&&a instanceof Array},plainObject:function(a){return null!=a&&typeof a===g&&!k.array(a)&&a.constructor===Object},object:function(a){return null!=a&&typeof a===g},number:function(a){return null!=a&&"number"==typeof a&&!isNaN(a)},integer:function(a){return k.number(a)&&Math.floor(a)===a},bool:function(a){return null!=a&&typeof a==typeof!0},htmlElement:function(a){return"undefined"===i?void 0:null!=a&&a instanceof HTMLElement},elementOrCollection:function(a){return k.element(a)||k.collection(a)},element:function(a){return"collection"===j(a)&&a._private.single},collection:function(a){return"collection"===j(a)&&!a._private.single},core:function(a){return"core"===j(a)},style:function(a){return"style"===j(a)},stylesheet:function(a){return"stylesheet"===j(a)},event:function(a){return"event"===j(a)},thread:function(a){return"thread"===j(a)},fabric:function(a){return"fabric"===j(a)},emptyString:function(a){return!a||!(!k.string(a)||""!==a&&!a.match(/^\s+$/))},nonemptyString:function(a){return!(!a||!k.string(a)||""===a||a.match(/^\s+$/))},domElement:function(a){return"undefined"!=typeof HTMLElement&&a instanceof HTMLElement},boundingBox:function(a){return k.plainObject(a)&&k.number(a.x1)&&k.number(a.x2)&&k.number(a.y1)&&k.number(a.y2)},promise:function(a){return k.object(a)&&k.fn(a.then)},touch:function(){return d&&("ontouchstart"in d||d.DocumentTouch&&document instanceof DocumentTouch)},gecko:function(){return"undefined"!=typeof InstallTrigger||"MozAppearance"in document.documentElement.style},webkit:function(){return"undefined"!=typeof webkitURL||"WebkitAppearance"in document.documentElement.style},chromium:function(){return"undefined"!=typeof chrome},khtml:function(){return e&&e.vendor.match(/kde/i)},khtmlEtc:function(){return k.khtml()||k.webkit()||k.chromium()},ms:function(){return e&&e.userAgent.match(/msie|trident|edge/i)},windows:function(){return e&&e.appVersion.match(/Win/i)},mac:function(){return e&&e.appVersion.match(/Mac/i)},linux:function(){return e&&e.appVersion.match(/Linux/i)},unix:function(){return e&&e.appVersion.match(/X11/i)}};b.exports=k},{"./window":100}],78:[function(a,b,c){"use strict";var d=a("./is"),e=function(a){var b=a[0]._cyreg=a[0]._cyreg||{};return b},f=function(a,b){a&&(a.fn.cytoscape||(a.fn.cytoscape=function(c){var f=a(this);if("get"===c)return e(f).cy;if(d.fn(c)){var g=c,h=e(f).cy;if(h&&h.isReady())h.trigger("ready",[],g);else{var i=e(f),j=i.readies=i.readies||[];j.push(g)}}else if(d.plainObject(c))return f.each(function(){var d=a.extend({},c,{container:a(this)[0]});b(d)})},a.cytoscape=b,null==a.fn.cy&&null==a.cy&&(a.fn.cy=a.fn.cytoscape,a.cy=a.cytoscape)))};b.exports=f},{"./is":77}],79:[function(a,b,c){"use strict";var d={};d.signum=function(a){return a>0?1:0>a?-1:0},d.distance=function(a,b){return Math.sqrt(d.sqDistance(a,b))},d.sqDistance=function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d},d.qbezierAt=function(a,b,c,d){return(1-d)*(1-d)*a+2*(1-d)*d*b+d*d*c},d.qbezierPtAt=function(a,b,c,e){return{x:d.qbezierAt(a.x,b.x,c.x,e),y:d.qbezierAt(a.y,b.y,c.y,e)}},d.makeBoundingBox=function(a){if(null!=a.x1&&null!=a.y1){if(null!=a.x2&&null!=a.y2&&a.x2>=a.x1&&a.y2>=a.y1)return{x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2,w:a.x2-a.x1,h:a.y2-a.y1};if(null!=a.w&&null!=a.h&&a.w>=0&&a.h>=0)return{x1:a.x1,y1:a.y1,x2:a.x1+a.w,y2:a.y1+a.h,w:a.w,h:a.h}}},d.boundingBoxesIntersect=function(a,b){return!(a.x1>b.x2)&&(!(b.x1>a.x2)&&(!(a.x2<b.x1)&&(!(b.x2<a.x1)&&(!(a.y2<b.y1)&&(!(b.y2<a.y1)&&(!(a.y1>b.y2)&&!(b.y1>a.y2)))))))},d.inBoundingBox=function(a,b,c){return a.x1<=b&&b<=a.x2&&a.y1<=c&&c<=a.y2},d.pointInBoundingBox=function(a,b){return this.inBoundingBox(a,b.x,b.y)},d.roundRectangleIntersectLine=function(a,b,c,d,e,f,g){var h,i=this.getRoundRectangleRadius(e,f),j=e/2,k=f/2,l=c-j+i-g,m=d-k-g,n=c+j-i+g,o=m;if(h=this.finiteLinesIntersect(a,b,c,d,l,m,n,o,!1),h.length>0)return h;var p=c+j+g,q=d-k+i-g,r=p,s=d+k-i+g;if(h=this.finiteLinesIntersect(a,b,c,d,p,q,r,s,!1),h.length>0)return h;var t=c-j+i-g,u=d+k+g,v=c+j-i+g,w=u;if(h=this.finiteLinesIntersect(a,b,c,d,t,u,v,w,!1),h.length>0)return h;var x=c-j-g,y=d-k+i-g,z=x,A=d+k-i+g;if(h=this.finiteLinesIntersect(a,b,c,d,x,y,z,A,!1),h.length>0)return h;var B,C=c-j+i,D=d-k+i;if(B=this.intersectLineCircle(a,b,c,d,C,D,i+g),B.length>0&&B[0]<=C&&B[1]<=D)return[B[0],B[1]];var E=c+j-i,F=d-k+i;if(B=this.intersectLineCircle(a,b,c,d,E,F,i+g),B.length>0&&B[0]>=E&&B[1]<=F)return[B[0],B[1]];var G=c+j-i,H=d+k-i;if(B=this.intersectLineCircle(a,b,c,d,G,H,i+g),B.length>0&&B[0]>=G&&B[1]>=H)return[B[0],B[1]];var I=c-j+i,J=d+k-i;return B=this.intersectLineCircle(a,b,c,d,I,J,i+g),B.length>0&&B[0]<=I&&B[1]>=J?[B[0],B[1]]:[]},d.inLineVicinity=function(a,b,c,d,e,f,g){var h=g,i=Math.min(c,e),j=Math.max(c,e),k=Math.min(d,f),l=Math.max(d,f);return a>=i-h&&j+h>=a&&b>=k-h&&l+h>=b},d.inBezierVicinity=function(a,b,c,d,e,f,g,h,i){var j={x1:Math.min(c,g,e)-i,x2:Math.max(c,g,e)+i,y1:Math.min(d,h,f)-i,y2:Math.max(d,h,f)+i};return!(a<j.x1||a>j.x2||b<j.y1||b>j.y2)},d.solveCubic=function(a,b,c,d,e){b/=a,c/=a,d/=a;var f,g,h,i,j,k,l,m;return g=(3*c-b*b)/9,h=-(27*d)+b*(9*c-2*(b*b)),h/=54,f=g*g*g+h*h,e[1]=0,l=b/3,f>0?(j=h+Math.sqrt(f),j=0>j?-Math.pow(-j,1/3):Math.pow(j,1/3),k=h-Math.sqrt(f),k=0>k?-Math.pow(-k,1/3):Math.pow(k,1/3),e[0]=-l+j+k,l+=(j+k)/2,e[4]=e[2]=-l,l=Math.sqrt(3)*(-k+j)/2,e[3]=l,void(e[5]=-l)):(e[5]=e[3]=0,0===f?(m=0>h?-Math.pow(-h,1/3):Math.pow(h,1/3),e[0]=-l+2*m,void(e[4]=e[2]=-(m+l))):(g=-g,i=g*g*g,i=Math.acos(h/Math.sqrt(i)),m=2*Math.sqrt(g),e[0]=-l+m*Math.cos(i/3),e[2]=-l+m*Math.cos((i+2*Math.PI)/3),void(e[4]=-l+m*Math.cos((i+4*Math.PI)/3))))},d.sqDistanceToQuadraticBezier=function(a,b,c,d,e,f,g,h){var i=1*c*c-4*c*e+2*c*g+4*e*e-4*e*g+g*g+d*d-4*d*f+2*d*h+4*f*f-4*f*h+h*h,j=9*c*e-3*c*c-3*c*g-6*e*e+3*e*g+9*d*f-3*d*d-3*d*h-6*f*f+3*f*h,k=3*c*c-6*c*e+c*g-c*a+2*e*e+2*e*a-g*a+3*d*d-6*d*f+d*h-d*b+2*f*f+2*f*b-h*b,l=1*c*e-c*c+c*a-e*a+d*f-d*d+d*b-f*b,m=[];this.solveCubic(i,j,k,l,m);for(var n=1e-7,o=[],p=0;6>p;p+=2)Math.abs(m[p+1])<n&&m[p]>=0&&m[p]<=1&&o.push(m[p]);o.push(1),o.push(0);for(var q,r,s,t,u=-1,v=0;v<o.length;v++)r=Math.pow(1-o[v],2)*c+2*(1-o[v])*o[v]*e+o[v]*o[v]*g,s=Math.pow(1-o[v],2)*d+2*(1-o[v])*o[v]*f+o[v]*o[v]*h,t=Math.pow(r-a,2)+Math.pow(s-b,2),u>=0?u>t&&(u=t,q=o[v]):(u=t,q=o[v]);return u},d.sqDistanceToFiniteLine=function(a,b,c,d,e,f){var g=[a-c,b-d],h=[e-c,f-d],i=h[0]*h[0]+h[1]*h[1],j=g[0]*g[0]+g[1]*g[1],k=g[0]*h[0]+g[1]*h[1],l=k*k/i;return 0>k?j:l>i?(a-e)*(a-e)+(b-f)*(b-f):j-l},d.pointInsidePolygonPoints=function(a,b,c){for(var d,e,f,g,h,i=0,j=0,k=0;k<c.length/2;k++)if(d=c[2*k],e=c[2*k+1],k+1<c.length/2?(f=c[2*(k+1)],g=c[2*(k+1)+1]):(f=c[2*(k+1-c.length/2)],g=c[2*(k+1-c.length/2)+1]),d==a&&f==a);else{if(!(d>=a&&a>=f||a>=d&&f>=a))continue;h=(a-d)/(f-d)*(g-e)+e,h>b&&i++,b>h&&j++}return i%2!==0},d.pointInsidePolygon=function(a,b,c,e,f,g,h,i,j){var k,l=new Array(c.length);null!=i[0]?(k=Math.atan(i[1]/i[0]),i[0]<0?k+=Math.PI/2:k=-k-Math.PI/2):k=i;for(var m=Math.cos(-k),n=Math.sin(-k),o=0;o<l.length/2;o++)l[2*o]=g/2*(c[2*o]*m-c[2*o+1]*n),l[2*o+1]=h/2*(c[2*o+1]*m+c[2*o]*n),l[2*o]+=e,l[2*o+1]+=f;var p;if(j>0){var q=this.expandPolygon(l,-j);p=this.joinLines(q)}else p=l;return d.pointInsidePolygonPoints(a,b,p)},d.joinLines=function(a){for(var b,c,d,e,f,g,h,i,j=new Array(a.length/2),k=0;k<a.length/4;k++){b=a[4*k],c=a[4*k+1],d=a[4*k+2],e=a[4*k+3],k<a.length/4-1?(f=a[4*(k+1)],g=a[4*(k+1)+1],h=a[4*(k+1)+2],i=a[4*(k+1)+3]):(f=a[0],g=a[1],h=a[2],i=a[3]);var l=this.finiteLinesIntersect(b,c,d,e,f,g,h,i,!0);j[2*k]=l[0],j[2*k+1]=l[1]}return j},d.expandPolygon=function(a,b){for(var c,d,e,f,g=new Array(2*a.length),h=0;h<a.length/2;h++){c=a[2*h],d=a[2*h+1],h<a.length/2-1?(e=a[2*(h+1)],f=a[2*(h+1)+1]):(e=a[0],f=a[1]);var i=f-d,j=-(e-c),k=Math.sqrt(i*i+j*j),l=i/k,m=j/k;g[4*h]=c+l*b,g[4*h+1]=d+m*b,g[4*h+2]=e+l*b,g[4*h+3]=f+m*b}return g},d.intersectLineEllipse=function(a,b,c,d,e,f){var g=c-a,h=d-b;g/=e,h/=f;var i=Math.sqrt(g*g+h*h),j=i-1;if(0>j)return[];var k=j/i;return[(c-a)*k+a,(d-b)*k+b]},d.intersectLineCircle=function(a,b,c,d,e,f,g){var h=[c-a,d-b],i=[e,f],j=[a-e,b-f],k=h[0]*h[0]+h[1]*h[1],l=2*(j[0]*h[0]+j[1]*h[1]),i=j[0]*j[0]+j[1]*j[1]-g*g,m=l*l-4*k*i;if(0>m)return[];var n=(-l+Math.sqrt(m))/(2*k),o=(-l-Math.sqrt(m))/(2*k),p=Math.min(n,o),q=Math.max(n,o),r=[];if(p>=0&&1>=p&&r.push(p),q>=0&&1>=q&&r.push(q),0===r.length)return[];var s=r[0]*h[0]+a,t=r[0]*h[1]+b;if(r.length>1){if(r[0]==r[1])return[s,t];var u=r[1]*h[0]+a,v=r[1]*h[1]+b;return[s,t,u,v]}return[s,t]},d.findCircleNearPoint=function(a,b,c,d,e){var f=d-a,g=e-b,h=Math.sqrt(f*f+g*g),i=f/h,j=g/h;return[a+i*c,b+j*c]},d.findMaxSqDistanceToOrigin=function(a){for(var b,c=1e-6,d=0;d<a.length/2;d++)b=a[2*d]*a[2*d]+a[2*d+1]*a[2*d+1],b>c&&(c=b);return c},d.finiteLinesIntersect=function(a,b,c,d,e,f,g,h,i){var j=(g-e)*(b-f)-(h-f)*(a-e),k=(c-a)*(b-f)-(d-b)*(a-e),l=(h-f)*(c-a)-(g-e)*(d-b);if(0!==l){var m=j/l,n=k/l;return m>=0&&1>=m&&n>=0&&1>=n?[a+m*(c-a),b+m*(d-b)]:i?[a+m*(c-a),b+m*(d-b)]:[]}return 0===j||0===k?[a,c,g].sort()[1]===g?[g,h]:[a,c,e].sort()[1]===e?[e,f]:[e,g,c].sort()[1]===c?[c,d]:[]:[]},d.polygonIntersectLine=function(a,b,c,e,f,g,h,i){for(var j,k=[],l=new Array(c.length),m=0;m<l.length/2;m++)l[2*m]=c[2*m]*g+e,l[2*m+1]=c[2*m+1]*h+f;var n;if(i>0){var o=d.expandPolygon(l,-i);n=d.joinLines(o)}else n=l;for(var p,q,r,s,m=0;m<n.length/2;m++)p=n[2*m],q=n[2*m+1],m<n.length/2-1?(r=n[2*(m+1)],s=n[2*(m+1)+1]):(r=n[0],s=n[1]),j=this.finiteLinesIntersect(a,b,e,f,p,q,r,s),0!==j.length&&k.push(j[0],j[1]);return k},d.shortenIntersection=function(a,b,c){var d=[a[0]-b[0],a[1]-b[1]],e=Math.sqrt(d[0]*d[0]+d[1]*d[1]),f=(e-c)/e;return 0>f&&(f=1e-5),[b[0]+f*d[0],b[1]+f*d[1]]},d.generateUnitNgonPointsFitToSquare=function(a,b){var c=d.generateUnitNgonPoints(a,b);return c=d.fitPolygonToSquare(c)},d.fitPolygonToSquare=function(a){for(var b,c,d=a.length/2,e=1/0,f=1/0,g=-(1/0),h=-(1/0),i=0;d>i;i++)b=a[2*i],c=a[2*i+1],e=Math.min(e,b),g=Math.max(g,b),f=Math.min(f,c),h=Math.max(h,c);for(var j=2/(g-e),k=2/(h-f),i=0;d>i;i++)b=a[2*i]=a[2*i]*j,c=a[2*i+1]=a[2*i+1]*k,e=Math.min(e,b),g=Math.max(g,b),f=Math.min(f,c),h=Math.max(h,c);if(-1>f)for(var i=0;d>i;i++)c=a[2*i+1]=a[2*i+1]+(-1-f);return a},d.generateUnitNgonPoints=function(a,b){var c=1/a*2*Math.PI,d=a%2===0?Math.PI/2+c/2:Math.PI/2;d+=b;for(var e,f,g,h=new Array(2*a),i=0;a>i;i++)e=i*c+d,f=h[2*i]=Math.cos(e),g=h[2*i+1]=Math.sin(-e);return h},d.getRoundRectangleRadius=function(a,b){return Math.min(a/4,b/4,8)},b.exports=d},{}],80:[function(a,b,c){"use strict";var d=0,e=1,f=2,g=function(a){return this instanceof g?(this.id="Thenable/1.0.7",this.state=d,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof a&&a.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new g(a)};g.prototype={fulfill:function(a){return h(this,e,"fulfillValue",a)},reject:function(a){return h(this,f,"rejectReason",a)},then:function(a,b){var c=this,d=new g;return c.onFulfilled.push(k(a,d,"fulfill")),c.onRejected.push(k(b,d,"reject")),i(c),d.proxy}};var h=function(a,b,c,e){return a.state===d&&(a.state=b,a[c]=e,i(a)),a},i=function(a){a.state===e?j(a,"onFulfilled",a.fulfillValue):a.state===f&&j(a,"onRejected",a.rejectReason)},j=function(a,b,c){if(0!==a[b].length){var d=a[b];a[b]=[];var e=function(){for(var a=0;a<d.length;a++)d[a](c)};"function"==typeof setImmediate?setImmediate(e):setTimeout(e,0)}},k=function(a,b,c){return function(d){if("function"!=typeof a)b[c].call(b,d);else{var e;try{e=a(d)}catch(a){return void b.reject(a)}l(b,e)}}},l=function(a,b){if(a===b||a.proxy===b)return void a.reject(new TypeError("cannot resolve promise with itself"));var c;if("object"==typeof b&&null!==b||"function"==typeof b)try{c=b.then}catch(b){return void a.reject(b)}if("function"!=typeof c)a.fulfill(b);else{var d=!1;try{c.call(b,function(c){d||(d=!0,c===b?a.reject(new TypeError("circular thenable chain")):l(a,c))},function(b){d||(d=!0,a.reject(b))})}catch(b){d||a.reject(b)}}};g.all=function(a){return new g(function(b,c){for(var d=new Array(a.length),e=0,f=function(c,f){d[c]=f,e++,e===a.length&&b(d)},g=0;g<a.length;g++)!function(b){var d=a[b],e=null!=d&&null!=d.then;if(e)d.then(function(a){f(b,a)},function(a){c(a)});else{var g=d;f(b,g)}}(g)})},g.resolve=function(a){return new g(function(b,c){b(a)})},g.reject=function(a){return new g(function(b,c){c(a)})},b.exports="undefined"!=typeof Promise?Promise:g},{}],81:[function(a,b,c){"use strict";var d=a("./is"),e=a("./util"),f=function(a,b){if(!(this instanceof f))return new f(a,b);void 0===b&&void 0!==a&&(b=a,a=void 0);var c=this;if(c._private={selectorText:null,invalid:!0},!b||d.string(b)&&b.match(/^\s*$/))null==a?c.length=0:(c[0]=i(),c[0].group=a,c.length=1);else if(d.elementOrCollection(b)){var g=b.collection();c[0]=i(),c[0].collection=g,c.length=1}else if(d.fn(b))c[0]=i(),c[0].filter=b,c.length=1;else{if(!d.string(b))return void e.error("A selector must be created from a string; found "+b);var h=null,i=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}},j={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])+"|'+"'(?:\\\\'|[^'])+'",number:e.regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$"};j.variable="(?:[\\w-]|(?:\\\\"+j.metaChar+"))+",j.value=j.string+"|"+j.number,j.className=j.variable,j.id=j.variable;for(var k=function(a){return a.replace(new RegExp("\\\\("+j.metaChar+")","g"),function(a,b,c,d){return b})},l=j.comparatorOp.split("|"),m=0;m<l.length;m++){var n=l[m];j.comparatorOp+="|@"+n}for(var l=j.comparatorOp.split("|"),m=0;m<l.length;m++){var n=l[m];n.indexOf("!")>=0||"="!==n&&(j.comparatorOp+="|\\!"+n)}var o=[{name:"group",query:!0,regex:"(node|edge|\\*)",populate:function(a){this.group="*"==a?a:a+"s"}},{name:"state",query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:transparent|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:orphan|:nonorphan|:parent|:child|:loop|:simple|:active|:inactive|:touch|:backgrounding|:nonbackgrounding)",populate:function(a){this.colonSelectors.push(a)}},{name:"id",query:!0,regex:"\\#("+j.id+")",populate:function(a){this.ids.push(k(a))}},{name:"className",query:!0,regex:"\\.("+j.className+")",populate:function(a){this.classes.push(k(a))}},{name:"dataExists",query:!0,regex:"\\[\\s*("+j.variable+")\\s*\\]",populate:function(a){this.data.push({field:k(a)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+j.variable+")\\s*("+j.comparatorOp+")\\s*("+j.value+")\\s*\\]",populate:function(a,b,c){var d=null!=new RegExp("^"+j.string+"$").exec(c);c=d?c.substring(1,c.length-1):parseFloat(c),this.data.push({field:k(a),operator:b,value:c})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+j.boolOp+")\\s*("+j.variable+")\\s*\\]",populate:function(a,b){this.data.push({field:k(b),operator:a})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+j.meta+")\\s*("+j.comparatorOp+")\\s*("+j.number+")\\s*\\]\\]",populate:function(a,b,c){this.meta.push({field:k(a),operator:b,value:parseFloat(c)})}},{name:"nextQuery",separator:!0,regex:j.separator,populate:function(){c[++m]=i(),h=null}},{name:"child",separator:!0,regex:j.child,populate:function(){var a=i();a.parent=this,a.subject=h,c[m]=a}},{name:"descendant",separator:!0,regex:j.descendant,populate:function(){var a=i();a.ancestor=this,a.subject=h,c[m]=a}},{name:"subject",modifier:!0,regex:j.subject,populate:function(){return null!=h&&this.subject!=this?(e.error("Redefinition of subject in selector `"+b+"`"),!1):(h=this,void(this.subject=this))}}];c._private.selectorText=b;var p=b,m=0,q=function(a){for(var b,c,e,f=0;f<o.length;f++){var g=o[f],h=g.name;if(!d.fn(a)||a(h,g)){var i=p.match(new RegExp("^"+g.regex));if(null!=i){c=i,b=g,e=h;var j=i[0];p=p.substring(j.length);break}}}return{expr:b,match:c,name:e}},r=function(){var a=p.match(/^\s+/);if(a){var b=a[0];p=p.substring(b.length)}};for(c[0]=i(),r();;){var s=q();if(null==s.expr)return void e.error("The selector `"+b+"`is invalid");for(var t=[],u=1;u<s.match.length;u++)t.push(s.match[u]);var v=s.expr.populate.apply(c[m],t);if(v===!1)return;if(p.match(/^\s*$/))break}c.length=m+1;for(var u=0;u<c.length;u++){var w=c[u];if(null!=w.subject){for(;w.subject!=w;)if(null!=w.parent){var x=w.parent,y=w;y.parent=null,x.child=y,w=x}else{if(null==w.ancestor){e.error("When adjusting references for the selector `"+w+"`, neither parent nor ancestor was found");break}var z=w.ancestor,A=w;A.ancestor=null,z.descendant=A,w=z}c[u]=w.subject}}if(null!=a)for(var u=0;u<c.length;u++){if(null!=c[u].group&&c[u].group!=a)return void e.error("Group `"+c[u].group+"` conflicts with implicit group `"+a+"` in selector `"+b+"`");c[u].group=a}}c._private.invalid=!1},g=f.prototype;g.size=function(){return this.length},g.eq=function(a){return this[a]};var h=function(a,b){if(null!=a.group&&"*"!=a.group&&a.group!=b._private.group)return!1;for(var c=b.cy(),e=!0,f=0;f<a.colonSelectors.length;f++){var g=a.colonSelectors[f];switch(g){case":selected":e=b.selected();break;case":unselected":e=!b.selected();break;case":selectable":e=b.selectable();break;case":unselectable":e=!b.selectable();break;case":locked":e=b.locked();break;case":unlocked":e=!b.locked();break;case":visible":e=b.visible();break;case":hidden":e=!b.visible();break;case":transparent":e=b.transparent();break;case":grabbed":e=b.grabbed();break;case":free":e=!b.grabbed();break;case":removed":e=b.removed();break;case":inside":e=!b.removed();break;case":grabbable":e=b.grabbable();break;case":ungrabbable":e=!b.grabbable();break;case":animated":e=b.animated();break;case":unanimated":e=!b.animated();break;case":parent":e=b.isNode()&&b.children().nonempty();break;case":child":case":nonorphan":e=b.isNode()&&b.parent().nonempty();break;case":orphan":e=b.isNode()&&b.parent().empty();break;case":loop":e=b.isEdge()&&b.data("source")===b.data("target");break;case":simple":e=b.isEdge()&&b.data("source")!==b.data("target");break;case":active":e=b.active();break;case":inactive":e=!b.active();break;case":touch":e=d.touch();break;case":backgrounding":e=b.backgrounding();break;case":nonbackgrounding":e=!b.backgrounding()}if(!e)break}if(!e)return!1;for(var i=!0,f=0;f<a.ids.length;f++){var j=a.ids[f],k=b._private.data.id;if(i=i&&j==k,!i)break}if(!i)return!1;for(var l=!0,f=0;f<a.classes.length;f++){var m=a.classes[f];if(l=l&&b.hasClass(m),!l)break}if(!l)return!1;var n=function(b){for(var c=!0,e=0;e<a[b.name].length;e++){var f,g=a[b.name][e],h=g.operator,i=g.value,j=g.field;if(null!=h&&null!=i){var k=b.fieldValue(j),l=d.string(k)||d.number(k)?""+k:"",m=""+i,n=!1;h.indexOf("@")>=0&&(l=l.toLowerCase(),m=m.toLowerCase(),h=h.replace("@",""),n=!0);var o=!1,p=!1;switch(h.indexOf("!")>=0&&(h=h.replace("!",""),o=!0),n&&(i=m.toLowerCase(),k=l.toLowerCase()),h){case"*=":f=l.search(m)>=0;break;case"$=":f=null!=new RegExp(m+"$").exec(l);break;case"^=":f=null!=new RegExp("^"+m).exec(l);break;case"=":f=k===i;break;case"!=":f=k!==i;break;case">":f=o?i>=k:k>i,p=!0;break;case">=":f=o?i>k:k>=i,p=!0;break;case"<":f=o?k>=i:i>k,p=!0;break;case"<=":f=o?k>i:i>=k,p=!0;break;default:f=!1}}else if(null!=h)switch(h){case"?":f=b.fieldTruthy(j);break;case"!":f=!b.fieldTruthy(j);break;case"^":f=b.fieldUndefined(j)}else f=!b.fieldUndefined(j);if(o&&!p&&(f=!f,p=!0),!f){c=!1;break}}return c},o=n({name:"data",fieldValue:function(a){return b._private.data[a]},fieldRef:function(a){return"element._private.data."+a},fieldUndefined:function(a){return void 0===b._private.data[a]},fieldTruthy:function(a){return!!b._private.data[a]}});if(!o)return!1;var p=n({name:"meta",fieldValue:function(a){return b[a]()},fieldRef:function(a){return"element."+a+"()"},fieldUndefined:function(a){return null==b[a]()},fieldTruthy:function(a){return!!b[a]()}});if(!p)return!1;if(null!=a.collection){var q=null!=a.collection._private.ids[b.id()];if(!q)return!1}if(null!=a.filter&&0===b.collection().filter(a.filter).size())return!1;var r=function(a,b){if(null!=a){var d=!1;if(!c.hasCompoundNodes())return!1;b=b();for(var e=0;e<b.length;e++)if(h(a,b[e])){d=!0;break}return d}return!0};return!!(r(a.parent,function(){return b.parent()})&&r(a.ancestor,function(){return b.parents()})&&r(a.child,function(){return b.children()}))&&!!r(a.descendant,function(){return b.descendants()})};g.filter=function(a){var b=this,c=a.cy();if(b._private.invalid)return c.collection();var d=function(a,c){for(var d=0;d<b.length;d++){var e=b[d];if(h(e,c))return!0}return!1};null==b._private.selectorText&&(d=function(){return!0});var e=a.filter(d);return e},g.matches=function(a){var b=this;if(b._private.invalid)return!1;for(var c=0;c<b.length;c++){var d=b[c];if(h(d,a))return!0}return!1},g.toString=g.selector=function(){for(var a="",b=function(a,b){return d.string(a)?b?'"'+a+'"':a:""},c=function(a){var d="";a.subject===a&&(d+="$");var f=b(a.group);d+=f.substring(0,f.length-1);for(var g=0;g<a.data.length;g++){var h=a.data[g];d+=h.value?"["+h.field+b(h.operator)+b(h.value,!0)+"]":"["+b(h.operator)+h.field+"]"}for(var g=0;g<a.meta.length;g++){var i=a.meta[g];d+="[["+i.field+b(i.operator)+b(i.value,!0)+"]]"}for(var g=0;g<a.colonSelectors.length;g++){var j=a.colonSelectors[e];d+=j}for(var g=0;g<a.ids.length;g++){var j="#"+a.ids[e];d+=j}for(var g=0;g<a.classes.length;g++){var j="."+a.classes[g];d+=j}return null!=a.parent&&(d=c(a.parent)+" > "+d),null!=a.ancestor&&(d=c(a.ancestor)+" "+d),null!=a.child&&(d+=" > "+c(a.child)),null!=a.descendant&&(d+=" "+c(a.descendant)),d},e=0;e<this.length;e++){var f=this[e];a+=c(f),this.length>1&&e<this.length-1&&(a+=", ")}return a},b.exports=f},{"./is":77,"./util":94}],82:[function(a,b,c){"use strict";var d=a("../util"),e=a("../is"),f={};f.apply=function(a){var b=this;b._private.newStyle&&(this._private.contextStyles={},this._private.propDiffs={});for(var c=0;c<a.length;c++){var d=a[c],e=b.getContextMeta(d),f=b.getContextStyle(e),g=b.applyContextStyle(e,f,d);
b.updateTransitions(d,g.diffProps),b.updateStyleHints(d)}b._private.newStyle=!1},f.getPropertiesDiff=function(a,b){var c=this,d=c._private.propDiffs=c._private.propDiffs||{},e=a+"-"+b,f=d[e];if(f)return f;for(var g=[],h={},i=0;i<c.length;i++){var j=c[i],k="t"===a[i],l="t"===b[i],m=k!==l,n=j.mappedProperties.length>0;if(m||n){var o;m&&n?o=j.properties:m?o=j.properties:n&&(o=j.mappedProperties);for(var p=0;p<o.length;p++){for(var q=o[p],r=q.name,s=!1,t=i+1;t<c.length;t++){var u=c[t],v="t"===b[t];if(v&&(s=null!=u.properties[q.name]))break}h[r]||s||(h[r]=!0,g.push(r))}}}return d[e]=g,g},f.getContextMeta=function(a){var b,c=this,d="",e=a._private.styleCxtKey||"";c._private.newStyle&&(e="");for(var f=0;f<c.length;f++){var g=c[f],h=g.selector&&g.selector.matches(a);d+=h?"t":"f"}return b=c.getPropertiesDiff(e,d),a._private.styleCxtKey=d,{key:d,diffPropNames:b}},f.getContextStyle=function(a){var b=a.key,c=this,d=this._private.contextStyles=this._private.contextStyles||{};if(d[b])return d[b];for(var e={_private:{key:b}},f=0;f<c.length;f++){var g=c[f],h="t"===b[f];if(h)for(var i=0;i<g.properties.length;i++){var j=g.properties[i],k=e[j.name]=j;k.context=g}}return d[b]=e,e},f.applyContextStyle=function(a,b,c){for(var d=this,e=a.diffPropNames,f={},g=0;g<e.length;g++){var h=e[g],i=b[h],j=c._private.style[h];if(i&&j!==i){var k=f[h]={prev:j};d.applyParsedProperty(c,i),k.next=c._private.style[h],k.next&&k.next.bypass&&(k.next=k.next.bypassed)}}return{diffProps:f}},f.updateStyleHints=function(a){var b=a._private,c=this,d=b.style;if(!a.removed()){var e=!1;if("nodes"===b.group&&c._private.hasPie)for(var f=1;f<=c.pieBackgroundN;f++){var g=b.style["pie-"+f+"-background-size"].value;if(g>0){e=!0;break}}b.hasPie=e;var h=d["text-transform"].strValue,i=d.label.strValue,j=d["font-style"].strValue,g=d["font-size"].pfValue+"px",k=d["font-family"].strValue,l=d["font-weight"].strValue,m=d["text-valign"].strValue,n=d["text-valign"].strValue,o=d["text-outline-width"].pfValue,p=d["text-wrap"].strValue,q=d["text-max-width"].pfValue;b.labelKey=j+"$"+g+"$"+k+"$"+l+"$"+i+"$"+h+"$"+m+"$"+n+"$"+o+"$"+p+"$"+q,b.fontKey=j+"$"+l+"$"+g+"$"+k;var r=d.width.pfValue,s=d.height.pfValue,t=d["border-width"].pfValue;if(b.boundingBoxKey=r+"$"+s+"$"+t,"edges"===a._private.group){var u=d["control-point-step-size"].pfValue,v=d["control-point-distances"]?d["control-point-distances"].pfValue.join("_"):void 0,w=d["control-point-weights"].value.join("_"),x=d["curve-style"].strValue,y=d["segment-distances"]?d["segment-distances"].pfValue.join("_"):void 0,z=d["segment-weights"].value.join("_");b.boundingBoxKey+="$"+u+"$"+v+"$"+w+"$"+y+"$"+z+"$"+x}b.styleKey=Date.now()}},f.applyParsedProperty=function(a,b){var c,f,g=this,h=b,i=a._private.style,j=g.types,k=g.properties[h.name].type,l=h.bypass,m=i[h.name],n=m&&m.bypass,o=a._private;if(("height"===b.name||"width"===b.name)&&a.isNode()){if("auto"===b.value&&!a.isParent())return!1;"auto"!==b.value&&a.isParent()&&(h=b=this.parse(b.name,"auto",l))}if(l&&h.deleteBypass){var p=i[h.name];return!p||!(!p.bypass||!p.bypassed)&&(i[h.name]=p.bypassed,!0)}var q=function(){d.error("Do not assign mappings to elements without corresponding data (e.g. ele `"+a.id()+"` for property `"+h.name+"` with data field `"+h.field+"`); try a `["+h.field+"]` selector to limit scope to elements with `"+h.field+"` defined")};switch(h.mapped){case j.mapData:case j.mapLayoutData:case j.mapScratch:var c,r=h.mapped===j.mapLayoutData,s=h.mapped===j.mapScratch,t=h.field.split(".");c=s||r?o.scratch:o.data;for(var u=0;u<t.length&&c;u++){var v=t[u];c=c[v]}var w;if(w=e.number(c)?(c-h.fieldMin)/(h.fieldMax-h.fieldMin):0,0>w?w=0:w>1&&(w=1),k.color){var x=h.valueMin[0],y=h.valueMax[0],z=h.valueMin[1],A=h.valueMax[1],B=h.valueMin[2],C=h.valueMax[2],D=null==h.valueMin[3]?1:h.valueMin[3],E=null==h.valueMax[3]?1:h.valueMax[3],F=[Math.round(x+(y-x)*w),Math.round(z+(A-z)*w),Math.round(B+(C-B)*w),Math.round(D+(E-D)*w)];f={bypass:h.bypass,name:h.name,value:F,strValue:"rgb("+F[0]+", "+F[1]+", "+F[2]+")"}}else{if(!k.number)return!1;var G=h.valueMin+(h.valueMax-h.valueMin)*w;f=this.parse(h.name,G,h.bypass,!0)}f||(f=this.parse(h.name,m.strValue,h.bypass,!0)),f||q(),f.mapping=h,h=f;break;case j.data:case j.layoutData:case j.scratch:var c,r=h.mapped===j.layoutData,s=h.mapped===j.scratch,t=h.field.split(".");if(c=s||r?o.scratch:o.data)for(var u=0;u<t.length;u++){var v=t[u];c=c[v]}if(f=this.parse(h.name,c,h.bypass,!0),!f){var H=m?m.strValue:"";f=this.parse(h.name,H,h.bypass,!0)}f||q(),f.mapping=h,h=f;break;case j.fn:var I=h.value,J=I(a);f=this.parse(h.name,J,h.bypass,!0),f.mapping=h,h=f;break;case void 0:break;default:return!1}return l?(n?h.bypassed=m.bypassed:h.bypassed=m,i[h.name]=h):n?m.bypassed=h:i[h.name]=h,!0},f.update=function(){var a=this._private.cy,b=a.elements();b.updateStyle()},f.updateMappers=function(a){for(var b=this,c=0;c<a.length;c++){for(var d=a[c],e=d._private.style,f=0;f<b.properties.length;f++){var g=b.properties[f],h=e[g.name];if(h&&h.mapping){var i=h.mapping;this.applyParsedProperty(d,i)}}this.updateStyleHints(d)}},f.updateTransitions=function(a,b,c){var d=this,f=a._private,g=f.style,h=g["transition-property"].value,i=g["transition-duration"].pfValue,j=g["transition-delay"].pfValue,k={};if(h.length>0&&i>0){for(var l=!1,m=0;m<h.length;m++){var n=h[m],o=g[n],p=b[n];if(p){var q,r=p.prev,s=r,t=null!=p.next?p.next:o,u=!1,v=1e-6;s&&(e.number(s.pfValue)&&e.number(t.pfValue)?(u=t.pfValue-s.pfValue,q=s.pfValue+v*u):e.number(s.value)&&e.number(t.value)?(u=t.value-s.value,q=s.value+v*u):e.array(s.value)&&e.array(t.value)&&(u=s.value[0]!==t.value[0]||s.value[1]!==t.value[1]||s.value[2]!==t.value[2],q=s.strValue),u&&(k[n]=t.strValue,this.applyBypass(a,n,q),l=!0))}}if(!l)return;f.transitioning=!0,a.stop(),j>0&&a.delay(j),a.animate({css:k},{duration:i,easing:g["transition-timing-function"].value,queue:!1,complete:function(){c||d.removeBypasses(a,h),f.transitioning=!1}})}else f.transitioning&&(a.stop(),this.removeBypasses(a,h),f.transitioning=!1)},b.exports=f},{"../is":77,"../util":94}],83:[function(a,b,c){"use strict";var d=a("../is"),e=a("../util"),f={};f.applyBypass=function(a,b,c,f){var g=this,h=[],i=!0;if("*"===b||"**"===b){if(void 0!==c)for(var j=0;j<g.properties.length;j++){var k=g.properties[j],b=k.name,l=this.parse(b,c,!0);l&&h.push(l)}}else if(d.string(b)){var l=this.parse(b,c,!0);l&&h.push(l)}else{if(!d.plainObject(b))return!1;var m=b;f=c;for(var j=0;j<g.properties.length;j++){var k=g.properties[j],b=k.name,c=m[b];if(void 0===c&&(c=m[e.dash2camel(b)]),void 0!==c){var l=this.parse(b,c,!0);l&&h.push(l)}}}if(0===h.length)return!1;for(var n=!1,j=0;j<a.length;j++){for(var o,p=a[j],q=p._private.style,r={},s=0;s<h.length;s++){var k=h[s];if(f){var t=q[k.name];o=r[k.name]={prev:t}}n=this.applyParsedProperty(p,k)||n,f&&(o.next=q[k.name])}n&&this.updateStyleHints(p),f&&this.updateTransitions(p,r,i)}return n},f.overrideBypass=function(a,b,c){b=e.camel2dash(b);for(var d=0;d<a.length;d++){var f=a[d],g=f._private.style[b],h=this.properties[b].type,i=h.color,j=h.mutiple;g.bypass?(g.value=c,null!=g.pfValue&&(g.pfValue=c),i?g.strValue="rgb("+c.join(",")+")":j?g.strValue=c.join(" "):g.strValue=""+c):this.applyBypass(f,b,c)}},f.removeAllBypasses=function(a,b){return this.removeBypasses(a,this.propertyNames,b)},f.removeBypasses=function(a,b,c){for(var d=!0,e=0;e<a.length;e++){for(var f=a[e],g={},h=f._private.style,i=0;i<b.length;i++){var j=b[i],k=this.properties[j],l="",m=this.parse(j,l,!0),n=h[k.name],o=g[k.name]={prev:n};this.applyParsedProperty(f,m),o.next=h[k.name]}this.updateStyleHints(f),c&&this.updateTransitions(f,g,d)}},b.exports=f},{"../is":77,"../util":94}],84:[function(a,b,c){"use strict";var d=a("../window"),e={};e.getEmSizeInPixels=function(){var a=this.containerCss("font-size");return null!=a?parseFloat(a):1},e.containerCss=function(a){var b=this._private.cy,c=b.container();return d&&c&&d.getComputedStyle?d.getComputedStyle(c).getPropertyValue(a):void 0},b.exports=e},{"../window":100}],85:[function(a,b,c){"use strict";var d=a("../util"),e=a("../is"),f={};f.getRenderedStyle=function(a){return this.getRawStyle(a,!0)},f.getRawStyle=function(a,b){var c=this,a=a[0];if(a){for(var e={},f=0;f<c.properties.length;f++){var g=c.properties[f],h=c.getStylePropertyValue(a,g.name,b);h&&(e[g.name]=h,e[d.dash2camel(g.name)]=h)}return e}},f.getStylePropertyValue=function(a,b,c){var d=this,a=a[0];if(a){var e=a._private.style,f=d.properties[b],g=f.type,h=e[f.name],i=a.cy().zoom();if(h){var j=h.units?g.implicitUnits||"px":null,k=j?[].concat(h.pfValue).map(function(a){return a*(c?i:1)+j}).join(" "):h.strValue;return k}}},f.getValueStyle=function(a){var b,c=this,f={},g=e.element(a);if(b=g?a._private.style:a)for(var h=0;h<c.properties.length;h++){var i=c.properties[h],j=b[i.name]||b[d.dash2camel(i.name)];void 0!==j&&(j=e.plainObject(j)?this.parse(i.name,j.strValue):this.parse(i.name,j)),j&&(f[i.name]=j,f[d.dash2camel(i.name)]=j)}return f},f.getPropsList=function(a){var b=this,c=[],e=a,f=b.properties;if(e)for(var g in e){var h=e[g],i=f[g]||f[d.camel2dash(g)],j=this.parse(i.name,h);c.push(j)}return c},b.exports=f},{"../is":77,"../util":94}],86:[function(a,b,c){"use strict";var d=a("../is"),e=a("../util"),f=a("../selector"),g=function(a){return this instanceof g?d.core(a)?(this._private={cy:a,coreStyle:{},newStyle:!0},this.length=0,void this.addDefaultStylesheet()):void e.error("A style must have a core reference"):new g(a)},h=g.prototype;h.instanceString=function(){return"style"},h.clear=function(){for(var a=0;a<this.length;a++)this[a]=void 0;return this.length=0,this._private.newStyle=!0,this},h.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},h.core=function(){return this._private.coreStyle},h.selector=function(a){var b="core"===a?null:new f(a),c=this.length++;return this[c]={selector:b,properties:[],mappedProperties:[],index:c},this},h.css=function(){var a=this,b=arguments;switch(b.length){case 1:for(var c=b[0],d=0;d<a.properties.length;d++){var f=a.properties[d],g=c[f.name];void 0===g&&(g=c[e.dash2camel(f.name)]),void 0!==g&&this.cssRule(f.name,g)}break;case 2:this.cssRule(b[0],b[1])}return this},h.style=h.css,h.cssRule=function(a,b){var c=this.parse(a,b);if(c){var d=this.length-1;this[d].properties.push(c),this[d].properties[c.name]=c,c.name.match(/pie-(\d+)-background-size/)&&c.value&&(this._private.hasPie=!0),c.mapped&&this[d].mappedProperties.push(c);var e=!this[d].selector;e&&(this._private.coreStyle[c.name]=c)}return this},g.fromJson=function(a,b){var c=new g(a);return c.fromJson(b),c},g.fromString=function(a,b){return new g(a).fromString(b)},[a("./apply"),a("./bypass"),a("./container"),a("./get-for-ele"),a("./json"),a("./string-sheet"),a("./properties"),a("./parse")].forEach(function(a){e.extend(h,a)}),g.types=h.types,g.properties=h.properties,b.exports=g},{"../is":77,"../selector":81,"../util":94,"./apply":82,"./bypass":83,"./container":84,"./get-for-ele":85,"./json":87,"./parse":88,"./properties":89,"./string-sheet":90}],87:[function(a,b,c){"use strict";var d={};d.applyFromJson=function(a){for(var b=this,c=0;c<a.length;c++){var d=a[c],e=d.selector,f=d.style||d.css;b.selector(e);for(var g in f){var h=f[g];b.css(g,h)}}return b},d.fromJson=function(a){var b=this;return b.resetToDefault(),b.applyFromJson(a),b},d.json=function(){for(var a=[],b=this.defaultLength;b<this.length;b++){for(var c=this[b],d=c.selector,e=c.properties,f={},g=0;g<e.length;g++){var h=e[g];f[h.name]=h.strValue}a.push({selector:d?d.toString():"core",style:f})}return a},b.exports=d},{}],88:[function(a,b,c){"use strict";var d=a("../util"),e=a("../is"),f={};f.parse=function(a,b,c,e){var f,h=[a,b,c,e].join("$"),i=this.propCache=this.propCache||{},j=g.bind(this);return(f=i[h])||(f=i[h]=j(a,b,c,e)),f=d.copy(f),f&&(f.value=d.copy(f.value)),f};var g=function(a,b,c,f){var g=this;a=d.camel2dash(a);var h=g.properties[a],i=b,j=g.types;if(!h)return null;if(void 0===b||null===b)return null;h.alias&&(h=h.pointsTo,a=h.name);var k=e.string(b);k&&(b=b.trim());var l=h.type;if(!l)return null;if(c&&(""===b||null===b))return{name:a,value:b,bypass:!0,deleteBypass:!0};if(e.fn(b))return{name:a,value:b,strValue:"fn",mapped:j.fn,bypass:c};var m,n,o,p,q,r;if(!k||f);else{if((m=new RegExp(j.data.regex).exec(b))||(o=new RegExp(j.layoutData.regex).exec(b))||(q=new RegExp(j.scratch.regex).exec(b))){if(c)return!1;var s;return s=m?j.data:o?j.layoutData:j.scratch,m=m||o||q,{name:a,value:m,strValue:""+b,mapped:s,field:m[1],bypass:c}}if((n=new RegExp(j.mapData.regex).exec(b))||(p=new RegExp(j.mapLayoutData.regex).exec(b))||(r=new RegExp(j.mapScratch.regex).exec(b))){if(c)return!1;if(l.multiple)return!1;var s;if(s=n?j.mapData:p?j.mapLayoutData:j.mapScratch,n=n||p||r,!l.color&&!l.number)return!1;var t=this.parse(a,n[4]);if(!t||t.mapped)return!1;var u=this.parse(a,n[5]);if(!u||u.mapped)return!1;if(t.value===u.value)return!1;if(l.color){var v=t.value,w=u.value,x=!(v[0]!==w[0]||v[1]!==w[1]||v[2]!==w[2]||v[3]!==w[3]&&(null!=v[3]&&1!==v[3]||null!=w[3]&&1!==w[3]));if(x)return!1}return{name:a,value:n,strValue:""+b,mapped:s,field:n[1],fieldMin:parseFloat(n[2]),fieldMax:parseFloat(n[3]),valueMin:t.value,valueMax:u.value,bypass:c}}}if(l.multiple&&"multiple"!==f){var y;if(y=k?b.split(/\s+/):e.array(b)?b:[b],l.evenMultiple&&y.length%2!==0)return null;var z=y.map(function(b){var d=g.parse(a,b,c,"multiple");return null!=d.pfValue?d.pfValue:d.value});return{name:a,value:z,pfValue:z,strValue:z.join(" "),bypass:c,units:l.number&&!l.unitless?l.implicitUnits||"px":void 0}}var A=function(){for(var d=0;d<l.enums.length;d++){var e=l.enums[d];if(e===b)return{name:a,value:b,strValue:""+b,bypass:c}}return null};if(l.number){var B,C="px";if(l.units&&(B=l.units),l.implicitUnits&&(C=l.implicitUnits),!l.unitless)if(k){var D="px|em"+(l.allowPercent?"|\\%":"");B&&(D=B);var E=b.match("^("+d.regex.number+")("+D+")?$");E&&(b=E[1],B=E[2]||C)}else B&&!l.implicitUnits||(B=C);if(b=parseFloat(b),isNaN(b)&&void 0===l.enums)return null;if(isNaN(b)&&void 0!==l.enums)return b=i,A();if(l.integer&&!e.integer(b))return null;if(void 0!==l.min&&b<l.min||void 0!==l.max&&b>l.max)return null;var F={name:a,value:b,strValue:""+b+(B?B:""),units:B,bypass:c};return l.unitless||"px"!==B&&"em"!==B?F.pfValue=b:F.pfValue="px"!==B&&B?this.getEmSizeInPixels()*b:b,"ms"!==B&&"s"!==B||(F.pfValue="ms"===B?b:1e3*b),"deg"!==B&&"rad"!==B||(F.pfValue="rad"===B?b:b*Math.PI/180),F}if(l.propList){var G=[],H=""+b;if("none"===H);else{for(var I=H.split(","),J=0;J<I.length;J++){var K=I[J].trim();g.properties[K]&&G.push(K)}if(0===G.length)return null}return{name:a,value:G,strValue:0===G.length?"none":G.join(", "),bypass:c}}if(l.color){var L=d.color2tuple(b);return L?{name:a,value:L,strValue:""+b,bypass:c,roundValue:!0}:null}if(l.regex||l.regexes){if(l.enums){var M=A();if(M)return M}for(var N=l.regexes?l.regexes:[l.regex],J=0;J<N.length;J++){var O=new RegExp(N[J]),P=O.exec(b);if(P)return{name:a,value:P,strValue:""+b,bypass:c}}return null}return l.string?{name:a,value:b,strValue:""+b,bypass:c}:l.enums?A():null};b.exports=f},{"../is":77,"../util":94}],89:[function(a,b,c){"use strict";var d=a("../util"),e={};!function(){var a=d.regex.number,b=d.regex.rgbaNoBackRefs,c=d.regex.hslaNoBackRefs,f=d.regex.hex3,g=d.regex.hex6,h=function(a){return"^"+a+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},i=function(d){var e=a+"|\\w+|"+b+"|"+c+"|"+f+"|"+g;return"^"+d+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+a+")\\s*\\,\\s*("+a+")\\s*,\\s*("+e+")\\s*\\,\\s*("+e+")\\)$"};e.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["auto","label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizes:{number:!0,multiple:!0},bgSize:{number:!0,min:0,allowPercent:!0},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"]},bgPos:{number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},bgFit:{enums:["none","contain","cover"]},bgClip:{enums:["none","node"]},color:{color:!0},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap"]},textBackgroundShape:{enums:["rectangle","roundrectangle"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon","star","diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-backcurve","half-triangle-overshot","vee","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:h("data")},layoutData:{mapping:!0,regex:h("layoutData")},scratch:{mapping:!0,regex:h("scratch")},mapData:{mapping:!0,regex:i("mapData")},mapLayoutData:{mapping:!0,regex:i("mapLayoutData")},mapScratch:{mapping:!0,regex:i("mapScratch")},fn:{mapping:!0,fn:!0},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},easing:{regexes:["^(spring)\\s*\\(\\s*("+a+")\\s*,\\s*("+a+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+a+")\\s*,\\s*("+a+")\\s*,\\s*("+a+")\\s*,\\s*("+a+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]}};var j=e.types,k=e.properties=[{name:"text-valign",type:j.valign},{name:"text-halign",type:j.halign},{name:"color",type:j.color},{name:"label",type:j.text},{name:"text-outline-color",type:j.color},{name:"text-outline-width",type:j.size},{name:"text-outline-opacity",type:j.zeroOneNumber},{name:"text-opacity",type:j.zeroOneNumber},{name:"text-background-color",type:j.color},{name:"text-background-opacity",type:j.zeroOneNumber},{name:"text-border-opacity",type:j.zeroOneNumber},{name:"text-border-color",type:j.color},{name:"text-border-width",type:j.size},{name:"text-border-style",type:j.borderStyle},{name:"text-background-shape",type:j.textBackgroundShape},{name:"text-transform",type:j.textTransform},{name:"text-wrap",type:j.textWrap},{name:"text-max-width",type:j.size},{name:"text-events",type:j.bool},{name:"font-family",type:j.fontFamily},{name:"font-style",type:j.fontStyle},{name:"font-weight",type:j.fontWeight},{name:"font-size",type:j.size},{name:"min-zoomed-font-size",type:j.size},{name:"edge-text-rotation",type:j.textRotation},{name:"events",type:j.bool},{name:"display",type:j.display},{name:"visibility",type:j.visibility},{name:"opacity",type:j.zeroOneNumber},{name:"z-index",type:j.nonNegativeInt},{name:"overlay-padding",type:j.size},{name:"overlay-color",type:j.color},{name:"overlay-opacity",type:j.zeroOneNumber},{name:"shadow-blur",type:j.size},{name:"shadow-color",type:j.color},{name:"shadow-opacity",type:j.zeroOneNumber},{name:"shadow-offset-x",type:j.bidirectionalSize},{name:"shadow-offset-y",type:j.bidirectionalSize},{name:"text-shadow-blur",type:j.size},{name:"text-shadow-color",type:j.color},{name:"text-shadow-opacity",type:j.zeroOneNumber},{name:"text-shadow-offset-x",type:j.bidirectionalSize},{name:"text-shadow-offset-y",type:j.bidirectionalSize},{name:"transition-property",type:j.propList},{name:"transition-duration",type:j.time},{name:"transition-delay",type:j.time},{name:"transition-timing-function",type:j.easing},{name:"height",type:j.nodeSize},{name:"width",type:j.nodeSize},{name:"shape",type:j.nodeShape},{name:"shape-polygon-points",type:j.polygonPointList},{name:"background-color",type:j.color},{name:"background-opacity",type:j.zeroOneNumber},{name:"background-blacken",type:j.nOneOneNumber},{name:"padding-left",type:j.size},{name:"padding-right",type:j.size},{name:"padding-top",type:j.size},{name:"padding-bottom",type:j.size},{name:"border-color",type:j.color},{name:"border-opacity",type:j.zeroOneNumber},{name:"border-width",type:j.size},{name:"border-style",type:j.borderStyle},{name:"background-image",type:j.url},{name:"background-image-opacity",type:j.zeroOneNumber},{name:"background-position-x",type:j.bgPos},{name:"background-position-y",type:j.bgPos},{name:"background-repeat",type:j.bgRepeat},{name:"background-fit",type:j.bgFit},{name:"background-clip",type:j.bgClip},{name:"background-width",type:j.bgWH},{name:"background-height",type:j.bgWH},{name:"position",type:j.position},{name:"compound-sizing-wrt-labels",type:j.compoundIncludeLabels},{name:"line-style",type:j.lineStyle},{name:"line-color",type:j.color},{name:"curve-style",type:j.curveStyle},{name:"haystack-radius",type:j.zeroOneNumber},{name:"control-point-step-size",type:j.size},{name:"control-point-distances",type:j.bidirectionalSizes},{name:"control-point-weights",type:j.numbers},{name:"segment-distances",type:j.bidirectionalSizes},{name:"segment-weights",type:j.numbers},{name:"selection-box-color",type:j.color},{name:"selection-box-opacity",type:j.zeroOneNumber},{name:"selection-box-border-color",type:j.color},{name:"selection-box-border-width",type:j.size},{name:"active-bg-color",type:j.color},{name:"active-bg-opacity",type:j.zeroOneNumber},{name:"active-bg-size",type:j.size},{name:"outside-texture-bg-color",type:j.color},{name:"outside-texture-bg-opacity",type:j.zeroOneNumber}],l=e.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"}];e.pieBackgroundN=16,k.push({name:"pie-size",type:j.bgSize});for(var m=1;m<=e.pieBackgroundN;m++)k.push({name:"pie-"+m+"-background-color",type:j.color}),k.push({name:"pie-"+m+"-background-size",type:j.percent}),k.push({name:"pie-"+m+"-background-opacity",type:j.zeroOneNumber});var n=e.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:j.arrowShape},{name:"arrow-color",type:j.color},{name:"arrow-fill",type:j.arrowFill}].forEach(function(a){n.forEach(function(b){var c=b+"-"+a.name,d=a.type;k.push({name:c,type:d})})},{}),e.propertyNames=k.map(function(a){return a.name});for(var m=0;m<k.length;m++){var o=k[m];k[o.name]=o}for(var m=0;m<l.length;m++){var p=l[m],q=k[p.pointsTo],r={name:p.name,alias:!0,pointsTo:q};k.push(r),k[p.name]=r}}(),e.addDefaultStylesheet=function(){this.selector("node, edge").css(d.extend({events:"yes","text-events":"no","text-valign":"top","text-halign":"center",color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","text-background-shape":"rectangle","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"edge-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-index":0,label:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"shadow-opacity":0,"shadow-color":"#000","shadow-blur":10,"shadow-offset-x":0,"shadow-offset-y":0,"text-shadow-opacity":0,"text-shadow-color":"#000","text-shadow-blur":5,"text-shadow-offset-x":0,"text-shadow-offset-y":0,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#888","background-opacity":1,"background-image":"none","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,position:"origin","compound-sizing-wrt-labels":"include"},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(a,b){for(var c=1;c<=e.pieBackgroundN;c++){var d=b.name.replace("{{i}}",c),f=b.value;a[d]=f}return a},{}),{"line-style":"solid","line-color":"#ddd","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"curve-style":"bezier","haystack-radius":.8},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#ddd"},{name:"arrow-fill",value:"filled"}].reduce(function(a,b){return e.arrowPrefixes.forEach(function(c){var d=c+"-"+b.name,e=b.value;a[d]=e}),a},{}))).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle","padding-top":10,"padding-right":10,"padding-left":10,"padding-bottom":10}).selector("edge").css({width:1}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125}),this.defaultLength=this.length},b.exports=e},{"../util":94}],90:[function(a,b,c){"use strict";var d=a("../util"),e=a("../selector"),f={};f.applyFromString=function(a){function b(){k=k.length>f.length?k.substr(f.length):""}function c(){g=g.length>h.length?g.substr(h.length):""}var f,g,h,i=this,j=this,k=""+a;for(k=k.replace(/[\/][*](\s|.)+?[*][\/]/g,"");;){var l=k.match(/^\s*$/);if(l)break;var m=k.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!m){d.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+k);break}f=m[0];var n=m[1];if("core"!==n){var o=new e(n);if(o._private.invalid){d.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+n),b();continue}}var p=m[2],q=!1;g=p;for(var r=[];;){var l=g.match(/^\s*$/);if(l)break;var s=g.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!s){d.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+p),q=!0;break}h=s[0];var t=s[1],u=s[2],v=i.properties[t];if(v){var w=j.parse(t,u);w?(r.push({name:t,val:u}),c()):(d.error("Skipping property: Invalid property definition in: "+h),c())}else d.error("Skipping property: Invalid property name in: "+h),c()}if(q){b();break}j.selector(n);for(var x=0;x<r.length;x++){var v=r[x];j.css(v.name,v.val)}b()}return j},f.fromString=function(a){var b=this;return b.resetToDefault(),b.applyFromString(a),b},b.exports=f},{"../selector":81,"../util":94}],91:[function(a,b,c){"use strict";var d=a("./is"),e=a("./util"),f=a("./style"),g=function(){return this instanceof g?void(this.length=0):new g},h=g.prototype;h.instanceString=function(){return"stylesheet"},h.selector=function(a){var b=this.length++;return this[b]={selector:a,properties:[]},this},h.css=function(a,b){var c=this.length-1;if(d.string(a))this[c].properties.push({name:a,value:b});else if(d.plainObject(a))for(var g=a,h=0;h<f.properties.length;h++){var i=f.properties[h],j=g[i.name];if(void 0===j&&(j=g[e.dash2camel(i.name)]),void 0!==j){var a=i.name,b=j;this[c].properties.push({name:a,value:b})}}return this},h.style=h.css,h.generateStyle=function(a){for(var b=new f(a),c=0;c<this.length;c++){var d=this[c],e=d.selector,g=d.properties;b.selector(e);for(var h=0;h<g.length;h++){var i=g[h];b.css(i.name,i.value)}}return b},b.exports=g},{"./is":77,"./style":86,"./util":94}],92:[function(_dereq_,module,exports){"use strict";var window=_dereq_("./window"),util=_dereq_("./util"),Promise=_dereq_("./promise"),Event=_dereq_("./event"),define=_dereq_("./define"),is=_dereq_("./is"),Thread=function(a){if(!(this instanceof Thread))return new Thread(a);var b=this._private={requires:[],files:[],queue:null,pass:[],disabled:!1};is.plainObject(a)&&null!=a.disabled&&(b.disabled=!!a.disabled)},thdfn=Thread.prototype,stringifyFieldVal=function(a){var b=is.fn(a)?a.toString():"JSON.parse('"+JSON.stringify(a)+"')";return b},fnAsRequire=function(a){var b,c;is.object(a)&&a.fn?(b=fnAs(a.fn,a.name),c=a.name,a=a.fn):is.fn(a)?(b=a.toString(),c=a.name):is.string(a)?b=a:is.object(a)&&(b=a.proto?"":a.name+" = {};",c=a.name,a=a.obj),b+="\n";var d=function(a,c){if(a.prototype){var d=!1;for(var e in a.prototype){d=!0;break}d&&(b+=fnAsRequire({name:c,obj:a,proto:!0},a))}};if(a.prototype&&null!=c)for(var e in a.prototype){var f="",g=a.prototype[e],h=stringifyFieldVal(g),i=c+".prototype."+e;f+=i+" = "+h+";\n",f&&(b+=f),d(g,i)}if(!is.string(a))for(var e in a){var j="";if(a.hasOwnProperty(e)){var g=a[e],h=stringifyFieldVal(g),i=c+'["'+e+'"]';j+=i+" = "+h+";\n"}j&&(b+=j),d(g,i)}return b},isPathStr=function(a){return is.string(a)&&a.match(/\.js$/)};util.extend(thdfn,{instanceString:function(){return"thread"},require:function(a,b){var c=this._private.requires;if(isPathStr(a))return this._private.files.push(a),this;if(b)a=is.fn(a)?{name:b,fn:a}:{name:b,obj:a};else if(is.fn(a)){if(!a.name)throw'The function name could not be automatically determined.  Use thread.require( someFunction, "someFunction" )';a={name:a.name,fn:a}}return c.push(a),this},pass:function(a){return this._private.pass.push(a),this},run:function(fn,pass){var self=this,_p=this._private;if(pass=pass||_p.pass.shift(),_p.stopped)throw"Attempted to run a stopped thread!  Start a new thread or do not stop the existing thread and reuse it.";if(_p.running)return _p.queue=_p.queue.then(function(){return self.run(fn,pass)});var useWW=null!=window&&!_p.disabled,useNode=!window&&"undefined"!=typeof module&&!_p.disabled;self.trigger("run");var runP=new Promise(function(resolve,reject){_p.running=!0;var threadTechAlreadyExists=_p.ran,fnImplStr=is.string(fn)?fn:fn.toString(),fnStr="\n"+_p.requires.map(function(a){return fnAsRequire(a)}).concat(_p.files.map(function(a){if(useWW){var b=function(a){return a.match(/^\.\//)||a.match(/^\.\./)?window.location.origin+window.location.pathname+a:a.match(/^\//)?window.location.origin+"/"+a:a};return'importScripts("'+b(a)+'");'}if(useNode)return'eval( require("fs").readFileSync("'+a+'", { encoding: "utf8" }) );';throw"External file `"+a+"` can not be required without any threading technology."})).concat(["( function(){","var ret = ("+fnImplStr+")("+JSON.stringify(pass)+");","if( ret !== undefined ){ resolve(ret); }","} )()\n"]).join("\n");if(_p.requires=[],_p.files=[],useWW){var fnBlob,fnUrl;if(!threadTechAlreadyExists){var fnPre=fnStr+"";fnStr=["function _ref_(o){ return eval(o); };","function broadcast(m){ return message(m); };","function message(m){ postMessage(m); };","function listen(fn){",'  self.addEventListener("message", function(m){ ','    if( typeof m === "object" && (m.data.$$eval || m.data === "$$start") ){',"    } else { ","      fn( m.data );","    }","  });","};",'self.addEventListener("message", function(m){  if( m.data.$$eval ){ eval( m.data.$$eval ); }  });',"function resolve(v){ postMessage({ $$resolve: v }); };","function reject(v){ postMessage({ $$reject: v }); };"].join("\n"),
fnStr+=fnPre,fnBlob=new Blob([fnStr],{type:"application/javascript"}),fnUrl=window.URL.createObjectURL(fnBlob)}var ww=_p.webworker=_p.webworker||new Worker(fnUrl);threadTechAlreadyExists&&ww.postMessage({$$eval:fnStr});var cb;ww.addEventListener("message",cb=function(a){var b=is.object(a)&&is.object(a.data);b&&"$$resolve"in a.data?(ww.removeEventListener("message",cb),resolve(a.data.$$resolve)):b&&"$$reject"in a.data?(ww.removeEventListener("message",cb),reject(a.data.$$reject)):self.trigger(new Event(a,{type:"message",message:a.data}))},!1),threadTechAlreadyExists||ww.postMessage("$$start")}else if(useNode){_p.child||(_p.child=_dereq_("child_process").fork(_dereq_("path").join(__dirname,"thread-node-fork")));var child=_p.child,cb;child.on("message",cb=function(a){is.object(a)&&"$$resolve"in a?(child.removeListener("message",cb),resolve(a.$$resolve)):is.object(a)&&"$$reject"in a?(child.removeListener("message",cb),reject(a.$$reject)):self.trigger(new Event({},{type:"message",message:a}))}),child.send({$$eval:fnStr})}else{var promiseResolve=resolve,promiseReject=reject,timer=_p.timer=_p.timer||{listeners:[],exec:function(){fnStr=["function _ref_(o){ return eval(o); };","function broadcast(m){ return message(m); };",'function message(m){ self.trigger( new Event({}, { type: "message", message: m }) ); };',"function listen(fn){ timer.listeners.push( fn ); };","function resolve(v){ promiseResolve(v); };","function reject(v){ promiseReject(v); };"].join("\n")+fnStr,eval(fnStr)},message:function(a){for(var b=timer.listeners,c=0;c<b.length;c++){var d=b[c];d(a)}}};timer.exec()}}).then(function(a){return _p.running=!1,_p.ran=!0,self.trigger("ran"),a});return null==_p.queue&&(_p.queue=runP),runP},message:function(a){var b=this._private;return b.webworker&&b.webworker.postMessage(a),b.child&&b.child.send(a),b.timer&&b.timer.message(a),this},stop:function(){var a=this._private;return a.webworker&&a.webworker.terminate(),a.child&&a.child.kill(),a.timer,a.stopped=!0,this.trigger("stop")},stopped:function(){return this._private.stopped}});var fnAs=function(a,b){var c=a.toString();return c=c.replace(/function\s*?\S*?\s*?\(/,"function "+b+"(")},defineFnal=function(a){return a=a||{},function(b,c){var d=fnAs(b,"_$_$_"+a.name);return this.require(d),this.run(["function( data ){","  var origResolve = resolve;","  var res = [];","  ","  resolve = function( val ){","    res.push( val );","  };","  ","  var ret = data."+a.name+"( _$_$_"+a.name+(arguments.length>1?", "+JSON.stringify(c):"")+" );","  ","  resolve = origResolve;","  resolve( res.length > 0 ? res : ret );","}"].join("\n"))}};util.extend(thdfn,{reduce:defineFnal({name:"reduce"}),reduceRight:defineFnal({name:"reduceRight"}),map:defineFnal({name:"map"})});var fn=thdfn;fn.promise=fn.run,fn.terminate=fn.halt=fn.stop,fn.include=fn.require,util.extend(thdfn,{on:define.on(),one:define.on({unbindSelfOnTrigger:!0}),off:define.off(),trigger:define.trigger()}),define.eventAliasesOn(thdfn),module.exports=Thread},{"./define":41,"./event":42,"./is":77,"./promise":80,"./util":94,"./window":100,child_process:void 0,path:void 0}],93:[function(a,b,c){"use strict";var d=a("../is");b.exports={hex2tuple:function(a){if((4===a.length||7===a.length)&&"#"===a[0]){var b,c,d,e=4===a.length,f=16;return e?(b=parseInt(a[1]+a[1],f),c=parseInt(a[2]+a[2],f),d=parseInt(a[3]+a[3],f)):(b=parseInt(a[1]+a[2],f),c=parseInt(a[3]+a[4],f),d=parseInt(a[5]+a[6],f)),[b,c,d]}},hsl2tuple:function(a){function b(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a}var c,d,e,f,g,h,i,j,k=new RegExp("^"+this.regex.hsla+"$").exec(a);if(k){if(d=parseInt(k[1]),0>d?d=(360- -1*d%360)%360:d>360&&(d%=360),d/=360,e=parseFloat(k[2]),0>e||e>100)return;if(e/=100,f=parseFloat(k[3]),0>f||f>100)return;if(f/=100,g=k[4],void 0!==g&&(g=parseFloat(g),0>g||g>1))return;if(0===e)h=i=j=Math.round(255*f);else{var l=.5>f?f*(1+e):f+e-f*e,m=2*f-l;h=Math.round(255*b(m,l,d+1/3)),i=Math.round(255*b(m,l,d)),j=Math.round(255*b(m,l,d-1/3))}c=[h,i,j,g]}return c},rgb2tuple:function(a){var b,c=new RegExp("^"+this.regex.rgba+"$").exec(a);if(c){b=[];for(var d=[],e=1;3>=e;e++){var f=c[e];if("%"===f[f.length-1]&&(d[e]=!0),f=parseFloat(f),d[e]&&(f=f/100*255),0>f||f>255)return;b.push(Math.floor(f))}var g=d[1]||d[2]||d[3],h=d[1]&&d[2]&&d[3];if(g&&!h)return;var i=c[4];if(void 0!==i){if(i=parseFloat(i),0>i||i>1)return;b.push(i)}}return b},colorname2tuple:function(a){return this.colors[a.toLowerCase()]},color2tuple:function(a){return(d.array(a)?a:null)||this.colorname2tuple(a)||this.hex2tuple(a)||this.rgb2tuple(a)||this.hsl2tuple(a)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}},{"../is":77}],94:[function(a,b,c){"use strict";var d=a("../is"),e=a("../math"),f={falsify:function(){return!1},zeroify:function(){return 0},noop:function(){},error:function(a){console.error?(console.error.apply(console,arguments),console.trace&&console.trace()):(console.log.apply(console,arguments),console.trace&&console.trace())},clone:function(a){return this.extend({},a)},copy:function(a){return null==a?a:d.array(a)?a.slice():d.plainObject(a)?this.clone(a):a}};f.makeBoundingBox=e.makeBoundingBox.bind(e),f._staticEmptyObject={},f.staticEmptyObject=function(){return f._staticEmptyObject},f.extend=null!=Object.assign?Object.assign:function(a){for(var b=arguments,c=1;c<b.length;c++){var d=b[c];for(var e in d)a[e]=d[e]}return a},[a("./colors"),a("./maps"),{memoize:a("./memoize")},a("./regex"),a("./strings"),a("./timing")].forEach(function(a){f.extend(f,a)}),b.exports=f},{"../is":77,"../math":79,"./colors":93,"./maps":95,"./memoize":96,"./regex":97,"./strings":98,"./timing":99}],95:[function(a,b,c){"use strict";var d=a("../is");b.exports={mapEmpty:function(a){var b=!0;if(null!=a)for(var c in a){b=!1;break}return b},pushMap:function(a){var b=this.getMap(a);null==b?this.setMap(this.extend({},a,{value:[a.value]})):b.push(a.value)},setMap:function(a){for(var b,c=a.map,e=a.keys,f=e.length,g=0;f>g;g++){var b=e[g];d.plainObject(b)&&this.error("Tried to set map with object key"),g<e.length-1?(null==c[b]&&(c[b]={}),c=c[b]):c[b]=a.value}},getMap:function(a){for(var b=a.map,c=a.keys,e=c.length,f=0;e>f;f++){var g=c[f];if(d.plainObject(g)&&this.error("Tried to get map with object key"),b=b[g],null==b)return b}return b},deleteMap:function(a){for(var b=a.map,c=a.keys,e=c.length,f=a.keepChildren,g=0;e>g;g++){var h=c[g];d.plainObject(h)&&this.error("Tried to delete map with object key");var i=g===a.keys.length-1;if(i)if(f)for(var j in b)f[j]||(b[j]=void 0);else b[h]=void 0;else b=b[h]}}}},{"../is":77}],96:[function(a,b,c){"use strict";b.exports=function(a,b){var c=this,d={};return b||(b=function(){if(1===arguments.length)return arguments[0];for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);return a.join("$")}),function(){var e,f=arguments,g=b.apply(c,f);return(e=d[g])||(e=d[g]=a.apply(c,f)),e}}},{}],97:[function(a,b,c){"use strict";var d="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",e="rgb[a]?\\(("+d+"[%]?)\\s*,\\s*("+d+"[%]?)\\s*,\\s*("+d+"[%]?)(?:\\s*,\\s*("+d+"))?\\)",f="rgb[a]?\\((?:"+d+"[%]?)\\s*,\\s*(?:"+d+"[%]?)\\s*,\\s*(?:"+d+"[%]?)(?:\\s*,\\s*(?:"+d+"))?\\)",g="hsl[a]?\\(("+d+")\\s*,\\s*("+d+"[%])\\s*,\\s*("+d+"[%])(?:\\s*,\\s*("+d+"))?\\)",h="hsl[a]?\\((?:"+d+")\\s*,\\s*(?:"+d+"[%])\\s*,\\s*(?:"+d+"[%])(?:\\s*,\\s*(?:"+d+"))?\\)",i="\\#[0-9a-fA-F]{3}",j="\\#[0-9a-fA-F]{6}";b.exports={regex:{number:d,rgba:e,rgbaNoBackRefs:f,hsla:g,hslaNoBackRefs:h,hex3:i,hex6:j}}},{}],98:[function(a,b,c){"use strict";var d=a("./memoize"),e=a("../is");b.exports={camel2dash:d(function(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}),dash2camel:d(function(a){return a.replace(/(-\w)/g,function(a){return a[1].toUpperCase()})}),capitalize:function(a){return e.emptyString(a)?a:a.charAt(0).toUpperCase()+a.substring(1)}}},{"../is":77,"./memoize":96}],99:[function(a,b,c){"use strict";var d=a("../window"),e=a("../is"),f=d?d.performance:null,g={},h=d?d.requestAnimationFrame||d.mozRequestAnimationFrame||d.webkitRequestAnimationFrame||d.msRequestAnimationFrame:null;h=h||function(a){a&&setTimeout(function(){a(i())},1e3/60)},g.requestAnimationFrame=function(a){h(a)};var i=f&&f.now?function(){return f.now()}:function(){return Date.now()};g.performanceNow=i,g.throttle=function(a,b,c){var d=!0,f=!0;return c===!1?d=!1:e.plainObject(c)&&(d="leading"in c?c.leading:d,f="trailing"in c?c.trailing:f),c=c||{},c.leading=d,c.maxWait=b,c.trailing=f,g.debounce(a,b,c)},g.now=function(){return Date.now()},g.debounce=function(a,b,c){var d,f,g,h,i,j,k,l=this,m=0,n=!1,o=!0;if(e.fn(a)){if(b=Math.max(0,b)||0,c===!0){var p=!0;o=!1}else e.plainObject(c)&&(p=c.leading,n="maxWait"in c&&(Math.max(b,c.maxWait)||0),o="trailing"in c?c.trailing:o);var q=function(){var c=b-(l.now()-h);if(0>=c){f&&clearTimeout(f);var e=k;f=j=k=void 0,e&&(m=l.now(),g=a.apply(i,d),j||f||(d=i=null))}else j=setTimeout(q,c)},r=function(){j&&clearTimeout(j),f=j=k=void 0,(o||n!==b)&&(m=l.now(),g=a.apply(i,d),j||f||(d=i=null))};return function(){if(d=arguments,h=l.now(),i=this,k=o&&(j||!p),n===!1)var c=p&&!j;else{f||p||(m=h);var e=n-(h-m),s=0>=e;s?(f&&(f=clearTimeout(f)),m=h,g=a.apply(i,d)):f||(f=setTimeout(r,e))}return s&&j?j=clearTimeout(j):j||b===n||(j=setTimeout(q,b)),c&&(s=!0,g=a.apply(i,d)),!s||j||f||(d=i=null),g}}},b.exports=g},{"../is":77,"../window":100}],100:[function(a,b,c){b.exports="undefined"==typeof window?null:window},{}]},{},[76])(76)});