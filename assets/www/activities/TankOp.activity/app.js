/*! Sugarizer 2016-12-28 */
requirejs(["sugar-web/activity/activity","../lib/webL10n"],function(a,b){b.language.code=language_code,enyo.kind({name:"TankOp.App",kind:enyo.Control,published:{activity:null},classes:"home",components:[{kind:"Image",classes:"home-image no-select-content",src:"images/home.png"},{classes:"start-button",ontap:"play",components:[{kind:"Image",classes:"start-button-image no-select-content",src:"images/button.png"},{content:b.get("Start"),classes:"start-button-text no-select-content"}]},{kind:"Image",classes:"credit-button no-select-content",src:"images/credit.png",ontap:"showCredit"},{name:"creditsPopup",kind:"TankOp.CreditsPopup"},{classes:"mission-description no-select-content",components:[{components:[{content:b.get("NextMission"),classes:"mission-header mission-line"},{content:":",classes:"mission-dot mission-line"}]},{classes:"go-arrow go-left mission-line",ontap:"previousMission"},{name:"mission",content:" ",classes:"mission-text mission-line"},{classes:"go-arrow go-right mission-line",ontap:"nextMission"}]},{classes:"mission-status no-select-content",components:[{components:[{content:b.get("Completed"),classes:"mission-header mission-line"},{content:":",classes:"mission-dot mission-line"}]},{name:"stars",components:[{classes:"mission mission-completed mission-line"},{classes:"mission mission-tocomplete mission-line"},{classes:"mission mission-tocomplete mission-line"},{classes:"mission mission-tocomplete mission-line"},{classes:"mission mission-tocomplete mission-line"},{classes:"mission mission-tocomplete mission-line"},{classes:"mission mission-tocomplete mission-line"},{classes:"mission mission-tocomplete mission-line"},{classes:"mission mission-tocomplete mission-line"},{classes:"mission mission-tocomplete mission-line"},{classes:"mission mission-tocomplete mission-line"},{classes:"mission mission-tocomplete mission-line"}]}]}],create:function(){this.inherited(arguments),this.currentlevel=0,this.$.mission.setContent(settings.levels[this.currentlevel].name),this.init()},init:function(){sound.play("audio/soundtrack",!0);var a=[];enyo.forEach(this.$.stars.getControls(),function(b){a.push(b)});for(var b=0;b<a.length;b++)a[b].destroy();for(var b=0;b<settings.levels.length;b++)this.$.stars.createComponent({classes:settings.levels[b].completed?"mission mission-completed mission-line":"mission mission-tocomplete mission-line"},{owner:this}).render()},previousMission:function(){this.currentlevel--,this.currentlevel<0&&(this.currentlevel=settings.levels.length-1),this.$.mission.setContent(settings.levels[this.currentlevel].name)},nextMission:function(){this.currentlevel++,this.currentlevel==settings.levels.length&&(this.currentlevel=0),this.$.mission.setContent(settings.levels[this.currentlevel].name)},showCredit:function(){this.$.creditsPopup.show()},play:function(){sound.pause(),new TankOp.Play({level:this.currentlevel}).renderInto(document.getElementById("board"))},load:function(){var a=this.activity.getDatastoreObject(),b=this;a.loadAsText(function(a,c,d){var d=JSON.parse(d);settings.setState(d),b.init()})},save:function(a){var b=this.activity.getDatastoreObject(),c=JSON.stringify(settings.getState());b.setDataAsText(c),b.save(function(){})}})});