/*! Sugarizer 2019-09-21 */
enyo.kind({name:"TamTam.App",kind:"FittableRows",published:{activity:null},components:[{name:"content",kind:"Scroller",fit:!0,classes:"maincontent",onresize:"resize",components:[{name:"collections",classes:"collections",components:[]},{name:"items",classes:"items",components:[]}]}],create:function(){this.inherited(arguments),this.collection=0,this.computeSize();var a=this;requirejs(["sugar-web/env"],function(b){b.getEnvironment(function(b,c){a.userColor=c.user.colorvalue,a.draw()})})},computeSize:function(){var a=document.getElementById("main-toolbar"),b=document.getElementById("body"),c=b.offsetHeight;this.$.content.applyStyle("height",c-a.offsetHeight+"px")},resize:function(){this.computeSize(),this.draw()},draw:function(){var a=[];enyo.forEach(this.$.collections.getControls(),function(b){a.push(b)});for(var b=0;b<a.length;b++)a[b].destroy();document.getElementById("body").style.backgroundColor=this.userColor.fill,this.$.collections.applyStyle("background-color",this.userColor.fill);for(var c=TamTam.collections.length,b=0;b<c;b++)this.$.collections.createComponent({kind:"TamTam.Collection",name:TamTam.collections[b].name,selection:b==this.collection,ontap:"changeCollection"},{owner:this}).render();var a=[];this.$.items.applyStyle("background-color",this.userColor.fill),enyo.forEach(this.$.items.getControls(),function(b){a.push(b)});for(var b=0;b<a.length;b++)a[b].destroy();for(var d=TamTam.collections[this.collection],c=d.content.length,b=0;b<c;b++){var e=this.$.items.createComponent({kind:"TamTam.Item",name:d.content[b]},{owner:this});e.applyStyle("background-color",this.userColor.stroke),e.render()}},changeCollection:function(a,b){sound.pause();for(var c=TamTam.collections.length,d=0;d<c;d++)if(TamTam.collections[d].name==a.name)return this.collection=d,void this.draw()}});