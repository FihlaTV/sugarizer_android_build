/*! Sugarizer 2018-06-12 */
define(["sugar-web/activity/activity","sugar-web/datastore","sugar-web/env"],function(a,b,c){require(["domReady!"],function(b){a.setup();var d=document.getElementById("stop-button"),e=d.cloneNode(!0);document.getElementById("main-toolbar").replaceChild(e,d),e.addEventListener("click",function(b){document.getElementById("myBlocks").addEventListener("click",function(b){console.log("writing...");var c=document.getElementById("myBlocks").value;a.getDatastoreObject().setDataAsText(c),a.getDatastoreObject().save(function(b){null===b?console.log("write done."):console.log("write failed."),a.close()})});for(var c=0;c<document.body.getElementsByTagName("span").length;c++){var d=document.getElementsByTagName("span")[c];"Save to Sugarizer"==d.innerHTML?(d.click(),console.log("Call saved successfully")):console.log("Unable to save")}}),c.getEnvironment(function(b,c){c.objectId&&a.getDatastoreObject().loadAsText(function(a,b,c){if(null==a&&null!=c){console.log(c);for(var d=0;d<document.body.getElementsByTagName("span").length;d++){var e=document.getElementsByTagName("span")[d];"Load from Sugarizer"==e.innerHTML?(document.getElementById("myBlocks").value=c,e.click(),console.log("Loaded successfully")):console.log("Unable to load")}}})})})});