/*! Sugarizer 2016-12-28 */
define(["webL10n"],function(a){function b(a){var b=a+1;return b==xoPalette.colors.length&&(b=0),b}function c(a){var b=a-1;return b<0&&(b=xoPalette.colors.length-1),b}var d={},e=[{name:"Years",factor:30758400},{name:"Months",factor:2592e3},{name:"Weeks",factor:604800},{name:"Days",factor:86400},{name:"Hours",factor:3600},{name:"Minutes",factor:60}];return d.timestampToElapsedString=function(b,c,d){for(var f=d?"_short":"",g=0,h="",i=((new Date).getTime()-b)/1e3,j=0;j<e.length;j++){var k=e[j].factor,l=Math.floor(i/k);if(l>0&&(g>0&&(h+=","),h+=" "+l+" "+(1==l?a.get(e[j].name+"_one"+f):a.get(e[j].name+"_other"+f)),i-=l*k),""!=h&&(g+=1),g==c)break}return 0==g?a.get("SecondsAgo"+f):a.get("Ago"+f,{time:h})},d.getDateRange=function(a){if(void 0===a)return null;var b=new Date,c=new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime();b=b.getTime();var d=null;switch(a){case 1:d={min:c,max:b};break;case 2:d={min:c-864e5,max:b};break;case 3:d={min:c-6048e5,max:b};break;case 4:d={min:c-2592e6,max:b};break;case 5:d={min:c-307584e5,max:b}}return d},d.getNextStrokeColor=function(a){var c=d.getColorIndex(a);if(c==-1)return a;for(var e=b(c);xoPalette.colors[e].stroke!=xoPalette.colors[c].stroke;)e=b(e);return xoPalette.colors[e]},d.getPreviousStrokeColor=function(a){var b=d.getColorIndex(a);if(b==-1)return a;for(var e=c(b);xoPalette.colors[e].stroke!=xoPalette.colors[b].stroke;)e=c(e);return xoPalette.colors[e]},d.getNextFillColor=function(a){var c=d.getColorIndex(a);if(c==-1)return a;for(var e=b(c);xoPalette.colors[e].fill!=xoPalette.colors[c].fill;)e=b(e);return xoPalette.colors[e]},d.getPreviousFillColor=function(a){var b=d.getColorIndex(a);if(b==-1)return a;for(var e=c(b);xoPalette.colors[e].fill!=xoPalette.colors[b].fill;)e=c(e);return xoPalette.colors[e]},d.getColorIndex=function(a){for(var b=0;b<xoPalette.colors.length;b++)if(a.stroke==xoPalette.colors[b].stroke&&a.fill==xoPalette.colors[b].fill)return b;return-1},d.getCanvasCenter=function(){var a=document.getElementById("canvas"),b=a.offsetHeight,c=a.offsetWidth,d=parseFloat(b)/2,e=parseFloat(c)/2;return{x:e,y:d,dx:c,dy:b}},d.computeMargin=function(a,b){var c=document.getElementById("canvas"),d=c.offsetHeight,e=c.offsetWidth,f=a.width<=e?a.width:b.width*e,g=a.height<=d?a.height:b.height*d;return{left:parseFloat(e-f)/2,top:parseFloat(d-g)/2,width:f,height:g}},d.cursorIsInside=function(a){var b=document.getElementById(a.getAttribute("id"));if(null==b)return!1;var c={};for(c.x=b.offsetLeft,c.y=b.offsetTop,c.dx=b.clientWidth,c.dy=b.clientHeight;b.offsetParent&&(c.x=c.x+b.offsetParent.offsetLeft,c.y=c.y+b.offsetParent.offsetTop-b.scrollTop,b!=document.getElementsByTagName("body")[0]);)b=b.offsetParent;var d=mouse.position.x>=c.x&&mouse.position.x<=c.x+c.dx&&mouse.position.y>=c.y&&mouse.position.y<=c.y+c.dy;return d},d.setToolbar=function(a){toolbar!=a&&(toolbar=a,a.renderInto(document.getElementById("toolbar")))},d.getBrowserName=function(){return enyo.platform.android?"Android":enyo.platform.androidChrome?"Chrome Android":enyo.platform.androidFirefox?"Firefox Android":enyo.platform.ie?"IE":enyo.platform.ios?"iOS":enyo.platform.webos?"webOS":enyo.platform.blackberry?"BlackBerry":enyo.platform.safari?"Safari":enyo.platform.chrome?"Chrome":enyo.platform.firefox?"Firefox":"Unknown"},d.getBrowserVersion=function(){return enyo.platform.android?enyo.platform.android:enyo.platform.androidChrome?enyo.platform.androidChrome:enyo.platform.androidFirefox?enyo.platform.androidFirefox:enyo.platform.ie?enyo.platform.ie:enyo.platform.ios?enyo.platform.ios:enyo.platform.webos?enyo.platform.webos:enyo.platform.blackberry?enyo.platform.blackberry:enyo.platform.safari?enyo.platform.safari:enyo.platform.chrome?enyo.platform.chrome:enyo.platform.firefox?enyo.platform.firefox:"?"},d.getClientType=function(){return"http"==document.location.protocol.substr(0,4)?constant.webAppType:constant.appType},d.getClientName=function(){return this.getClientType()==constant.webAppType?"Web App":"App"},d.getCurrentServerUrl=function(){var a=window.location.href.substr(document.location.protocol.length+2);return a.substring(0,a.lastIndexOf("/"))},d.restartApp=function(){location.reload()},d.vibrate=function(){(enyo.platform.android||enyo.platform.androidChrome||enyo.platform.ios)&&d.getClientType()==constant.appType&&navigator.vibrate&&navigator.vibrate(30)},d.hideNativeToolbar=function(){(enyo.platform.android||enyo.platform.androidChrome)&&d.getClientType()==constant.appType&&AndroidFullScreen.immersiveMode(function(){},function(){})},d.handleVolumeButtons=function(){if((enyo.platform.android||enyo.platform.androidChrome)&&d.getClientType()==constant.appType){var a=function(){};document.addEventListener("volumeupbutton",function(){cordova.plugins.VolumeControl.getVolume(function(b){var c=parseInt(b);c<100&&cordova.plugins.VolumeControl.setVolume(c+10,a,a)},a)},!1),document.addEventListener("volumedownbutton",function(){cordova.plugins.VolumeControl.getVolume(function(b){var c=parseInt(b);c>0&&cordova.plugins.VolumeControl.setVolume(c-1,a,a)},a)},!1)}},d.quitApp=function(){document.getElementById("toolbar").style.visibility="hidden",document.getElementById("canvas").style.visibility="hidden",document.getElementById("shutdown").style.visibility="visible","undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime&&window.top.postMessage("","*"),window.close(),/Edge/.test(navigator.userAgent)||(window.open("","_self",""),window.close()),navigator&&(navigator.app?navigator.app.exitApp():navigator.device&&navigator.device.exitApp())},d});